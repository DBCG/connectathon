{
  "resourceType": "Library",
  "id": "library-AdvancedIllnessandFrailtyExclusion-FHIR3-4.0.000",
  "text": {
    "status": "generated",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">library-AdvancedIllnessandFrailtyExclusion-FHIR3-4.0.000</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"> Logic Library </td></tr><tr><th scope=\"row\"><b>Version: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">4.0.000</td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"2\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-FHIRHelpers-3.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-MATGlobalCommonFunctions-FHIR3-2.0.000</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"14\" scope=\"row\"><b>Data Requirements: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Condition</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.110.12.1082</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1087</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1086</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1085</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1084</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1014</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1012</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1083</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationDispense</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1510</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>DeviceRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.118.12.1300</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>DeviceUseStatement</span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Condition</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1074</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1088</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Observation</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1075</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library AdvancedIllnessandFrailtyExclusion_FHIR3 version '4.0.000'\n\nusing FHIR version '3.0.0'\n\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\ninclude MATGlobalCommonFunctions_FHIR3 version '2.0.000' called Global\n\ncodesystem &quot;LOINC&quot;: 'urn:oid:2.16.840.1.113883.6.1'\n\nvalueset &quot;Acute Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1083'\nvalueset &quot;Advanced Illness&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.110.12.1082'\nvalueset &quot;Care Services in Long-Term Residential Facility&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1014'\nvalueset &quot;Dementia Medications&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1510'\nvalueset &quot;ED&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1085'\nvalueset &quot;Frailty Device&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.118.12.1300'\nvalueset &quot;Frailty Diagnosis&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1074'\nvalueset &quot;Frailty Encounter&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1088'\nvalueset &quot;Frailty Symptom&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1075'\nvalueset &quot;Nonacute Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1084'\nvalueset &quot;Nursing Facility Visit&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1012'\nvalueset &quot;Observation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1086'\nvalueset &quot;Outpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1087'\n\ncode &quot;Birth date&quot;: '21112-8' from &quot;LOINC&quot; display 'Birth date'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n\ncontext Patient\n\ndefine &quot;Advanced Illness Diagnoses&quot;:\n    [Condition: &quot;Advanced Illness&quot;] AdvancedIllnessDiagnosis\n\ndefine &quot;Outpatient Encounters with Advanced Illness&quot;:\n\t( [Encounter: &quot;Outpatient&quot;]\n\t\tunion [Encounter: &quot;Observation&quot;]\n\t\tunion [Encounter: &quot;ED&quot;]\n\t\tunion [Encounter: &quot;Nonacute Inpatient&quot;] ) OutpatientEncounter\n\t\twith &quot;Advanced Illness Diagnoses&quot; AdvancedIllnessDiagnosis\n            such that exists (\n                OutpatientEncounter.diagnosis.condition Condition\n                    where EndsWith(Condition.reference, AdvancedIllnessDiagnosis.id)\n            )\n            and OutpatientEncounter.period starts 2 years or less before\n\t\t\tend of &quot;Measurement Period&quot;\n\ndefine &quot;Long Term Care Periods During Measurement Period&quot;:\n\t( [Encounter: &quot;Care Services in Long-Term Residential Facility&quot;]\n\t\tunion [Encounter: &quot;Nursing Facility Visit&quot;] ) LongTermFacilityEncounter\n\t\twhere LongTermFacilityEncounter.period overlaps &quot;Measurement Period&quot;\n\t\treturn LongTermFacilityEncounter.period\n\t\t\tintersect &quot;Measurement Period&quot;\n\ndefine &quot;Inpatient Encounter with Advanced Illness&quot;:\n\t[Encounter: &quot;Acute Inpatient&quot;] InpatientEncounter\n\t\twith &quot;Advanced Illness Diagnoses&quot; AdvancedIllnessDiagnosis\n            such that exists (\n                InpatientEncounter.diagnosis.condition Condition\n                    where EndsWith(Condition.reference, AdvancedIllnessDiagnosis.id)\n            )\n\t\t\tand InpatientEncounter.period starts 2 years or less before\n\t\t\tend of &quot;Measurement Period&quot;\n\ndefine &quot;Dementia Medications In Year Before or During Measurement Period&quot;:\n\t[&quot;MedicationDispense&quot;: &quot;Dementia Medications&quot;] DementiaMed\n\t\twhere DementiaMed.whenHandedOver as dateTime during day of Interval[\n            ( start of &quot;Measurement Period&quot; - 1 year ), end of &quot;Measurement Period&quot;\n        ]\n\ndefine &quot;Has Criteria Indicating Frailty&quot;:\n\texists ( [DeviceRequest: &quot;Frailty Device&quot;] FrailtyDeviceOrder\n\t\t\twhere FrailtyDeviceOrder.authoredOn during day of &quot;Measurement Period&quot;\n\t)\n\t\tor exists ( [DeviceUseStatement: &quot;Frailty Device&quot;] FrailtyDeviceUse\n\t\t\t\twhere FrailtyDeviceUse.timing as Period overlaps &quot;Measurement Period&quot;\n                    or FrailtyDeviceUse.timing as dateTime during day of &quot;Measurement Period&quot;\n\t\t)\n\t\tor exists ( [Condition: &quot;Frailty Diagnosis&quot;] FrailtyDiagnosis\n\t\t\t\twhere FrailtyDiagnosis.onset as Period overlaps &quot;Measurement Period&quot;\n                    or FrailtyDiagnosis.onset as dateTime during day of &quot;Measurement Period&quot;\n\t\t)\n\t\tor exists ( [Encounter: &quot;Frailty Encounter&quot;] FrailtyEncounter\n\t\t\t\twhere FrailtyEncounter.period overlaps &quot;Measurement Period&quot;\n\t\t)\n\t\tor exists ( [Observation: &quot;Frailty Symptom&quot;] FrailtySymptomObservation\n\t\t\t\twhere FrailtySymptomObservation.effective as Period overlaps &quot;Measurement Period&quot;\n                    or FrailtySymptomObservation.effective as dateTime during day of &quot;Measurement Period&quot;\n\t\t)\n\ndefine &quot;Advanced Illness and Frailty Exclusion Including Over Age 80&quot;:\n\t//If the measure includes populations age 80 and older, then use this logic:\n\t(\n        Global.&quot;CalendarAgeInYearsAt&quot;(FHIRHelpers.ToDate(Patient.birthDate), start of &quot;Measurement Period&quot;)in Interval[66, 80]\n            and &quot;Has Criteria Indicating Frailty&quot;\n            and ( Count(&quot;Outpatient Encounters with Advanced Illness&quot;)&gt;= 2\n                or exists ( &quot;Inpatient Encounter with Advanced Illness&quot; )\n                or exists &quot;Dementia Medications In Year Before or During Measurement Period&quot;\n            )\n\t)\n\t\tor (\n            Global.&quot;CalendarAgeInYearsAt&quot;(FHIRHelpers.ToDate(Patient.birthDate), start of &quot;Measurement Period&quot;)&gt;= 81\n\t\t\t    and &quot;Has Criteria Indicating Frailty&quot;\n\t\t)\n\ndefine &quot;Advanced Illness and Frailty Exclusion Including Under Age 80&quot;:\n\t//If the measure does NOT include populations age 80 and older, then use this logic:\n\tGlobal.&quot;CalendarAgeInYearsAt&quot;(FHIRHelpers.ToDate(Patient.birthDate), start of &quot;Measurement Period&quot;)&gt;= 65\n        and &quot;Has Criteria Indicating Frailty&quot;\n        and ( Count(&quot;Outpatient Encounters with Advanced Illness&quot;)&gt;= 2\n            or exists ( &quot;Inpatient Encounter with Advanced Illness&quot; )\n            or exists &quot;Dementia Medications In Year Before or During Measurement Period&quot;\n        )\n\ndefine &quot;Has Spent More Than 90 Days in Long Term Care&quot;:\n\t&quot;Days Spent in Long Term Care During Measurement Period&quot; &gt; 90\n\ndefine &quot;Days Spent in Long Term Care During Measurement Period&quot;:\n\t&quot;CumulativeDays&quot;(&quot;Long Term Care Periods During Measurement Period&quot;)\n\ndefine function &quot;CumulativeDays&quot;(Intervals List&lt;Interval&lt;DateTime&gt;&gt; ):\n\tSum((collapse Intervals)CollapsedInterval\n\t\t\treturn all duration in days of CollapsedInterval\n\t)\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
  },
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "cqf-tooling"
    }
  } ],
  "version": "4.0.000",
  "name": "AdvancedIllnessandFrailtyExclusion_FHIR3",
  "status": "active",
  "experimental": true,
  "type": {
    "coding": [ {
      "system": "http://hl7.org/fhir/codesystem-library-type.html",
      "code": "logic-library"
    } ]
  },
  "dataRequirement": [ {
    "type": "Condition",
    "codeFilter": [ {
      "path": "code",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.110.12.1082"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1087"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1086"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1085"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1084"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1014"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1012"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1083"
      }
    } ]
  }, {
    "type": "MedicationDispense",
    "codeFilter": [ {
      "path": "medication",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1510"
      }
    } ]
  }, {
    "type": "DeviceRequest",
    "codeFilter": [ {
      "path": "code",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.118.12.1300"
      }
    } ]
  }, {
    "type": "DeviceUseStatement"
  }, {
    "type": "Condition",
    "codeFilter": [ {
      "path": "code",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1074"
      }
    } ]
  }, {
    "type": "Encounter",
    "codeFilter": [ {
      "path": "type",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1088"
      }
    } ]
  }, {
    "type": "Observation",
    "codeFilter": [ {
      "path": "code",
      "valueSetReference": {
        "reference": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1075"
      }
    } ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBBZHZhbmNlZElsbG5lc3NhbmRGcmFpbHR5RXhjbHVzaW9uX0ZISVIzIHZlcnNpb24gJzQuMC4wMDAnCgp1c2luZyBGSElSIHZlcnNpb24gJzMuMC4wJwoKaW5jbHVkZSBGSElSSGVscGVycyB2ZXJzaW9uICczLjAuMCcgY2FsbGVkIEZISVJIZWxwZXJzCmluY2x1ZGUgTUFUR2xvYmFsQ29tbW9uRnVuY3Rpb25zX0ZISVIzIHZlcnNpb24gJzIuMC4wMDAnIGNhbGxlZCBHbG9iYWwKCmNvZGVzeXN0ZW0gIkxPSU5DIjogJ3VybjpvaWQ6Mi4xNi44NDAuMS4xMTM4ODMuNi4xJwoKdmFsdWVzZXQgIkFjdXRlIElucGF0aWVudCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwMy4xMDEuMTIuMTA4MycKdmFsdWVzZXQgIkFkdmFuY2VkIElsbG5lc3MiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTEwLjEyLjEwODInCnZhbHVlc2V0ICJDYXJlIFNlcnZpY2VzIGluIExvbmctVGVybSBSZXNpZGVudGlhbCBGYWNpbGl0eSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwMy4xMDEuMTIuMTAxNCcKdmFsdWVzZXQgIkRlbWVudGlhIE1lZGljYXRpb25zIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjE5Ni4xMi4xNTEwJwp2YWx1ZXNldCAiRUQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwODUnCnZhbHVlc2V0ICJGcmFpbHR5IERldmljZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwMy4xMTguMTIuMTMwMCcKdmFsdWVzZXQgIkZyYWlsdHkgRGlhZ25vc2lzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjExMy4xMi4xMDc0Jwp2YWx1ZXNldCAiRnJhaWx0eSBFbmNvdW50ZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwODgnCnZhbHVlc2V0ICJGcmFpbHR5IFN5bXB0b20iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTEzLjEyLjEwNzUnCnZhbHVlc2V0ICJOb25hY3V0ZSBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwODQnCnZhbHVlc2V0ICJOdXJzaW5nIEZhY2lsaXR5IFZpc2l0IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDEyJwp2YWx1ZXNldCAiT2JzZXJ2YXRpb24iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwODYnCnZhbHVlc2V0ICJPdXRwYXRpZW50IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDg3JwoKY29kZSAiQmlydGggZGF0ZSI6ICcyMTExMi04JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQmlydGggZGF0ZScKCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBJbnRlcnZhbDxEYXRlVGltZT4KCmNvbnRleHQgUGF0aWVudAoKZGVmaW5lICJBZHZhbmNlZCBJbGxuZXNzIERpYWdub3NlcyI6CiAgICBbQ29uZGl0aW9uOiAiQWR2YW5jZWQgSWxsbmVzcyJdIEFkdmFuY2VkSWxsbmVzc0RpYWdub3NpcwoKZGVmaW5lICJPdXRwYXRpZW50IEVuY291bnRlcnMgd2l0aCBBZHZhbmNlZCBJbGxuZXNzIjoKCSggW0VuY291bnRlcjogIk91dHBhdGllbnQiXQoJCXVuaW9uIFtFbmNvdW50ZXI6ICJPYnNlcnZhdGlvbiJdCgkJdW5pb24gW0VuY291bnRlcjogIkVEIl0KCQl1bmlvbiBbRW5jb3VudGVyOiAiTm9uYWN1dGUgSW5wYXRpZW50Il0gKSBPdXRwYXRpZW50RW5jb3VudGVyCgkJd2l0aCAiQWR2YW5jZWQgSWxsbmVzcyBEaWFnbm9zZXMiIEFkdmFuY2VkSWxsbmVzc0RpYWdub3NpcwogICAgICAgICAgICBzdWNoIHRoYXQgZXhpc3RzICgKICAgICAgICAgICAgICAgIE91dHBhdGllbnRFbmNvdW50ZXIuZGlhZ25vc2lzLmNvbmRpdGlvbiBDb25kaXRpb24KICAgICAgICAgICAgICAgICAgICB3aGVyZSBFbmRzV2l0aChDb25kaXRpb24ucmVmZXJlbmNlLCBBZHZhbmNlZElsbG5lc3NEaWFnbm9zaXMuaWQpCiAgICAgICAgICAgICkKICAgICAgICAgICAgYW5kIE91dHBhdGllbnRFbmNvdW50ZXIucGVyaW9kIHN0YXJ0cyAyIHllYXJzIG9yIGxlc3MgYmVmb3JlCgkJCWVuZCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIgoKZGVmaW5lICJMb25nIFRlcm0gQ2FyZSBQZXJpb2RzIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiOgoJKCBbRW5jb3VudGVyOiAiQ2FyZSBTZXJ2aWNlcyBpbiBMb25nLVRlcm0gUmVzaWRlbnRpYWwgRmFjaWxpdHkiXQoJCXVuaW9uIFtFbmNvdW50ZXI6ICJOdXJzaW5nIEZhY2lsaXR5IFZpc2l0Il0gKSBMb25nVGVybUZhY2lsaXR5RW5jb3VudGVyCgkJd2hlcmUgTG9uZ1Rlcm1GYWNpbGl0eUVuY291bnRlci5wZXJpb2Qgb3ZlcmxhcHMgIk1lYXN1cmVtZW50IFBlcmlvZCIKCQlyZXR1cm4gTG9uZ1Rlcm1GYWNpbGl0eUVuY291bnRlci5wZXJpb2QKCQkJaW50ZXJzZWN0ICJNZWFzdXJlbWVudCBQZXJpb2QiCgpkZWZpbmUgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZHZhbmNlZCBJbGxuZXNzIjoKCVtFbmNvdW50ZXI6ICJBY3V0ZSBJbnBhdGllbnQiXSBJbnBhdGllbnRFbmNvdW50ZXIKCQl3aXRoICJBZHZhbmNlZCBJbGxuZXNzIERpYWdub3NlcyIgQWR2YW5jZWRJbGxuZXNzRGlhZ25vc2lzCiAgICAgICAgICAgIHN1Y2ggdGhhdCBleGlzdHMgKAogICAgICAgICAgICAgICAgSW5wYXRpZW50RW5jb3VudGVyLmRpYWdub3Npcy5jb25kaXRpb24gQ29uZGl0aW9uCiAgICAgICAgICAgICAgICAgICAgd2hlcmUgRW5kc1dpdGgoQ29uZGl0aW9uLnJlZmVyZW5jZSwgQWR2YW5jZWRJbGxuZXNzRGlhZ25vc2lzLmlkKQogICAgICAgICAgICApCgkJCWFuZCBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kIHN0YXJ0cyAyIHllYXJzIG9yIGxlc3MgYmVmb3JlCgkJCWVuZCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIgoKZGVmaW5lICJEZW1lbnRpYSBNZWRpY2F0aW9ucyBJbiBZZWFyIEJlZm9yZSBvciBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIjoKCVsiTWVkaWNhdGlvbkRpc3BlbnNlIjogIkRlbWVudGlhIE1lZGljYXRpb25zIl0gRGVtZW50aWFNZWQKCQl3aGVyZSBEZW1lbnRpYU1lZC53aGVuSGFuZGVkT3ZlciBhcyBkYXRlVGltZSBkdXJpbmcgZGF5IG9mIEludGVydmFsWwogICAgICAgICAgICAoIHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiIC0gMSB5ZWFyICksIGVuZCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIgogICAgICAgIF0KCmRlZmluZSAiSGFzIENyaXRlcmlhIEluZGljYXRpbmcgRnJhaWx0eSI6CglleGlzdHMgKCBbRGV2aWNlUmVxdWVzdDogIkZyYWlsdHkgRGV2aWNlIl0gRnJhaWx0eURldmljZU9yZGVyCgkJCXdoZXJlIEZyYWlsdHlEZXZpY2VPcmRlci5hdXRob3JlZE9uIGR1cmluZyBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIKCSkKCQlvciBleGlzdHMgKCBbRGV2aWNlVXNlU3RhdGVtZW50OiAiRnJhaWx0eSBEZXZpY2UiXSBGcmFpbHR5RGV2aWNlVXNlCgkJCQl3aGVyZSBGcmFpbHR5RGV2aWNlVXNlLnRpbWluZyBhcyBQZXJpb2Qgb3ZlcmxhcHMgIk1lYXN1cmVtZW50IFBlcmlvZCIKICAgICAgICAgICAgICAgICAgICBvciBGcmFpbHR5RGV2aWNlVXNlLnRpbWluZyBhcyBkYXRlVGltZSBkdXJpbmcgZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiCgkJKQoJCW9yIGV4aXN0cyAoIFtDb25kaXRpb246ICJGcmFpbHR5IERpYWdub3NpcyJdIEZyYWlsdHlEaWFnbm9zaXMKCQkJCXdoZXJlIEZyYWlsdHlEaWFnbm9zaXMub25zZXQgYXMgUGVyaW9kIG92ZXJsYXBzICJNZWFzdXJlbWVudCBQZXJpb2QiCiAgICAgICAgICAgICAgICAgICAgb3IgRnJhaWx0eURpYWdub3Npcy5vbnNldCBhcyBkYXRlVGltZSBkdXJpbmcgZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiCgkJKQoJCW9yIGV4aXN0cyAoIFtFbmNvdW50ZXI6ICJGcmFpbHR5IEVuY291bnRlciJdIEZyYWlsdHlFbmNvdW50ZXIKCQkJCXdoZXJlIEZyYWlsdHlFbmNvdW50ZXIucGVyaW9kIG92ZXJsYXBzICJNZWFzdXJlbWVudCBQZXJpb2QiCgkJKQoJCW9yIGV4aXN0cyAoIFtPYnNlcnZhdGlvbjogIkZyYWlsdHkgU3ltcHRvbSJdIEZyYWlsdHlTeW1wdG9tT2JzZXJ2YXRpb24KCQkJCXdoZXJlIEZyYWlsdHlTeW1wdG9tT2JzZXJ2YXRpb24uZWZmZWN0aXZlIGFzIFBlcmlvZCBvdmVybGFwcyAiTWVhc3VyZW1lbnQgUGVyaW9kIgogICAgICAgICAgICAgICAgICAgIG9yIEZyYWlsdHlTeW1wdG9tT2JzZXJ2YXRpb24uZWZmZWN0aXZlIGFzIGRhdGVUaW1lIGR1cmluZyBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIKCQkpCgpkZWZpbmUgIkFkdmFuY2VkIElsbG5lc3MgYW5kIEZyYWlsdHkgRXhjbHVzaW9uIEluY2x1ZGluZyBPdmVyIEFnZSA4MCI6CgkvL0lmIHRoZSBtZWFzdXJlIGluY2x1ZGVzIHBvcHVsYXRpb25zIGFnZSA4MCBhbmQgb2xkZXIsIHRoZW4gdXNlIHRoaXMgbG9naWM6CgkoCiAgICAgICAgR2xvYmFsLiJDYWxlbmRhckFnZUluWWVhcnNBdCIoRkhJUkhlbHBlcnMuVG9EYXRlKFBhdGllbnQuYmlydGhEYXRlKSwgc3RhcnQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIpaW4gSW50ZXJ2YWxbNjYsIDgwXQogICAgICAgICAgICBhbmQgIkhhcyBDcml0ZXJpYSBJbmRpY2F0aW5nIEZyYWlsdHkiCiAgICAgICAgICAgIGFuZCAoIENvdW50KCJPdXRwYXRpZW50IEVuY291bnRlcnMgd2l0aCBBZHZhbmNlZCBJbGxuZXNzIik+PSAyCiAgICAgICAgICAgICAgICBvciBleGlzdHMgKCAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFkdmFuY2VkIElsbG5lc3MiICkKICAgICAgICAgICAgICAgIG9yIGV4aXN0cyAiRGVtZW50aWEgTWVkaWNhdGlvbnMgSW4gWWVhciBCZWZvcmUgb3IgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCIKICAgICAgICAgICAgKQoJKQoJCW9yICgKICAgICAgICAgICAgR2xvYmFsLiJDYWxlbmRhckFnZUluWWVhcnNBdCIoRkhJUkhlbHBlcnMuVG9EYXRlKFBhdGllbnQuYmlydGhEYXRlKSwgc3RhcnQgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIpPj0gODEKCQkJICAgIGFuZCAiSGFzIENyaXRlcmlhIEluZGljYXRpbmcgRnJhaWx0eSIKCQkpCgpkZWZpbmUgIkFkdmFuY2VkIElsbG5lc3MgYW5kIEZyYWlsdHkgRXhjbHVzaW9uIEluY2x1ZGluZyBVbmRlciBBZ2UgODAiOgoJLy9JZiB0aGUgbWVhc3VyZSBkb2VzIE5PVCBpbmNsdWRlIHBvcHVsYXRpb25zIGFnZSA4MCBhbmQgb2xkZXIsIHRoZW4gdXNlIHRoaXMgbG9naWM6CglHbG9iYWwuIkNhbGVuZGFyQWdlSW5ZZWFyc0F0IihGSElSSGVscGVycy5Ub0RhdGUoUGF0aWVudC5iaXJ0aERhdGUpLCBzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIik+PSA2NQogICAgICAgIGFuZCAiSGFzIENyaXRlcmlhIEluZGljYXRpbmcgRnJhaWx0eSIKICAgICAgICBhbmQgKCBDb3VudCgiT3V0cGF0aWVudCBFbmNvdW50ZXJzIHdpdGggQWR2YW5jZWQgSWxsbmVzcyIpPj0gMgogICAgICAgICAgICBvciBleGlzdHMgKCAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFkdmFuY2VkIElsbG5lc3MiICkKICAgICAgICAgICAgb3IgZXhpc3RzICJEZW1lbnRpYSBNZWRpY2F0aW9ucyBJbiBZZWFyIEJlZm9yZSBvciBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIgogICAgICAgICkKCmRlZmluZSAiSGFzIFNwZW50IE1vcmUgVGhhbiA5MCBEYXlzIGluIExvbmcgVGVybSBDYXJlIjoKCSJEYXlzIFNwZW50IGluIExvbmcgVGVybSBDYXJlIER1cmluZyBNZWFzdXJlbWVudCBQZXJpb2QiID4gOTAKCmRlZmluZSAiRGF5cyBTcGVudCBpbiBMb25nIFRlcm0gQ2FyZSBEdXJpbmcgTWVhc3VyZW1lbnQgUGVyaW9kIjoKCSJDdW11bGF0aXZlRGF5cyIoIkxvbmcgVGVybSBDYXJlIFBlcmlvZHMgRHVyaW5nIE1lYXN1cmVtZW50IFBlcmlvZCIpCgpkZWZpbmUgZnVuY3Rpb24gIkN1bXVsYXRpdmVEYXlzIihJbnRlcnZhbHMgTGlzdDxJbnRlcnZhbDxEYXRlVGltZT4+ICk6CglTdW0oKGNvbGxhcHNlIEludGVydmFscylDb2xsYXBzZWRJbnRlcnZhbAoJCQlyZXR1cm4gYWxsIGR1cmF0aW9uIGluIGRheXMgb2YgQ29sbGFwc2VkSW50ZXJ2YWwKCSkK"
  } ]
}