{
  "resourceType": "Library",
  "id": "library-EXM161-FHIR3-8.0.0",
  "text": {
    "status": "generated",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">library-EXM161-FHIR3-8.0.0</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"> Logic Library </td></tr><tr><th scope=\"row\"><b>Version: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">8.0.0</td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"2\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-MATGlobalCommonFunctions-FHIR3-4.0.000</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-FHIRHelpers-3.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"8\" scope=\"row\"><b>Data Requirements: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1492</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1010</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1008</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1496</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1141</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1031</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library EXM161_FHIR3 version '8.0.0'\n/*CMS61 Adult MDD*/\n//All measures need a library//\n//Each measure needs to have a library specified//\n\nusing FHIR version '3.0.0'\n//include library MATGlobalCommonFunctions_FHIR version '4.0.000' called Global//\n//includes do not use the term 'library'//\ninclude MATGlobalCommonFunctions_FHIR3 version '4.0.000' called Global\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\n\ncodesystem SNOMEDCT: 'https://snomed.info/sct'\n\nvalueset &quot;Emergency Department Visit&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1010'\nvalueset &quot;Ethnicity&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837'\nvalueset &quot;Major Depressive Disorder-Active&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1491'\nvalueset &quot;Office Visit&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001'\nvalueset &quot;ONC Administrative Sex&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1'\nvalueset &quot;Outpatient Consultation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1008'\nvalueset &quot;Payer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591'\nvalueset &quot;Psych Visit - Diagnostic Evaluation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1492'\nvalueset &quot;Psych Visit - Psychotherapy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1496'\nvalueset &quot;Psychoanalysis&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1141'\nvalueset &quot;Race&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.836'\nvalueset &quot;Telehealth Services&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1031'\n\ncode &quot;Suicide risk assessment (procedure)&quot;: '225337009' from &quot;SNOMEDCT&quot; display 'Suicide risk assessment (procedure)'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt; default Interval[@2019-01-01T00:00:00.0, @2020-01-01T00:00:00.0)\n\ncontext Patient\n\ndefine &quot;Denominator&quot;:\n&quot;Initial Population&quot;\n\ndefine &quot;Initial Population&quot;:\n&quot;New or Recurrent Major Depressive Disorder Encounter&quot; NewOrRecurrentMDDEncounter\n\twhere Global.&quot;CalendarAgeInYearsAt&quot;(FHIRHelpers.ToDate(Patient.birthDate), start of &quot;Measurement Period&quot;)&gt;= 17\n\ndefine &quot;Major Depressive Disorder Encounter&quot;:\n( [&quot;Encounter&quot;: &quot;Psych Visit - Diagnostic Evaluation&quot;]\n\tunion [&quot;Encounter&quot;: &quot;Emergency Department Visit&quot;]\n\tunion [&quot;Encounter&quot;: &quot;Office Visit&quot;]\n\tunion [&quot;Encounter&quot;: &quot;Outpatient Consultation&quot;]\n\tunion [&quot;Encounter&quot;: &quot;Psych Visit - Psychotherapy&quot;]\n\tunion [&quot;Encounter&quot;: &quot;Psychoanalysis&quot;]\n\tunion [&quot;Encounter&quot;: &quot;Telehealth Services&quot;] ) ValidEncounter\n\twhere ValidEncounter.status = 'finished'\n    and Global.EncounterDiagnosis(ValidEncounter).code in &quot;Major Depressive Disorder-Active&quot;\n\ndefine &quot;New or Recurrent Major Depressive Disorder Encounter&quot;:\n&quot;Major Depressive Disorder Encounter&quot; NewOrRecurrentMDDEncounter\n\twithout &quot;Major Depressive Disorder Encounter&quot; PriorMDDEpisodeEncounter\n\t\tsuch that PriorMDDEpisodeEncounter !~ NewOrRecurrentMDDEncounter\n\t\t\tand PriorMDDEpisodeEncounter.period ends 104 days or less before day of start of NewOrRecurrentMDDEncounter.period\n\twhere NewOrRecurrentMDDEncounter.period during &quot;Measurement Period&quot;\n\ndefine &quot;Numerator&quot;:\n  &quot;New or Recurrent Major Depressive Disorder Encounter&quot; NewOrRecurrentMDDEncounter\n  \twith [&quot;Procedure&quot;: &quot;Suicide risk assessment (procedure)&quot;] SuicideRiskAssessment\n\t  \tsuch that SuicideRiskAssessment.performed during NewOrRecurrentMDDEncounter.period\n        and SuicideRiskAssessment.status = 'completed'\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
  },
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "cqf-tooling"
    }
  } ],
  "version": "8.0.0",
  "name": "EXM161_FHIR3",
  "status": "active",
  "experimental": true,
  "type": {
    "coding": [ {
      "system": "http://hl7.org/fhir/codesystem-library-type.html",
      "code": "logic-library"
    } ]
  },
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBFWE0xNjFfRkhJUjMgdmVyc2lvbiAnOC4wLjAnCi8qQ01TNjEgQWR1bHQgTUREKi8KLy9BbGwgbWVhc3VyZXMgbmVlZCBhIGxpYnJhcnkvLwovL0VhY2ggbWVhc3VyZSBuZWVkcyB0byBoYXZlIGEgbGlicmFyeSBzcGVjaWZpZWQvLwoKdXNpbmcgRkhJUiB2ZXJzaW9uICczLjAuMCcKLy9pbmNsdWRlIGxpYnJhcnkgTUFUR2xvYmFsQ29tbW9uRnVuY3Rpb25zX0ZISVIgdmVyc2lvbiAnNC4wLjAwMCcgY2FsbGVkIEdsb2JhbC8vCi8vaW5jbHVkZXMgZG8gbm90IHVzZSB0aGUgdGVybSAnbGlicmFyeScvLwppbmNsdWRlIE1BVEdsb2JhbENvbW1vbkZ1bmN0aW9uc19GSElSMyB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgR2xvYmFsCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnMy4wLjAnIGNhbGxlZCBGSElSSGVscGVycwoKY29kZXN5c3RlbSBTTk9NRURDVDogJ2h0dHBzOi8vc25vbWVkLmluZm8vc2N0JwoKdmFsdWVzZXQgIkVtZXJnZW5jeSBEZXBhcnRtZW50IFZpc2l0IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDEwJwp2YWx1ZXNldCAiRXRobmljaXR5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExNDIyMi40LjExLjgzNycKdmFsdWVzZXQgIk1ham9yIERlcHJlc3NpdmUgRGlzb3JkZXItQWN0aXZlIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjE0OTEnCnZhbHVlc2V0ICJPZmZpY2UgVmlzaXQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwMDEnCnZhbHVlc2V0ICJPTkMgQWRtaW5pc3RyYXRpdmUgU2V4IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMScKdmFsdWVzZXQgIk91dHBhdGllbnQgQ29uc3VsdGF0aW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjEwMS4xMi4xMDA4Jwp2YWx1ZXNldCAiUGF5ZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTE0MjIyLjQuMTEuMzU5MScKdmFsdWVzZXQgIlBzeWNoIFZpc2l0IC0gRGlhZ25vc3RpYyBFdmFsdWF0aW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjE0OTInCnZhbHVlc2V0ICJQc3ljaCBWaXNpdCAtIFBzeWNob3RoZXJhcHkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNTI2LjMuMTQ5NicKdmFsdWVzZXQgIlBzeWNob2FuYWx5c2lzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjExNDEnCnZhbHVlc2V0ICJSYWNlIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExNDIyMi40LjExLjgzNicKdmFsdWVzZXQgIlRlbGVoZWFsdGggU2VydmljZXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTAxLjEyLjEwMzEnCgpjb2RlICJTdWljaWRlIHJpc2sgYXNzZXNzbWVudCAocHJvY2VkdXJlKSI6ICcyMjUzMzcwMDknIGZyb20gIlNOT01FRENUIiBkaXNwbGF5ICdTdWljaWRlIHJpc2sgYXNzZXNzbWVudCAocHJvY2VkdXJlKScKCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBJbnRlcnZhbDxEYXRlVGltZT4gZGVmYXVsdCBJbnRlcnZhbFtAMjAxOS0wMS0wMVQwMDowMDowMC4wLCBAMjAyMC0wMS0wMVQwMDowMDowMC4wKQoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgIkRlbm9taW5hdG9yIjoKIkluaXRpYWwgUG9wdWxhdGlvbiIKCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoKIk5ldyBvciBSZWN1cnJlbnQgTWFqb3IgRGVwcmVzc2l2ZSBEaXNvcmRlciBFbmNvdW50ZXIiIE5ld09yUmVjdXJyZW50TURERW5jb3VudGVyCgl3aGVyZSBHbG9iYWwuIkNhbGVuZGFyQWdlSW5ZZWFyc0F0IihGSElSSGVscGVycy5Ub0RhdGUoUGF0aWVudC5iaXJ0aERhdGUpLCBzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIik+PSAxNwoKZGVmaW5lICJNYWpvciBEZXByZXNzaXZlIERpc29yZGVyIEVuY291bnRlciI6CiggWyJFbmNvdW50ZXIiOiAiUHN5Y2ggVmlzaXQgLSBEaWFnbm9zdGljIEV2YWx1YXRpb24iXQoJdW5pb24gWyJFbmNvdW50ZXIiOiAiRW1lcmdlbmN5IERlcGFydG1lbnQgVmlzaXQiXQoJdW5pb24gWyJFbmNvdW50ZXIiOiAiT2ZmaWNlIFZpc2l0Il0KCXVuaW9uIFsiRW5jb3VudGVyIjogIk91dHBhdGllbnQgQ29uc3VsdGF0aW9uIl0KCXVuaW9uIFsiRW5jb3VudGVyIjogIlBzeWNoIFZpc2l0IC0gUHN5Y2hvdGhlcmFweSJdCgl1bmlvbiBbIkVuY291bnRlciI6ICJQc3ljaG9hbmFseXNpcyJdCgl1bmlvbiBbIkVuY291bnRlciI6ICJUZWxlaGVhbHRoIFNlcnZpY2VzIl0gKSBWYWxpZEVuY291bnRlcgoJd2hlcmUgVmFsaWRFbmNvdW50ZXIuc3RhdHVzID0gJ2ZpbmlzaGVkJwogICAgYW5kIEdsb2JhbC5FbmNvdW50ZXJEaWFnbm9zaXMoVmFsaWRFbmNvdW50ZXIpLmNvZGUgaW4gIk1ham9yIERlcHJlc3NpdmUgRGlzb3JkZXItQWN0aXZlIgoKZGVmaW5lICJOZXcgb3IgUmVjdXJyZW50IE1ham9yIERlcHJlc3NpdmUgRGlzb3JkZXIgRW5jb3VudGVyIjoKIk1ham9yIERlcHJlc3NpdmUgRGlzb3JkZXIgRW5jb3VudGVyIiBOZXdPclJlY3VycmVudE1EREVuY291bnRlcgoJd2l0aG91dCAiTWFqb3IgRGVwcmVzc2l2ZSBEaXNvcmRlciBFbmNvdW50ZXIiIFByaW9yTURERXBpc29kZUVuY291bnRlcgoJCXN1Y2ggdGhhdCBQcmlvck1EREVwaXNvZGVFbmNvdW50ZXIgIX4gTmV3T3JSZWN1cnJlbnRNRERFbmNvdW50ZXIKCQkJYW5kIFByaW9yTURERXBpc29kZUVuY291bnRlci5wZXJpb2QgZW5kcyAxMDQgZGF5cyBvciBsZXNzIGJlZm9yZSBkYXkgb2Ygc3RhcnQgb2YgTmV3T3JSZWN1cnJlbnRNRERFbmNvdW50ZXIucGVyaW9kCgl3aGVyZSBOZXdPclJlY3VycmVudE1EREVuY291bnRlci5wZXJpb2QgZHVyaW5nICJNZWFzdXJlbWVudCBQZXJpb2QiCgpkZWZpbmUgIk51bWVyYXRvciI6CiAgIk5ldyBvciBSZWN1cnJlbnQgTWFqb3IgRGVwcmVzc2l2ZSBEaXNvcmRlciBFbmNvdW50ZXIiIE5ld09yUmVjdXJyZW50TURERW5jb3VudGVyCiAgCXdpdGggWyJQcm9jZWR1cmUiOiAiU3VpY2lkZSByaXNrIGFzc2Vzc21lbnQgKHByb2NlZHVyZSkiXSBTdWljaWRlUmlza0Fzc2Vzc21lbnQKCSAgCXN1Y2ggdGhhdCBTdWljaWRlUmlza0Fzc2Vzc21lbnQucGVyZm9ybWVkIGR1cmluZyBOZXdPclJlY3VycmVudE1EREVuY291bnRlci5wZXJpb2QKICAgICAgICBhbmQgU3VpY2lkZVJpc2tBc3Nlc3NtZW50LnN0YXR1cyA9ICdjb21wbGV0ZWQnCg=="
  } ]
}