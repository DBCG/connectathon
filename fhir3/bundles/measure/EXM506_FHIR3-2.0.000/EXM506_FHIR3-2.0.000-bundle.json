{
  "resourceType": "Bundle",
  "id": "EXM506-FHIR3-2.0.000-bundle",
  "type": "transaction",
  "entry": [ {
    "resource": {
      "resourceType": "Bundle",
      "id": "tests-MedicationRequest-bundle",
      "type": "transaction",
      "entry": [ {
        "resource": {
          "resourceType": "MedicationRequest",
          "id": "numer-EXM506-FHIR3-5",
          "status": "completed",
          "intent": "order",
          "category": {
            "coding": [ {
              "system": "http://hl7.org/fhir/medication-request-category",
              "code": "community",
              "display": "Community"
            } ]
          },
          "medicationCodeableConcept": {
            "coding": [ {
              "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
              "code": "892516",
              "display": "Morphine Sulfate 10 MG Rectal Suppository"
            } ]
          },
          "subject": {
            "reference": "Patient/numer-EXM506-FHIR3"
          },
          "authoredOn": "2019-08-21T00:00:00-07:00"
        },
        "request": {
          "method": "PUT",
          "url": "MedicationRequest/numer-EXM506-FHIR3-5"
        }
      }, {
        "resource": {
          "resourceType": "MedicationRequest",
          "id": "numer-EXM506-FHIR3-7",
          "status": "completed",
          "intent": "order",
          "category": {
            "coding": [ {
              "system": "http://hl7.org/fhir/medication-request-category",
              "code": "community",
              "display": "Community"
            } ]
          },
          "medicationCodeableConcept": {
            "coding": [ {
              "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
              "code": "1010600",
              "display": "Buprenorphine 2 MG / Naloxone 0.5 MG Oral Strip"
            } ]
          },
          "subject": {
            "reference": "Patient/numer-EXM506-FHIR3"
          },
          "authoredOn": "2019-08-21T00:00:00-08:00"
        },
        "request": {
          "method": "PUT",
          "url": "MedicationRequest/numer-EXM506-FHIR3-7"
        }
      }, {
        "resource": {
          "resourceType": "MedicationRequest",
          "id": "numer-EXM506-FHIR3-6",
          "status": "completed",
          "intent": "order",
          "category": {
            "coding": [ {
              "system": "http://hl7.org/fhir/medication-request-category",
              "code": "community",
              "display": "Community"
            } ]
          },
          "medicationCodeableConcept": {
            "coding": [ {
              "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
              "code": "1666777",
              "display": "2 ML Midazolam 1 MG/ML Cartridge"
            } ]
          },
          "subject": {
            "reference": "Patient/numer-EXM506-FHIR3"
          },
          "authoredOn": "2019-12-18T08:14:00-07:00"
        },
        "request": {
          "method": "PUT",
          "url": "MedicationRequest/numer-EXM506-FHIR3-6"
        }
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "tests-MedicationRequest-bundle"
    }
  }, {
    "resource": {
      "resourceType": "Library",
      "id": "library-EXM506-FHIR3-2.0.000",
      "text": {
        "status": "generated",
        "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">library-EXM506-FHIR3-2.0.000</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"> Logic Library </td></tr><tr><th scope=\"row\"><b>Version: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">2.0.000</td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"3\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-MATGlobalCommonFunctions-FHIR3-4.0.000</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-FHIRHelpers-3.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-SupplementalDataElements-FHIR3-1.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"8\" scope=\"row\"><b>Data Requirements: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Condition</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>ProcedureRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>ProcedureRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library EXM506_FHIR3 version '2.0.000'\n\nusing FHIR version '3.0.0'\n\ninclude MATGlobalCommonFunctions_FHIR3 version '4.0.000' called Global\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\ninclude SupplementalDataElements_FHIR3 version '1.0.0' called SDE\n\ncodesystem &quot;Diagnosis Role&quot;: 'http://hl7.org/fhir/diagnosis-role'\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\ncodesystem &quot;SNOMEDCT&quot;: 'http://snomed.org'\ncodesystem &quot;RequestIntent&quot;: 'http://hl7.org/fhir/request-intent'\ncodesystem &quot;MedicationRequestCategory&quot;: 'http://hl7.org/fhir/medication-request-category'\n\nvalueset &quot;All Primary and Secondary Cancer&quot;:  'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161'\nvalueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'\nvalueset &quot;Ethnicity&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837'\nvalueset &quot;Hospice Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20'\nvalueset &quot;ONC Administrative Sex&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1'\nvalueset &quot;Palliative Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162'\nvalueset &quot;Payer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591'\nvalueset &quot;Race&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.836'\nvalueset &quot;Schedule II and Schedule III Opioids&quot;:  'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2'\nvalueset &quot;Schedule IV Benzodiazepines&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1'\n\ncode &quot;Birthdate&quot;: '21112-8' from &quot;LOINC&quot; display 'Birth date'\ncode &quot;Order&quot;: 'order' from &quot;RequestIntent&quot; display 'Order'\ncode &quot;Community&quot;: 'community' from &quot;MedicationRequestCategory&quot; display 'Community'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n    default Interval[@2019-01-01T00:00:00.0, @2020-01-01T00:00:00.0)\n\ncontext Patient\n\ndefine &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot;:\n\t[&quot;Encounter&quot;: &quot;Encounter Inpatient&quot;] EncounterInpatient\n\t\twhere EncounterInpatient.status = 'finished'\n\t\t  and Global.&quot;LengthInDays&quot;(EncounterInpatient.period) &lt;= 120\n\t\t\tand EncounterInpatient.period ends during &quot;Measurement Period&quot;\n      and Global.CalendarAgeInYearsAt(ToDateTime(Patient.birthDate), start of FHIRHelpers.ToInterval(EncounterInpatient.period)) &gt;= 18\n\n// Defines to capture the relevant information that can be reused\ndefine &quot;Opioid Prescription&quot;:\n  [MedicationRequest: medication in &quot;Schedule II and Schedule III Opioids&quot;] OpioidMedicationRequest\n    where OpioidMedicationRequest.status in { 'active', 'completed' }\n      and OpioidMedicationRequest.intent = 'order'\n      and OpioidMedicationRequest.category ~ ToConcept(&quot;Community&quot;)\n\ndefine &quot;Benzodiazepine Prescription&quot;:\n  [MedicationRequest: medication in &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineMedicationRequest\n    where BenzodiazepineMedicationRequest.status in { 'active', 'completed' }\n      and BenzodiazepineMedicationRequest.intent = 'order'\n      and BenzodiazepineMedicationRequest.category ~ ToConcept(&quot;Community&quot;)\n\n// This was originally written as an intersect, but the description indicates either, so it should be a union...\ndefine &quot;Encounter with an Opioid or Benzodiazepine at Discharge&quot;:\n  (\n    &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Opioid Prescription&quot; OpioidPrescription\n        such that OpioidPrescription.authoredOn during InpatientEncounter.period\n    )\n  union (\n    &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Benzodiazepine Prescription&quot; BenzodiazepinePrescription\n        such that BenzodiazepinePrescription.authoredOn during InpatientEncounter.period\n    )\n\n/*\ndefine &quot;Encounter with an Opioid or Benzodiazepine at Discharge&quot;:\n\t(\n\t\t&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\t\twith [MedicationRequest: medication in &quot;Schedule II and Schedule III Opioids&quot;] OpioidsDischarge\n    \tsuch that OpioidsDischarge.authoredOn during InpatientEncounter.period\n    \t\tand OpioidsDischarge.intent = 'order'\n\t)\n  //Measure Review:\n  //The prior implementation was restricting &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot;\n  //to both Opioid AND Benzodiazepine at discharge.\n  //The following implementation restricts it to Opioid OR Benzodiazepine, per the description.\n  //Need validation from the measure developers that this meets the itent of the spec.\n\t\tunion (\n      &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\t    with [MedicationRequest: medication in &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineDischarge\n\t     such that BenzodiazepineDischarge.authoredOn during InpatientEncounter.period\n     \t  and BenzodiazepineDischarge.intent = 'order'\n\t\t )\n*/\n\ndefine &quot;Initial Population&quot;:\n  &quot;Encounter with an Opioid or Benzodiazepine at Discharge&quot;\n\ndefine &quot;Denominator&quot;:\n  &quot;Initial Population&quot;\n\ndefine &quot;Diagnosis of Primary or Secondary Cancer&quot;:\n  [&quot;Condition&quot;: code in &quot;All Primary and Secondary Cancer&quot;] Cancer\n    where Cancer.clinicalStatus = 'active'\n      and Cancer.verificationStatus = 'confirmed'\n\ndefine &quot;Palliative or Hospice Care Order&quot;:\n  ([&quot;ProcedureRequest&quot;: &quot;Palliative Care&quot;]\n    union [&quot;ProcedureRequest&quot;: &quot;Hospice Care&quot;]\n  ) PalliativeOrHospiceCare\n    where PalliativeOrHospiceCare.status in { 'active', 'completed' }\n      and PalliativeOrHospiceCare.intent = 'order'\n\ndefine &quot;Palliative or Hospice Care Procedure&quot;:\n  ([&quot;Procedure&quot;: &quot;Palliative Care&quot;]\n    union [&quot;Procedure&quot;: &quot;Hospice Care&quot;]\n  ) PalliativeOrHospiceCare\n    where PalliativeOrHospiceCare.status = 'completed'\n\ndefine &quot;Denominator Exclusion&quot;:\n  (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n    with &quot;Diagnosis of Primary or Secondary Cancer&quot; Cancer\n      such that Global.&quot;Normalize Onset&quot;(Cancer.onset) overlaps InpatientEncounter.period\n  )\n    union (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Palliative or Hospice Care Order&quot; PalliativeOrHospiceCareOrder\n        such that PalliativeOrHospiceCareOrder.authoredOn during InpatientEncounter.period\n    )\n    union (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Palliative or Hospice Care Procedure&quot; PalliativeOrHospiceCare\n        such that Global.&quot;Normalize Interval&quot;(PalliativeOrHospiceCare.performed) during InpatientEncounter.period\n    )\n\n/*\ndefine &quot;Denominator Exclusions&quot;:\n\t(&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\twith [Condition: code in &quot;All Primary and Secondary Cancer&quot;]Cancer\n       such that Cancer.clinicalStatus = 'active'\n       and Cancer.verificationStatus = 'confirmed'\n       and Cancer.onset overlaps InpatientEncounter.period)\n\t\tunion (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with ([&quot;ProcedureRequest&quot;: &quot;Palliative Care&quot;]\n\t\t\tunion [&quot;ProcedureRequest&quot;: &quot;Hospice Care&quot;] ) PalliativeOrHospiceCareOrder\n\t\t\tsuch that  PalliativeOrHospiceCareOrder.intent = 'order'\n      and PalliativeOrHospiceCareOrder.authoredOn during InpatientEncounter.period)\n    union (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n  with  ([&quot;Procedure&quot;: &quot;Palliative Care&quot;]\n    \tunion [&quot;Procedure&quot;: &quot;Hospice Care&quot;] ) PalliativeOrHospiceCarePerformed\n    \t\t\t\t\tsuch that PalliativeOrHospiceCarePerformed.performed overlaps InpatientEncounter.period)\n*/\n\ndefine &quot;Encounter with a Concurrent Opioid and Benzodiazepine at Discharge&quot;:\n  &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n    with &quot;Opioid Prescription&quot; OpioidPrescription\n      such that OpioidPrescription.authoredOn during InpatientEncounter.period\n    with &quot;Benzodiazepine Prescription&quot; BenzodiazepinePrescription\n      such that BenzodiazepinePrescription.authoredOn during InpatientEncounter.period\n\n/*\ndefine &quot;Encounter with a Concurrent Opioid and Benzodiazepine at Discharge&quot;:\n\tfrom &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter,\n\t\t[MedicationRequest: &quot;Schedule II and Schedule III Opioids&quot;] OpioidsDischarge,\n\t\t[MedicationRequest: &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineDischarge\n\t\t\twhere OpioidsDischarge.authoredOn during InpatientEncounter.period\n\t    \tand OpioidsDischarge.intent = 'order'\n\t\t\t\tand BenzodiazepineDischarge.authoredOn during InpatientEncounter.period\n        and BenzodiazepineDischarge.intent = 'order'\n\t\t\treturn InpatientEncounter\n*/\n\ndefine &quot;Encounter with Two or More Concurrent Opioids at Discharge&quot;:\n  &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n    where Count(\n      &quot;Opioid Prescription&quot; OpioidPrescription\n        where OpioidPrescription.authoredOn during InpatientEncounter.period\n    ) &gt;= 2\n\n/*\ndefine &quot;Encounter with Two or More Concurrent Opioids at Discharge&quot;:\n\t&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\t\twhere Count(\n\t\t\t[MedicationRequest: &quot;Schedule II and Schedule III Opioids&quot;] Opioids\n\t\t\t\twhere Opioids.authoredOn during InpatientEncounter.period\n\t\t) &gt;= 2\n*/\n\ndefine &quot;Numerator&quot;:\n  &quot;Encounter with Two or More Concurrent Opioids at Discharge&quot;\n    union &quot;Encounter with a Concurrent Opioid and Benzodiazepine at Discharge&quot;\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
      },
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
        "valueReference": {
          "reference": "cqf-tooling"
        }
      } ],
      "version": "2.0.000",
      "name": "EXM506_FHIR3",
      "status": "active",
      "experimental": true,
      "type": {
        "coding": [ {
          "system": "http://hl7.org/fhir/codesystem-library-type.html",
          "code": "logic-library"
        } ]
      },
      "content": [ {
        "contentType": "text/cql",
        "data": "bGlicmFyeSBFWE01MDZfRkhJUjMgdmVyc2lvbiAnMi4wLjAwMCcKCnVzaW5nIEZISVIgdmVyc2lvbiAnMy4wLjAnCgppbmNsdWRlIE1BVEdsb2JhbENvbW1vbkZ1bmN0aW9uc19GSElSMyB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgR2xvYmFsCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnMy4wLjAnIGNhbGxlZCBGSElSSGVscGVycwppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50c19GSElSMyB2ZXJzaW9uICcxLjAuMCcgY2FsbGVkIFNERQoKY29kZXN5c3RlbSAiRGlhZ25vc2lzIFJvbGUiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9kaWFnbm9zaXMtcm9sZScKY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycKY29kZXN5c3RlbSAiU05PTUVEQ1QiOiAnaHR0cDovL3Nub21lZC5vcmcnCmNvZGVzeXN0ZW0gIlJlcXVlc3RJbnRlbnQiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9yZXF1ZXN0LWludGVudCcKY29kZXN5c3RlbSAiTWVkaWNhdGlvblJlcXVlc3RDYXRlZ29yeSI6ICdodHRwOi8vaGw3Lm9yZy9maGlyL21lZGljYXRpb24tcmVxdWVzdC1jYXRlZ29yeScKCnZhbHVlc2V0ICJBbGwgUHJpbWFyeSBhbmQgU2Vjb25kYXJ5IENhbmNlciI6ICAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTExLjE2MScKdmFsdWVzZXQgIkVuY291bnRlciBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjY2LjUuMzA3Jwp2YWx1ZXNldCAiRXRobmljaXR5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExNDIyMi40LjExLjgzNycKdmFsdWVzZXQgIkhvc3BpY2UgQ2FyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4zMTU3LjEwMDQuMjAnCnZhbHVlc2V0ICJPTkMgQWRtaW5pc3RyYXRpdmUgU2V4IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMScKdmFsdWVzZXQgIlBhbGxpYXRpdmUgQ2FyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTEuMTYyJwp2YWx1ZXNldCAiUGF5ZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTE0MjIyLjQuMTEuMzU5MScKdmFsdWVzZXQgIlJhY2UiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTE0MjIyLjQuMTEuODM2Jwp2YWx1ZXNldCAiU2NoZWR1bGUgSUkgYW5kIFNjaGVkdWxlIElJSSBPcGlvaWRzIjogICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMjUuMicKdmFsdWVzZXQgIlNjaGVkdWxlIElWIEJlbnpvZGlhemVwaW5lcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMjUuMScKCmNvZGUgIkJpcnRoZGF0ZSI6ICcyMTExMi04JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQmlydGggZGF0ZScKY29kZSAiT3JkZXIiOiAnb3JkZXInIGZyb20gIlJlcXVlc3RJbnRlbnQiIGRpc3BsYXkgJ09yZGVyJwpjb2RlICJDb21tdW5pdHkiOiAnY29tbXVuaXR5JyBmcm9tICJNZWRpY2F0aW9uUmVxdWVzdENhdGVnb3J5IiBkaXNwbGF5ICdDb21tdW5pdHknCgpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+CiAgICBkZWZhdWx0IEludGVydmFsW0AyMDE5LTAxLTAxVDAwOjAwOjAwLjAsIEAyMDIwLTAxLTAxVDAwOjAwOjAwLjApCgpjb250ZXh0IFBhdGllbnQKCmRlZmluZSAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiOgoJWyJFbmNvdW50ZXIiOiAiRW5jb3VudGVyIElucGF0aWVudCJdIEVuY291bnRlcklucGF0aWVudAoJCXdoZXJlIEVuY291bnRlcklucGF0aWVudC5zdGF0dXMgPSAnZmluaXNoZWQnCgkJICBhbmQgR2xvYmFsLiJMZW5ndGhJbkRheXMiKEVuY291bnRlcklucGF0aWVudC5wZXJpb2QpIDw9IDEyMAoJCQlhbmQgRW5jb3VudGVySW5wYXRpZW50LnBlcmlvZCBlbmRzIGR1cmluZyAiTWVhc3VyZW1lbnQgUGVyaW9kIgogICAgICBhbmQgR2xvYmFsLkNhbGVuZGFyQWdlSW5ZZWFyc0F0KFRvRGF0ZVRpbWUoUGF0aWVudC5iaXJ0aERhdGUpLCBzdGFydCBvZiBGSElSSGVscGVycy5Ub0ludGVydmFsKEVuY291bnRlcklucGF0aWVudC5wZXJpb2QpKSA+PSAxOAoKLy8gRGVmaW5lcyB0byBjYXB0dXJlIHRoZSByZWxldmFudCBpbmZvcm1hdGlvbiB0aGF0IGNhbiBiZSByZXVzZWQKZGVmaW5lICJPcGlvaWQgUHJlc2NyaXB0aW9uIjoKICBbTWVkaWNhdGlvblJlcXVlc3Q6IG1lZGljYXRpb24gaW4gIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyJdIE9waW9pZE1lZGljYXRpb25SZXF1ZXN0CiAgICB3aGVyZSBPcGlvaWRNZWRpY2F0aW9uUmVxdWVzdC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQogICAgICBhbmQgT3Bpb2lkTWVkaWNhdGlvblJlcXVlc3QuaW50ZW50ID0gJ29yZGVyJwogICAgICBhbmQgT3Bpb2lkTWVkaWNhdGlvblJlcXVlc3QuY2F0ZWdvcnkgfiBUb0NvbmNlcHQoIkNvbW11bml0eSIpCgpkZWZpbmUgIkJlbnpvZGlhemVwaW5lIFByZXNjcmlwdGlvbiI6CiAgW01lZGljYXRpb25SZXF1ZXN0OiBtZWRpY2F0aW9uIGluICJTY2hlZHVsZSBJViBCZW56b2RpYXplcGluZXMiXSBCZW56b2RpYXplcGluZU1lZGljYXRpb25SZXF1ZXN0CiAgICB3aGVyZSBCZW56b2RpYXplcGluZU1lZGljYXRpb25SZXF1ZXN0LnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9CiAgICAgIGFuZCBCZW56b2RpYXplcGluZU1lZGljYXRpb25SZXF1ZXN0LmludGVudCA9ICdvcmRlcicKICAgICAgYW5kIEJlbnpvZGlhemVwaW5lTWVkaWNhdGlvblJlcXVlc3QuY2F0ZWdvcnkgfiBUb0NvbmNlcHQoIkNvbW11bml0eSIpCgovLyBUaGlzIHdhcyBvcmlnaW5hbGx5IHdyaXR0ZW4gYXMgYW4gaW50ZXJzZWN0LCBidXQgdGhlIGRlc2NyaXB0aW9uIGluZGljYXRlcyBlaXRoZXIsIHNvIGl0IHNob3VsZCBiZSBhIHVuaW9uLi4uCmRlZmluZSAiRW5jb3VudGVyIHdpdGggYW4gT3Bpb2lkIG9yIEJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSI6CiAgKAogICAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICAgICAgd2l0aCAiT3Bpb2lkIFByZXNjcmlwdGlvbiIgT3Bpb2lkUHJlc2NyaXB0aW9uCiAgICAgICAgc3VjaCB0aGF0IE9waW9pZFByZXNjcmlwdGlvbi5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgICApCiAgdW5pb24gKAogICAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICAgICAgd2l0aCAiQmVuem9kaWF6ZXBpbmUgUHJlc2NyaXB0aW9uIiBCZW56b2RpYXplcGluZVByZXNjcmlwdGlvbgogICAgICAgIHN1Y2ggdGhhdCBCZW56b2RpYXplcGluZVByZXNjcmlwdGlvbi5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgICApCgovKgpkZWZpbmUgIkVuY291bnRlciB3aXRoIGFuIE9waW9pZCBvciBCZW56b2RpYXplcGluZSBhdCBEaXNjaGFyZ2UiOgoJKAoJCSJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCgkJd2l0aCBbTWVkaWNhdGlvblJlcXVlc3Q6IG1lZGljYXRpb24gaW4gIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyJdIE9waW9pZHNEaXNjaGFyZ2UKICAgIAlzdWNoIHRoYXQgT3Bpb2lkc0Rpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgICAJCWFuZCBPcGlvaWRzRGlzY2hhcmdlLmludGVudCA9ICdvcmRlcicKCSkKICAvL01lYXN1cmUgUmV2aWV3OgogIC8vVGhlIHByaW9yIGltcGxlbWVudGF0aW9uIHdhcyByZXN0cmljdGluZyAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiCiAgLy90byBib3RoIE9waW9pZCBBTkQgQmVuem9kaWF6ZXBpbmUgYXQgZGlzY2hhcmdlLgogIC8vVGhlIGZvbGxvd2luZyBpbXBsZW1lbnRhdGlvbiByZXN0cmljdHMgaXQgdG8gT3Bpb2lkIE9SIEJlbnpvZGlhemVwaW5lLCBwZXIgdGhlIGRlc2NyaXB0aW9uLgogIC8vTmVlZCB2YWxpZGF0aW9uIGZyb20gdGhlIG1lYXN1cmUgZGV2ZWxvcGVycyB0aGF0IHRoaXMgbWVldHMgdGhlIGl0ZW50IG9mIHRoZSBzcGVjLgoJCXVuaW9uICgKICAgICAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKCSAgICB3aXRoIFtNZWRpY2F0aW9uUmVxdWVzdDogbWVkaWNhdGlvbiBpbiAiU2NoZWR1bGUgSVYgQmVuem9kaWF6ZXBpbmVzIl0gQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UKCSAgICAgc3VjaCB0aGF0IEJlbnpvZGlhemVwaW5lRGlzY2hhcmdlLmF1dGhvcmVkT24gZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QKICAgICAJICBhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuaW50ZW50ID0gJ29yZGVyJwoJCSApCiovCgpkZWZpbmUgIkluaXRpYWwgUG9wdWxhdGlvbiI6CiAgIkVuY291bnRlciB3aXRoIGFuIE9waW9pZCBvciBCZW56b2RpYXplcGluZSBhdCBEaXNjaGFyZ2UiCgpkZWZpbmUgIkRlbm9taW5hdG9yIjoKICAiSW5pdGlhbCBQb3B1bGF0aW9uIgoKZGVmaW5lICJEaWFnbm9zaXMgb2YgUHJpbWFyeSBvciBTZWNvbmRhcnkgQ2FuY2VyIjoKICBbIkNvbmRpdGlvbiI6IGNvZGUgaW4gIkFsbCBQcmltYXJ5IGFuZCBTZWNvbmRhcnkgQ2FuY2VyIl0gQ2FuY2VyCiAgICB3aGVyZSBDYW5jZXIuY2xpbmljYWxTdGF0dXMgPSAnYWN0aXZlJwogICAgICBhbmQgQ2FuY2VyLnZlcmlmaWNhdGlvblN0YXR1cyA9ICdjb25maXJtZWQnCgpkZWZpbmUgIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIE9yZGVyIjoKICAoWyJQcm9jZWR1cmVSZXF1ZXN0IjogIlBhbGxpYXRpdmUgQ2FyZSJdCiAgICB1bmlvbiBbIlByb2NlZHVyZVJlcXVlc3QiOiAiSG9zcGljZSBDYXJlIl0KICApIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlCiAgICB3aGVyZSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZS5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQogICAgICBhbmQgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmUuaW50ZW50ID0gJ29yZGVyJwoKZGVmaW5lICJQYWxsaWF0aXZlIG9yIEhvc3BpY2UgQ2FyZSBQcm9jZWR1cmUiOgogIChbIlByb2NlZHVyZSI6ICJQYWxsaWF0aXZlIENhcmUiXQogICAgdW5pb24gWyJQcm9jZWR1cmUiOiAiSG9zcGljZSBDYXJlIl0KICApIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlCiAgICB3aGVyZSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZS5zdGF0dXMgPSAnY29tcGxldGVkJwoKZGVmaW5lICJEZW5vbWluYXRvciBFeGNsdXNpb24iOgogICgiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiIElucGF0aWVudEVuY291bnRlcgogICAgd2l0aCAiRGlhZ25vc2lzIG9mIFByaW1hcnkgb3IgU2Vjb25kYXJ5IENhbmNlciIgQ2FuY2VyCiAgICAgIHN1Y2ggdGhhdCBHbG9iYWwuIk5vcm1hbGl6ZSBPbnNldCIoQ2FuY2VyLm9uc2V0KSBvdmVybGFwcyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgKQogICAgdW5pb24gKCJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCiAgICAgIHdpdGggIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIE9yZGVyIiBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZU9yZGVyCiAgICAgICAgc3VjaCB0aGF0IFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlT3JkZXIuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAogICAgKQogICAgdW5pb24gKCJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCiAgICAgIHdpdGggIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIFByb2NlZHVyZSIgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmUKICAgICAgICBzdWNoIHRoYXQgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlLnBlcmZvcm1lZCkgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QKICAgICkKCi8qCmRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9ucyI6CgkoIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKCXdpdGggW0NvbmRpdGlvbjogY29kZSBpbiAiQWxsIFByaW1hcnkgYW5kIFNlY29uZGFyeSBDYW5jZXIiXUNhbmNlcgogICAgICAgc3VjaCB0aGF0IENhbmNlci5jbGluaWNhbFN0YXR1cyA9ICdhY3RpdmUnCiAgICAgICBhbmQgQ2FuY2VyLnZlcmlmaWNhdGlvblN0YXR1cyA9ICdjb25maXJtZWQnCiAgICAgICBhbmQgQ2FuY2VyLm9uc2V0IG92ZXJsYXBzIElucGF0aWVudEVuY291bnRlci5wZXJpb2QpCgkJdW5pb24gKCJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCiAgICAgIHdpdGggKFsiUHJvY2VkdXJlUmVxdWVzdCI6ICJQYWxsaWF0aXZlIENhcmUiXQoJCQl1bmlvbiBbIlByb2NlZHVyZVJlcXVlc3QiOiAiSG9zcGljZSBDYXJlIl0gKSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZU9yZGVyCgkJCXN1Y2ggdGhhdCAgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVPcmRlci5pbnRlbnQgPSAnb3JkZXInCiAgICAgIGFuZCBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZU9yZGVyLmF1dGhvcmVkT24gZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QpCiAgICB1bmlvbiAoIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICB3aXRoICAoWyJQcm9jZWR1cmUiOiAiUGFsbGlhdGl2ZSBDYXJlIl0KICAgIAl1bmlvbiBbIlByb2NlZHVyZSI6ICJIb3NwaWNlIENhcmUiXSApIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlUGVyZm9ybWVkCiAgICAJCQkJCXN1Y2ggdGhhdCBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZVBlcmZvcm1lZC5wZXJmb3JtZWQgb3ZlcmxhcHMgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZCkKKi8KCmRlZmluZSAiRW5jb3VudGVyIHdpdGggYSBDb25jdXJyZW50IE9waW9pZCBhbmQgQmVuem9kaWF6ZXBpbmUgYXQgRGlzY2hhcmdlIjoKICAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiIElucGF0aWVudEVuY291bnRlcgogICAgd2l0aCAiT3Bpb2lkIFByZXNjcmlwdGlvbiIgT3Bpb2lkUHJlc2NyaXB0aW9uCiAgICAgIHN1Y2ggdGhhdCBPcGlvaWRQcmVzY3JpcHRpb24uYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAogICAgd2l0aCAiQmVuem9kaWF6ZXBpbmUgUHJlc2NyaXB0aW9uIiBCZW56b2RpYXplcGluZVByZXNjcmlwdGlvbgogICAgICBzdWNoIHRoYXQgQmVuem9kaWF6ZXBpbmVQcmVzY3JpcHRpb24uYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAoKLyoKZGVmaW5lICJFbmNvdW50ZXIgd2l0aCBhIENvbmN1cnJlbnQgT3Bpb2lkIGFuZCBCZW56b2RpYXplcGluZSBhdCBEaXNjaGFyZ2UiOgoJZnJvbSAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiIElucGF0aWVudEVuY291bnRlciwKCQlbTWVkaWNhdGlvblJlcXVlc3Q6ICJTY2hlZHVsZSBJSSBhbmQgU2NoZWR1bGUgSUlJIE9waW9pZHMiXSBPcGlvaWRzRGlzY2hhcmdlLAoJCVtNZWRpY2F0aW9uUmVxdWVzdDogIlNjaGVkdWxlIElWIEJlbnpvZGlhemVwaW5lcyJdIEJlbnpvZGlhemVwaW5lRGlzY2hhcmdlCgkJCXdoZXJlIE9waW9pZHNEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAoJICAgIAlhbmQgT3Bpb2lkc0Rpc2NoYXJnZS5pbnRlbnQgPSAnb3JkZXInCgkJCQlhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAogICAgICAgIGFuZCBCZW56b2RpYXplcGluZURpc2NoYXJnZS5pbnRlbnQgPSAnb3JkZXInCgkJCXJldHVybiBJbnBhdGllbnRFbmNvdW50ZXIKKi8KCmRlZmluZSAiRW5jb3VudGVyIHdpdGggVHdvIG9yIE1vcmUgQ29uY3VycmVudCBPcGlvaWRzIGF0IERpc2NoYXJnZSI6CiAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICAgIHdoZXJlIENvdW50KAogICAgICAiT3Bpb2lkIFByZXNjcmlwdGlvbiIgT3Bpb2lkUHJlc2NyaXB0aW9uCiAgICAgICAgd2hlcmUgT3Bpb2lkUHJlc2NyaXB0aW9uLmF1dGhvcmVkT24gZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QKICAgICkgPj0gMgoKLyoKZGVmaW5lICJFbmNvdW50ZXIgd2l0aCBUd28gb3IgTW9yZSBDb25jdXJyZW50IE9waW9pZHMgYXQgRGlzY2hhcmdlIjoKCSJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCgkJd2hlcmUgQ291bnQoCgkJCVtNZWRpY2F0aW9uUmVxdWVzdDogIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyJdIE9waW9pZHMKCQkJCXdoZXJlIE9waW9pZHMuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAoJCSkgPj0gMgoqLwoKZGVmaW5lICJOdW1lcmF0b3IiOgogICJFbmNvdW50ZXIgd2l0aCBUd28gb3IgTW9yZSBDb25jdXJyZW50IE9waW9pZHMgYXQgRGlzY2hhcmdlIgogICAgdW5pb24gIkVuY291bnRlciB3aXRoIGEgQ29uY3VycmVudCBPcGlvaWQgYW5kIEJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSIK"
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "Library/library-EXM506-FHIR3-2.0.000"
    }
  }, {
    "resource": {
      "resourceType": "MeasureReport",
      "id": "measurereport-denom-EXM506-FHIR3",
      "contained": [ {
        "resourceType": "Bundle",
        "id": "d3c58181-2827-492f-8768-967d2faa6b6a",
        "type": "collection",
        "entry": [ {
          "fullUrl": "74f41273-919f-46c2-87d3-afcfbfc7f167",
          "resource": {
            "resourceType": "List",
            "id": "74f41273-919f-46c2-87d3-afcfbfc7f167",
            "title": "denominator",
            "entry": [ {
              "item": {
                "reference": "denom-EXM506-FHIR3-2"
              }
            }, {
              "item": {
                "reference": "denom-EXM506-FHIR3-6"
              }
            }, {
              "item": {
                "reference": "denom-EXM506-FHIR3"
              }
            } ]
          }
        }, {
          "fullUrl": "Encounter/denom-EXM506-FHIR3-2",
          "resource": {
            "resourceType": "Encounter",
            "id": "denom-EXM506-FHIR3-2",
            "meta": {
              "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter" ]
            },
            "status": "finished",
            "class": {
              "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
              "code": "IMP",
              "display": "inpatient encounter"
            },
            "type": [ {
              "coding": [ {
                "system": "http://snomed.info/sct",
                "code": "32485007",
                "display": "Hospital admission (procedure)"
              } ]
            } ],
            "subject": {
              "reference": "Patient/denom-EXM506-FHIR3"
            },
            "period": {
              "start": "2019-08-21T00:00:00-06:00",
              "end": "2019-12-18T08:15:00-07:00"
            },
            "diagnosis": [ {
              "condition": {
                "reference": "Condition/denom-EXM506-FHIR3-1"
              },
              "role": {
                "coding": [ {
                  "system": "http://hl7.org/fhir/diagnosis-role",
                  "code": "billing",
                  "display": "Billing"
                } ]
              },
              "rank": 1
            } ],
            "hospitalization": {
              "dischargeDisposition": {
                "coding": [ {
                  "system": "http://snomed.info/sct",
                  "code": "306701001",
                  "display": "Discharge to community hospital (procedure)"
                } ]
              }
            }
          }
        }, {
          "fullUrl": "c500bf0b-9d26-47ba-acad-0a4e93a830b9",
          "resource": {
            "resourceType": "List",
            "id": "c500bf0b-9d26-47ba-acad-0a4e93a830b9",
            "title": "initial-population",
            "entry": [ {
              "item": {
                "reference": "denom-EXM506-FHIR3-2"
              }
            }, {
              "item": {
                "reference": "denom-EXM506-FHIR3-6"
              }
            }, {
              "item": {
                "reference": "denom-EXM506-FHIR3"
              }
            } ]
          }
        }, {
          "fullUrl": "MedicationRequest/denom-EXM506-FHIR3-6",
          "resource": {
            "resourceType": "MedicationRequest",
            "id": "denom-EXM506-FHIR3-6",
            "meta": { },
            "status": "completed",
            "intent": "order",
            "category": {
              "coding": [ {
                "system": "http://hl7.org/fhir/medication-request-category",
                "code": "community",
                "display": "Community"
              } ]
            },
            "medicationCodeableConcept": {
              "coding": [ {
                "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
                "code": "1665326",
                "display": "1 ML Lorazepam 4 MG/ML Injection"
              } ]
            },
            "subject": {
              "reference": "Patient/denom-EXM506-FHIR3"
            },
            "authoredOn": "2019-12-17T08:14:00-07:00"
          }
        }, {
          "fullUrl": "3050f9f3-b0dd-4f34-9051-762538e455f1",
          "resource": {
            "resourceType": "List",
            "id": "3050f9f3-b0dd-4f34-9051-762538e455f1",
            "title": "numerator",
            "entry": [ {
              "item": {
                "reference": "denom-EXM506-FHIR3-2"
              }
            }, {
              "item": {
                "reference": "denom-EXM506-FHIR3"
              }
            } ]
          }
        }, {
          "fullUrl": "Patient/denom-EXM506-FHIR3",
          "resource": {
            "resourceType": "Patient",
            "id": "denom-EXM506-FHIR3",
            "meta": {
              "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient" ]
            },
            "extension": [ {
              "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-race",
              "extension": [ {
                "url": "ombCategory",
                "valueCoding": {
                  "system": "urn:oid:2.16.840.1.113883.6.238",
                  "code": "2054-5",
                  "display": "Black or African American"
                }
              } ]
            }, {
              "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity",
              "extension": [ {
                "url": "ombCategory",
                "valueCoding": {
                  "system": "urn:oid:2.16.840.1.113883.6.238",
                  "code": "2135-2",
                  "display": "Hispanic or Latino"
                }
              } ]
            } ],
            "identifier": [ {
              "use": "usual",
              "type": {
                "coding": [ {
                  "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                  "code": "MR",
                  "display": "Medical Record Number"
                } ]
              },
              "system": "http://hospital.smarthealthit.org",
              "value": "9999999910"
            } ],
            "name": [ {
              "family": "Jones",
              "given": [ "Rick" ]
            } ],
            "gender": "male",
            "birthDate": "1955-11-05"
          }
        } ]
      } ],
      "status": "complete",
      "type": "individual",
      "measure": {
        "reference": "Measure/measure-EXM506-FHIR3-2.0.000"
      },
      "patient": {
        "reference": "Patient/denom-EXM506-FHIR3"
      },
      "period": {
        "start": "2018-12-31T17:00:00-07:00",
        "end": "2019-12-30T17:00:00-07:00"
      },
      "group": [ {
        "identifier": {
          "value": "group-1"
        },
        "population": [ {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "initial-population",
              "display": "Initial Population"
            } ]
          },
          "count": 1
        }, {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "numerator",
              "display": "Numerator"
            } ]
          },
          "count": 0
        }, {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "denominator",
              "display": "Denominator"
            } ]
          },
          "count": 1
        }, {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "denominator-exclusion",
              "display": "Denominator Exclusion"
            } ]
          },
          "count": 0
        } ],
        "measureScore": 0.0
      } ],
      "evaluatedResources": {
        "reference": "#d3c58181-2827-492f-8768-967d2faa6b6a"
      }
    },
    "request": {
      "method": "PUT",
      "url": "MeasureReport/measurereport-denom-EXM506-FHIR3"
    }
  }, {
    "resource": {
      "resourceType": "Patient",
      "id": "denom-EXM506-FHIR3",
      "meta": {
        "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient" ]
      },
      "extension": [ {
        "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-race",
        "extension": [ {
          "url": "ombCategory",
          "valueCoding": {
            "system": "urn:oid:2.16.840.1.113883.6.238",
            "code": "2054-5",
            "display": "Black or African American"
          }
        } ]
      }, {
        "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity",
        "extension": [ {
          "url": "ombCategory",
          "valueCoding": {
            "system": "urn:oid:2.16.840.1.113883.6.238",
            "code": "2135-2",
            "display": "Hispanic or Latino"
          }
        } ]
      } ],
      "identifier": [ {
        "use": "usual",
        "type": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
            "code": "MR",
            "display": "Medical Record Number"
          } ]
        },
        "system": "http://hospital.smarthealthit.org",
        "value": "9999999910"
      } ],
      "name": [ {
        "family": "Jones",
        "given": [ "Rick" ]
      } ],
      "gender": "male",
      "birthDate": "1955-11-05"
    },
    "request": {
      "method": "PUT",
      "url": "Patient/denom-EXM506-FHIR3"
    }
  }, {
    "resource": {
      "resourceType": "Bundle",
      "id": "tests-Encounter-bundle",
      "type": "transaction",
      "entry": [ {
        "resource": {
          "resourceType": "Encounter",
          "id": "numer-EXM506-FHIR3-2",
          "meta": {
            "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter" ]
          },
          "status": "finished",
          "class": {
            "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
            "code": "IMP",
            "display": "inpatient encounter"
          },
          "type": [ {
            "coding": [ {
              "system": "http://snomed.info/sct",
              "code": "32485007",
              "display": "Hospital admission (procedure)"
            } ]
          } ],
          "subject": {
            "reference": "Patient/numer-EXM506-FHIR3"
          },
          "period": {
            "start": "2019-08-21T00:00:00-06:00",
            "end": "2019-12-18T08:15:00-07:00"
          },
          "diagnosis": [ {
            "condition": {
              "reference": "Condition/numer-EXM506-FHIR3-1"
            },
            "role": {
              "coding": [ {
                "system": "http://hl7.org/fhir/diagnosis-role",
                "code": "billing",
                "display": "Billing"
              } ]
            },
            "rank": 1
          } ],
          "hospitalization": {
            "dischargeDisposition": {
              "coding": [ {
                "system": "http://snomed.info/sct",
                "code": "306701001",
                "display": "Discharge to community hospital (procedure)"
              } ]
            }
          }
        },
        "request": {
          "method": "PUT",
          "url": "Encounter/numer-EXM506-FHIR3-2"
        }
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "tests-Encounter-bundle"
    }
  }, {
    "resource": {
      "resourceType": "Patient",
      "id": "numer-EXM506-FHIR3",
      "meta": {
        "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient" ]
      },
      "extension": [ {
        "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-race",
        "extension": [ {
          "url": "ombCategory",
          "valueCoding": {
            "system": "urn:oid:2.16.840.1.113883.6.238",
            "code": "2106-3",
            "display": "White"
          }
        } ]
      }, {
        "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity",
        "extension": [ {
          "url": "ombCategory",
          "valueCoding": {
            "system": "urn:oid:2.16.840.1.113883.6.238",
            "code": "2186-5",
            "display": "Not Hispanic or Latino"
          }
        } ]
      } ],
      "identifier": [ {
        "use": "usual",
        "type": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
            "code": "MR",
            "display": "Medical Record Number"
          } ]
        },
        "system": "http://hospital.smarthealthit.org",
        "value": "9999999911"
      } ],
      "name": [ {
        "family": "Jones",
        "given": [ "Louise" ]
      } ],
      "gender": "female",
      "birthDate": "1971-11-21"
    },
    "request": {
      "method": "PUT",
      "url": "Patient/numer-EXM506-FHIR3"
    }
  }, {
    "resource": {
      "resourceType": "MedicationRequest",
      "id": "numer-EXM506-FHIR3-7",
      "status": "completed",
      "intent": "order",
      "category": {
        "coding": [ {
          "system": "http://hl7.org/fhir/medication-request-category",
          "code": "community",
          "display": "Community"
        } ]
      },
      "medicationCodeableConcept": {
        "coding": [ {
          "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
          "code": "1010600",
          "display": "Buprenorphine 2 MG / Naloxone 0.5 MG Oral Strip"
        } ]
      },
      "subject": {
        "reference": "Patient/numer-EXM506-FHIR3"
      },
      "authoredOn": "2019-08-21T00:00:00-08:00"
    },
    "request": {
      "method": "PUT",
      "url": "MedicationRequest/numer-EXM506-FHIR3-7"
    }
  }, {
    "resource": {
      "resourceType": "MedicationRequest",
      "id": "numer-EXM506-FHIR3-6",
      "status": "completed",
      "intent": "order",
      "category": {
        "coding": [ {
          "system": "http://hl7.org/fhir/medication-request-category",
          "code": "community",
          "display": "Community"
        } ]
      },
      "medicationCodeableConcept": {
        "coding": [ {
          "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
          "code": "1666777",
          "display": "2 ML Midazolam 1 MG/ML Cartridge"
        } ]
      },
      "subject": {
        "reference": "Patient/numer-EXM506-FHIR3"
      },
      "authoredOn": "2019-12-18T08:14:00-07:00"
    },
    "request": {
      "method": "PUT",
      "url": "MedicationRequest/numer-EXM506-FHIR3-6"
    }
  }, {
    "resource": {
      "resourceType": "MeasureReport",
      "id": "measurereport-numer-EXM506-FHIR3",
      "contained": [ {
        "resourceType": "Bundle",
        "id": "4bc15806-5411-4411-9fd0-cb9a9058525b",
        "type": "collection",
        "entry": [ {
          "fullUrl": "Encounter/numer-EXM506-FHIR3-2",
          "resource": {
            "resourceType": "Encounter",
            "id": "numer-EXM506-FHIR3-2",
            "meta": {
              "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter" ]
            },
            "status": "finished",
            "class": {
              "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
              "code": "IMP",
              "display": "inpatient encounter"
            },
            "type": [ {
              "coding": [ {
                "system": "http://snomed.info/sct",
                "code": "32485007",
                "display": "Hospital admission (procedure)"
              } ]
            } ],
            "subject": {
              "reference": "Patient/numer-EXM506-FHIR3"
            },
            "period": {
              "start": "2019-08-21T00:00:00-06:00",
              "end": "2019-12-18T08:15:00-07:00"
            },
            "diagnosis": [ {
              "condition": {
                "reference": "Condition/numer-EXM506-FHIR3-1"
              },
              "role": {
                "coding": [ {
                  "system": "http://hl7.org/fhir/diagnosis-role",
                  "code": "billing",
                  "display": "Billing"
                } ]
              },
              "rank": 1
            } ],
            "hospitalization": {
              "dischargeDisposition": {
                "coding": [ {
                  "system": "http://snomed.info/sct",
                  "code": "306701001",
                  "display": "Discharge to community hospital (procedure)"
                } ]
              }
            }
          }
        }, {
          "fullUrl": "MedicationRequest/numer-EXM506-FHIR3-5",
          "resource": {
            "resourceType": "MedicationRequest",
            "id": "numer-EXM506-FHIR3-5",
            "meta": { },
            "status": "completed",
            "intent": "order",
            "category": {
              "coding": [ {
                "system": "http://hl7.org/fhir/medication-request-category",
                "code": "community",
                "display": "Community"
              } ]
            },
            "medicationCodeableConcept": {
              "coding": [ {
                "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
                "code": "892516",
                "display": "Morphine Sulfate 10 MG Rectal Suppository"
              } ]
            },
            "subject": {
              "reference": "Patient/numer-EXM506-FHIR3"
            },
            "authoredOn": "2019-08-21T00:00:00-07:00"
          }
        }, {
          "fullUrl": "MedicationRequest/numer-EXM506-FHIR3-6",
          "resource": {
            "resourceType": "MedicationRequest",
            "id": "numer-EXM506-FHIR3-6",
            "meta": { },
            "status": "completed",
            "intent": "order",
            "category": {
              "coding": [ {
                "system": "http://hl7.org/fhir/medication-request-category",
                "code": "community",
                "display": "Community"
              } ]
            },
            "medicationCodeableConcept": {
              "coding": [ {
                "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
                "code": "1666777",
                "display": "2 ML Midazolam 1 MG/ML Cartridge"
              } ]
            },
            "subject": {
              "reference": "Patient/numer-EXM506-FHIR3"
            },
            "authoredOn": "2019-12-18T08:14:00-07:00"
          }
        }, {
          "fullUrl": "MedicationRequest/numer-EXM506-FHIR3-7",
          "resource": {
            "resourceType": "MedicationRequest",
            "id": "numer-EXM506-FHIR3-7",
            "meta": { },
            "status": "completed",
            "intent": "order",
            "category": {
              "coding": [ {
                "system": "http://hl7.org/fhir/medication-request-category",
                "code": "community",
                "display": "Community"
              } ]
            },
            "medicationCodeableConcept": {
              "coding": [ {
                "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
                "code": "1010600",
                "display": "Buprenorphine 2 MG / Naloxone 0.5 MG Oral Strip"
              } ]
            },
            "subject": {
              "reference": "Patient/numer-EXM506-FHIR3"
            },
            "authoredOn": "2019-08-21T00:00:00-08:00"
          }
        }, {
          "fullUrl": "Patient/numer-EXM506-FHIR3",
          "resource": {
            "resourceType": "Patient",
            "id": "numer-EXM506-FHIR3",
            "meta": {
              "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient" ]
            },
            "extension": [ {
              "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-race",
              "extension": [ {
                "url": "ombCategory",
                "valueCoding": {
                  "system": "urn:oid:2.16.840.1.113883.6.238",
                  "code": "2106-3",
                  "display": "White"
                }
              } ]
            }, {
              "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity",
              "extension": [ {
                "url": "ombCategory",
                "valueCoding": {
                  "system": "urn:oid:2.16.840.1.113883.6.238",
                  "code": "2186-5",
                  "display": "Not Hispanic or Latino"
                }
              } ]
            } ],
            "identifier": [ {
              "use": "usual",
              "type": {
                "coding": [ {
                  "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                  "code": "MR",
                  "display": "Medical Record Number"
                } ]
              },
              "system": "http://hospital.smarthealthit.org",
              "value": "9999999911"
            } ],
            "name": [ {
              "family": "Jones",
              "given": [ "Louise" ]
            } ],
            "gender": "female",
            "birthDate": "1971-11-21"
          }
        }, {
          "fullUrl": "eec847b4-7402-48ef-8152-13ca4556adc7",
          "resource": {
            "resourceType": "List",
            "id": "eec847b4-7402-48ef-8152-13ca4556adc7",
            "title": "denominator",
            "entry": [ {
              "item": {
                "reference": "numer-EXM506-FHIR3-2"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-5"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-6"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-7"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3"
              }
            } ]
          }
        }, {
          "fullUrl": "d1779ff8-486b-4561-ad0e-e4000c1b67bd",
          "resource": {
            "resourceType": "List",
            "id": "d1779ff8-486b-4561-ad0e-e4000c1b67bd",
            "title": "numerator",
            "entry": [ {
              "item": {
                "reference": "numer-EXM506-FHIR3-2"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-5"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-6"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-7"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3"
              }
            } ]
          }
        }, {
          "fullUrl": "16c9614b-b369-4bba-bd27-45587b7ba1f5",
          "resource": {
            "resourceType": "List",
            "id": "16c9614b-b369-4bba-bd27-45587b7ba1f5",
            "title": "initial-population",
            "entry": [ {
              "item": {
                "reference": "numer-EXM506-FHIR3-2"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-5"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-6"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3-7"
              }
            }, {
              "item": {
                "reference": "numer-EXM506-FHIR3"
              }
            } ]
          }
        } ]
      } ],
      "status": "complete",
      "type": "individual",
      "measure": {
        "reference": "Measure/measure-EXM506-FHIR3-2.0.000"
      },
      "patient": {
        "reference": "Patient/numer-EXM506-FHIR3"
      },
      "period": {
        "start": "2018-12-31T17:00:00-07:00",
        "end": "2019-12-30T17:00:00-07:00"
      },
      "group": [ {
        "identifier": {
          "value": "group-1"
        },
        "population": [ {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "initial-population",
              "display": "Initial Population"
            } ]
          },
          "count": 1
        }, {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "numerator",
              "display": "Numerator"
            } ]
          },
          "count": 1
        }, {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "denominator",
              "display": "Denominator"
            } ]
          },
          "count": 1
        }, {
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "denominator-exclusion",
              "display": "Denominator Exclusion"
            } ]
          },
          "count": 0
        } ],
        "measureScore": 1.0
      } ],
      "evaluatedResources": {
        "reference": "#4bc15806-5411-4411-9fd0-cb9a9058525b"
      }
    },
    "request": {
      "method": "PUT",
      "url": "MeasureReport/measurereport-numer-EXM506-FHIR3"
    }
  }, {
    "resource": {
      "resourceType": "MedicationRequest",
      "id": "numer-EXM506-FHIR3-5",
      "status": "completed",
      "intent": "order",
      "category": {
        "coding": [ {
          "system": "http://hl7.org/fhir/medication-request-category",
          "code": "community",
          "display": "Community"
        } ]
      },
      "medicationCodeableConcept": {
        "coding": [ {
          "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
          "code": "892516",
          "display": "Morphine Sulfate 10 MG Rectal Suppository"
        } ]
      },
      "subject": {
        "reference": "Patient/numer-EXM506-FHIR3"
      },
      "authoredOn": "2019-08-21T00:00:00-07:00"
    },
    "request": {
      "method": "PUT",
      "url": "MedicationRequest/numer-EXM506-FHIR3-5"
    }
  }, {
    "resource": {
      "resourceType": "Encounter",
      "id": "denom-EXM506-FHIR3-2",
      "meta": {
        "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter" ]
      },
      "status": "finished",
      "class": {
        "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
        "code": "IMP",
        "display": "inpatient encounter"
      },
      "type": [ {
        "coding": [ {
          "system": "http://snomed.info/sct",
          "code": "32485007",
          "display": "Hospital admission (procedure)"
        } ]
      } ],
      "subject": {
        "reference": "Patient/denom-EXM506-FHIR3"
      },
      "period": {
        "start": "2019-08-21T00:00:00-06:00",
        "end": "2019-12-18T08:15:00-07:00"
      },
      "diagnosis": [ {
        "condition": {
          "reference": "Condition/denom-EXM506-FHIR3-1"
        },
        "role": {
          "coding": [ {
            "system": "http://hl7.org/fhir/diagnosis-role",
            "code": "billing",
            "display": "Billing"
          } ]
        },
        "rank": 1
      } ],
      "hospitalization": {
        "dischargeDisposition": {
          "coding": [ {
            "system": "http://snomed.info/sct",
            "code": "306701001",
            "display": "Discharge to community hospital (procedure)"
          } ]
        }
      }
    },
    "request": {
      "method": "PUT",
      "url": "Encounter/denom-EXM506-FHIR3-2"
    }
  }, {
    "resource": {
      "resourceType": "Encounter",
      "id": "numer-EXM506-FHIR3-2",
      "meta": {
        "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter" ]
      },
      "status": "finished",
      "class": {
        "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
        "code": "IMP",
        "display": "inpatient encounter"
      },
      "type": [ {
        "coding": [ {
          "system": "http://snomed.info/sct",
          "code": "32485007",
          "display": "Hospital admission (procedure)"
        } ]
      } ],
      "subject": {
        "reference": "Patient/numer-EXM506-FHIR3"
      },
      "period": {
        "start": "2019-08-21T00:00:00-06:00",
        "end": "2019-12-18T08:15:00-07:00"
      },
      "diagnosis": [ {
        "condition": {
          "reference": "Condition/numer-EXM506-FHIR3-1"
        },
        "role": {
          "coding": [ {
            "system": "http://hl7.org/fhir/diagnosis-role",
            "code": "billing",
            "display": "Billing"
          } ]
        },
        "rank": 1
      } ],
      "hospitalization": {
        "dischargeDisposition": {
          "coding": [ {
            "system": "http://snomed.info/sct",
            "code": "306701001",
            "display": "Discharge to community hospital (procedure)"
          } ]
        }
      }
    },
    "request": {
      "method": "PUT",
      "url": "Encounter/numer-EXM506-FHIR3-2"
    }
  }, {
    "resource": {
      "resourceType": "MedicationRequest",
      "id": "denom-EXM506-FHIR3-6",
      "status": "completed",
      "intent": "order",
      "category": {
        "coding": [ {
          "system": "http://hl7.org/fhir/medication-request-category",
          "code": "community",
          "display": "Community"
        } ]
      },
      "medicationCodeableConcept": {
        "coding": [ {
          "system": "http://www.nlm.nih.gov/research/umls/rxnorm",
          "code": "1665326",
          "display": "1 ML Lorazepam 4 MG/ML Injection"
        } ]
      },
      "subject": {
        "reference": "Patient/denom-EXM506-FHIR3"
      },
      "authoredOn": "2019-12-17T08:14:00-07:00"
    },
    "request": {
      "method": "PUT",
      "url": "MedicationRequest/denom-EXM506-FHIR3-6"
    }
  }, {
    "resource": {
      "resourceType": "Measure",
      "id": "measure-EXM506-FHIR3-2.0.000",
      "meta": {
        "profile": [ "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/proportion-measure-cqfm" ]
      },
      "text": {
        "status": "generated"
      },
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis",
        "valueCode": "boolean"
      }, {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
        "valueReference": {
          "reference": "cqf-tooling"
        }
      } ],
      "url": "http://hl7.org/fhir/us/cqfmeasures/Measure/measure-EXM506-FHIR3",
      "version": "2.0.000",
      "name": "EXM506",
      "title": "Safe Use of Opioids - Concurrent Prescribing",
      "status": "draft",
      "experimental": true,
      "publisher": "National Committee for Quality Assurance (NCQA)",
      "description": "Proportion of inpatient hospitalizations for patients 18 years of age and older prescribed, or continued on, two or more opioids or an opioid and benzodiazepine concurrently at discharge",
      "purpose": "Proportion of inpatient hospitalizations for patients 18 years of age and older prescribed, or continued on, two or more opioids or an opioid and benzodiazepine concurrently at discharge",
      "approvalDate": "2016-01-01",
      "lastReviewDate": "2019-10-10",
      "effectivePeriod": {
        "start": "2019-01-01",
        "end": "2019-12-31"
      },
      "useContext": [ {
        "code": {
          "code": "program"
        },
        "valueCodeableConcept": {
          "text": "eligible-provider"
        }
      } ],
      "jurisdiction": [ {
        "coding": [ {
          "system": "urn:iso:std:iso:3166",
          "code": "US"
        } ]
      } ],
      "topic": [ {
        "coding": [ {
          "system": "http://loinc.org",
          "code": "57024-2",
          "display": "Health Quality Measure Document"
        } ]
      } ],
      "contributor": [ {
        "type": "author",
        "name": "National Committee for Quality Assurance"
      } ],
      "contact": [ {
        "telecom": [ {
          "system": "url",
          "value": "http://www.ncqa.org/"
        } ]
      } ],
      "copyright": "This Physician Performance Measure (Measure) and related data specifications were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (eg, use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2017 National Committee for Quality Assurance. All Rights Reserved. <br> Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third party codes contained in the specifications. <br> CPT(R) contained in the Measure specifications is copyright 2004-2017 American Medical Association. LOINC(R) copyright 2004-2017 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R] ) copyright 2004-2017 International Health Terminology Standards Development Organisation. ICD-10 copyright 2017 World Health Organization. All Rights Reserved.",
      "relatedArtifact": [ {
        "type": "citation",
        "citation": "American Academy of Emergency Medicine (AAEM). (2013). Emergency department opioid-prescribing guidelines for the treatment of non-cancer-related pain. Retrieved from https://www.deepdyve.com/lp/elsevier/american-academy-of-emergency-medicine-PlQtPNi8J4"
      }, {
        "type": "citation",
        "citation": "American Society of Interventional Pain Physicians (ASIPP). (2012). Guidelines for responsible opioid prescribing in chronic noncancer pain. Retrieved from https://www.asipp.org/opioidguidelines.htm "
      }, {
        "type": "citation",
        "citation": "Dasgupta, N., Jonsson Funk, M., Proescholdbell, S., et al. (2015, September). Cohort study of the impact of high-dose opioid analgesics on overdose mortality. Pain Medicine. Retrieved from http://onlinelibrary.wiley.com/doi/10.1111/pme.12907/abstract"
      }, {
        "type": "citation",
        "citation": "Dowell, D., Haegerich, T., & Chou, R. (2016). CDC guideline for prescribing opioids for chronic painUnited States, 2016. MMWR Recommendations and Reports, 65. Retrieved from http://www.cdc.gov/media/dpk/2016/dpk-opioid-prescription-guidelines.html"
      }, {
        "type": "citation",
        "citation": "Herzig, S., Rothberg, M., Cheung, M., et al. (2014). Opioid utilization and opioid-related adverse events in nonsurgical patients in U.S. hospitals. Journal of Hospital Medicine, 9(2), 73-81."
      }, {
        "type": "citation",
        "citation": "Jena, A., Goldman, D., Schaeffer, L. D., et al. (2014). Opioid prescribing by multiple providers in Medicare: Retrospective observational study of insurance claims. BMJ, 348, g1393. DOI: 10.1136/bmj.g1393"
      }, {
        "type": "citation",
        "citation": "Liu, Y., Logan, J., Paulozzi, L., et al. (2013). Potential misuse and inappropriate prescription practices involving opioid analgesics. American Journal of Managed Care, 19(8), 648665. Retrieved from http://www.ajmc.com/journals/issue/2013/2013-1-vol19-n8/Potential-Misuse-and-Inappropriate-Prescription-Practices-Involving-Opioid-Analgesics/"
      }, {
        "type": "citation",
        "citation": "Lin, L. A., Bohnert, A. S., Kerns, R. D., et al. (2017). Impact of the opioid safety initiative on opioid-related prescribing in veterans. Pain, 158(5), 833839. Retrieved from https://www.ncbi.nlm.nih.gov/pubmed/28240996"
      }, {
        "type": "citation",
        "citation": "Mack, K., Zhang, K., Paulozzi, L., et al. (2015, February). Prescription practices involving opioid analgesics among Americans with Medicaid, 2010. Journal of Health Care for the Poor and Underserved, 26(1), 182198. Retrieved from http://www.ncbi.nlm.nih.gov/pmc/articles/PMC4365785"
      }, {
        "type": "citation",
        "citation": "National Institute on Drug Abuse. (2011). Analysis of opioid prescription practices finds areas of concern. Retrieved from https://www.drugabuse.gov/news-events/news-releases/2011/04/analysis-opioid-prescription-practices-finds-areas-concern"
      }, {
        "type": "citation",
        "citation": "New York City (NYC) Department of Health and Mental Hygiene (NYC DOHMH). (2013). NYC emergency department discharge opioid-prescribing guidelines. Retrieved from https://www1.nyc.gov/site/doh/providers/health-topics/opioid-prescribing-resources-for-emergency-departments.page"
      }, {
        "type": "citation",
        "citation": "Park, T., Saitz, R., Ganoczy, D., et al. (2015). Benzodiazepine-prescribing patterns and deaths from drug overdose among U.S. veterans receiving opioid analgesics: Case-cohort study. BMJ, 350, h2698. Retrieved from http://www.bmj.com/content/350/bmj.h2698"
      }, {
        "type": "citation",
        "citation": "Rudd, R., Aleshire, N., Zibbell, J., et al. (2016, January). Increases in drug and opioid overdose deathsUnited States, 20002014. Morbidity and Mortality Weekly Report, 64(50), 13781382. Retrieved from http://www.cdc.gov/mmwr/preview/mmwrhtml/mm6450a3.htm"
      }, {
        "type": "citation",
        "citation": "Sun, E., Dixit, A., Humphreys, K., et al. (2017). Association between concurrent use of prescription opioids and benzodiazepines and overdose: Retrospective analysis. BMJ, 356, j760. Retrieved from http://www.bmj.com/content/356/bmj.j760"
      }, {
        "type": "citation",
        "citation": "U.S. Department of Veterans Affairs. (2014). Opioid safety initiative toolkit. Retrieved from https://www.va.gov/PAINMANAGEMENT/Opioid_Safety_Initiative_OSI.asp"
      }, {
        "type": "citation",
        "citation": "U.S. Department of Veterans Affairs. (2016). Opioid safety initiative: Opioids (including tramadol) used in combination with benzodiazepine derivative sedatives/hypnotics. Unpublished manuscript."
      }, {
        "type": "citation",
        "citation": "Washington Agency Medical Directors Group (WAMDG). (2015). Interagency guideline on prescribing opioids for pain, Part II: Prescribing opioids in the acute and subacute phase. Retrieved from http://www.agencymeddirectors.wa.gov/Files/2015AMDGOpioidGuideline.pdf"
      } ],
      "library": [ {
        "reference": "Library/library-EXM506-FHIR3-2.0.000"
      } ],
      "disclaimer": "These performance measures are not clinical guidelines and do not establish a standard of medical care and have not been tested for all potential applications. The measures and specifications are provided without warranty. CMS has contracted with Mathematica for the continued maintenance of this electronic measure.",
      "scoring": {
        "coding": [ {
          "system": "http://hl7.org/fhir/measure-scoring",
          "code": "proportion"
        } ]
      },
      "type": [ {
        "coding": [ {
          "system": "http://hl7.org/fhir/measure-type",
          "code": "process"
        } ]
      } ],
      "rationale": "Unintentional opioid overdose fatalities have become a major public health concern in the United States (Rudd et al., 2016). Reducing the number of unintentional overdoses has become a priority for numerous federal organizations including, but not limited to, the Centers for Disease Control and Prevention (CDC), the Federal Interagency Workgroup for Opioid Adverse Drug Events, and the Substance Abuse and Mental Health Services Administration. Concurrent prescriptions of opioids or opioids and benzodiazepines places patients at a greater risk of unintentional overdose due to the increased risk of respiratory depression (Dowell, Haegerich, & Chou, 2016). An analysis of national prescribing patterns shows that more than half of patients who received an opioid prescription in 2009 had filled another opioid prescription within the previous 30 days (National Institute on Drug Abuse, 2011). Studies of multiple claims and prescription databases have shown that between 5%-15% of patients receive concurrent opioid prescriptions and 5%-20% of patients receive concurrent opioid and benzodiazepine prescriptions across various settings (Liu et al., 2013; Mack et al., 2015, Park et al., 2015). Patients who have multiple opioid prescriptions have an increased risk for overdose (Jena et al., 2014). Rates of fatal overdose are ten times higher in patients who are co-dispensed opioid analgesics and benzodiazepines than opioids alone (Dasgupta et al., 2015). The number of opioid overdose deaths involving benzodiazepines increased 14% on average each year from 2006 to 2011, while the number of opioid analgesic overdose deaths not involving benzodiazepines did not change significantly (Jones & McAninch, 2015). Furthermore, concurrent use of benzodiazepines with opioids was prevalent in 31%-51% of fatal overdoses (Dowell, Haegerich, & Chou, 2016). One study found that eliminating concurrent use of opioids and benzodiazepines could reduce the risk of opioid overdose-related ED and inpatient visits by 15% and potentially could have prevented an estimated 2,630 deaths related to opioid painkiller overdoses in 2015 (Sun et al., 2017). A study on The Opioid Safety Initiative in the Veterans Health Administration (VHA), which includes an opioid and benzodiazepine concurrent prescribing measure that this measure is based on, was associated with a decrease of 20.67% overall and 0.86% patients per month (781 patients per month) receiving concurrent benzodiazepine with an opioid among all adult VHA patients who filled outpatient opioid prescriptions from October 2012 to September 2014 (Lin et al., 2017). Adopting a measure that calculates the proportion of patients with two or more opioids or opioids and benzodiazepines concurrently has the potential to reduce preventable mortality and reduce the costs associated with adverse events related to opioid use by (1) encouraging providers to identify patients with concurrent prescriptions of opioids or opioids and benzodiazepines and (2) discouraging providers from prescribing two or more opioids or opioids and benzodiazepines concurrently.",
      "clinicalRecommendationStatement": "The 2016 CDC Guideline for Prescribing Opioids for Chronic Pain also recommends that: -  \"Clinicians should avoid prescribing opioids and benzodiazepines concurrently whenever possible. Clinicians should communicate with others managing the patient to discuss the patient's needs, prioritize patient goals, weigh risks of concurrent benzodiazepine and opioid exposure, and coordinate care.\" \n- \"Clinicians should check the PDMP for concurrent controlled medications prescribed by other clinicians and should consider involving pharmacists and pain specialists as part of the management team when opioids are co-prescribed with other central nervous system depressants.\"\n-  \"Experts emphasized that clinicians should communicate with mental health professionals managing the patient to discuss the patient's needs, prioritize patient goals, weigh risks of concurrent benzodiazepine and opioid exposure, and coordinate care.\" \nIn addition to the 2016 CDC Guideline for Prescribing Opioids for Chronic Pain, opioid prescribing guidelines issued by various state agencies and professional societies for various settings agree with the recommendation to avoid concurrently prescribing opioids (AAEM, WAMDG) and opioids and benzodiazepines (WAMDG, ASIPP, NYC DOHMH) whenever possible as the combination of these medications may potentiate opioid-induced respiratory depression. \n The CDC Guideline for Prescribing Opioids for Chronic Pain (Dowell, 2016) also recommends that for patients found to have multiple opioid prescriptions clinicians should: \n-  \"Discuss information from the PDMP with their patient and confirm that the patient is aware of the additional prescriptions.\" \n -  \"Discuss safety concerns, including increased risk for respiratory depression and overdose, with patients found to be receiving opioids from more than one prescriber or receiving medications that increase risk when combined with opioids and consider offering naloxone.\" \n -  \"Discuss safety concerns with other clinicians who are prescribing controlled substances for their patient. Ideally clinicians should first discuss concerns with their patient and inform him or her that they plan to coordinate care with the patient's other prescribers to improve the patient's safety.\"",
      "improvementNotation": "decrease",
      "guidance": "Clinician judgement, clinical appropriateness, or both may indicate concurrent prescribing of two unique opioids or an opioid and benzodiazepine is medically necessary, thus the measure is not expected to have a zero rate. \n Inpatient hospitalizations with discharge medications of a new or continuing opioid or a new or continuing benzodiazepine prescription should be included in the initial population. \n Inpatient hospitalizations with discharge medications of two or more new or continuing opioids or new or continuing opioid and benzodiazepine resulting in concurrent therapy at discharge should be included in the numerator.",
      "group": [ {
        "identifier": {
          "value": "group-1"
        },
        "population": [ {
          "identifier": {
            "value": "initial-population-identifier"
          },
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "initial-population",
              "display": "Initial Population"
            } ]
          },
          "criteria": "Initial Population"
        }, {
          "identifier": {
            "value": "numerator-identifier"
          },
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "numerator",
              "display": "Numerator"
            } ]
          },
          "criteria": "Numerator"
        }, {
          "identifier": {
            "value": "denominator-identifier"
          },
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "denominator",
              "display": "Denominator"
            } ]
          },
          "criteria": "Denominator"
        }, {
          "identifier": {
            "value": "denominator-exclusions-identifier"
          },
          "code": {
            "coding": [ {
              "system": "http://terminology.hl7.org/CodeSystem/measure-population",
              "code": "denominator-exclusion",
              "display": "Denominator Exclusion"
            } ]
          },
          "criteria": "Denominator Exclusion"
        } ]
      } ],
      "supplementalData": [ {
        "identifier": {
          "value": "sde-ethnicity"
        },
        "usage": [ {
          "coding": [ {
            "system": "http://hl7.org/fhir/measure-data-usage",
            "code": "supplemental-data"
          } ]
        } ],
        "criteria": "SDE Ethnicity"
      }, {
        "identifier": {
          "value": "sde-payer"
        },
        "usage": [ {
          "coding": [ {
            "system": "http://hl7.org/fhir/measure-data-usage",
            "code": "supplemental-data"
          } ]
        } ],
        "criteria": "SDE Payer"
      }, {
        "identifier": {
          "value": "sde-race"
        },
        "usage": [ {
          "coding": [ {
            "system": "http://hl7.org/fhir/measure-data-usage",
            "code": "supplemental-data"
          } ]
        } ],
        "criteria": "SDE Race"
      }, {
        "identifier": {
          "value": "sde-sex"
        },
        "usage": [ {
          "coding": [ {
            "system": "http://hl7.org/fhir/measure-data-usage",
            "code": "supplemental-data"
          } ]
        } ],
        "criteria": "SDE Sex"
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "Measure/measure-EXM506-FHIR3-2.0.000"
    }
  }, {
    "resource": {
      "resourceType": "Bundle",
      "id": "tests-Patient-bundle",
      "type": "transaction",
      "entry": [ {
        "resource": {
          "resourceType": "Patient",
          "id": "numer-EXM506-FHIR3",
          "meta": {
            "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient" ]
          },
          "extension": [ {
            "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-race",
            "extension": [ {
              "url": "ombCategory",
              "valueCoding": {
                "system": "urn:oid:2.16.840.1.113883.6.238",
                "code": "2106-3",
                "display": "White"
              }
            } ]
          }, {
            "url": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity",
            "extension": [ {
              "url": "ombCategory",
              "valueCoding": {
                "system": "urn:oid:2.16.840.1.113883.6.238",
                "code": "2186-5",
                "display": "Not Hispanic or Latino"
              }
            } ]
          } ],
          "identifier": [ {
            "use": "usual",
            "type": {
              "coding": [ {
                "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                "code": "MR",
                "display": "Medical Record Number"
              } ]
            },
            "system": "http://hospital.smarthealthit.org",
            "value": "9999999911"
          } ],
          "name": [ {
            "family": "Jones",
            "given": [ "Louise" ]
          } ],
          "gender": "female",
          "birthDate": "1971-11-21"
        },
        "request": {
          "method": "PUT",
          "url": "Patient/numer-EXM506-FHIR3"
        }
      } ]
    },
    "request": {
      "method": "PUT",
      "url": "tests-Patient-bundle"
    }
  } ]
}