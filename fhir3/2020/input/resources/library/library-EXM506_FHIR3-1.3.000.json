{
  "resourceType": "Library",
  "id": "library-EXM506-FHIR3-1.3.000",
  "text": {
    "status": "generated",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">library-EXM506-FHIR3-1.3.000</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"> Logic Library </td></tr><tr><th scope=\"row\"><b>Version: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">1.3.000</td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"3\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-MATGlobalCommonFunctions-FHIR3-4.0.000</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-FHIRHelpers-3.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-SupplementalDataElements-FHIR3-1.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"12\" scope=\"row\"><b>Data Requirements: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Condition</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>ProcedureRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>ProcedureRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library EXM506_FHIR3 version '1.3.000'\n\n/*\nBased on CMS506v1 - Safe Use of Opioids - Concurrent Prescribing\n*/\n\nusing FHIR version '3.0.0'\n\ninclude MATGlobalCommonFunctions_FHIR3 version '4.0.000' called Global\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\ninclude SupplementalDataElements_FHIR3 version '1.0.0' called SDE\n\ncodesystem &quot;Diagnosis Role&quot;: 'http://hl7.org/fhir/diagnosis-role'\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\ncodesystem &quot;SNOMEDCT&quot;: 'http://snomed.org'\ncodesystem &quot;RequestIntent&quot;: 'http://hl7.org/fhir/request-intent'\n\nvalueset &quot;All Primary and Secondary Cancer&quot;:  'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161'\nvalueset &quot;Encounter ED and Observation Stay&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292'\nvalueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'\nvalueset &quot;Ethnicity&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837'\nvalueset &quot;Hospice Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20'\nvalueset &quot;ONC Administrative Sex&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1'\nvalueset &quot;Palliative Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162'\nvalueset &quot;Payer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591'\nvalueset &quot;Race&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.836'\nvalueset &quot;Schedule II and Schedule III Opioids&quot;:  'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2'\nvalueset &quot;Schedule IV Benzodiazepines&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1'\n\ncode &quot;Birthdate&quot;: '21112-8' from &quot;LOINC&quot; display 'Birth date'\ncode &quot;Order&quot;: 'order' from &quot;RequestIntent&quot; display 'Order'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n\ncontext Patient\n\ndefine &quot;Inpatient Hospital Based Encounter with Age Greater than or Equal to 18&quot;:\n\t[&quot;Encounter&quot;: &quot;Encounter Inpatient&quot;] EncounterInpatient //Need to name this//\n\t\twhere EncounterInpatient.status = 'finished'\n\t\t  and Global.&quot;LengthInDays&quot;(EncounterInpatient.period) &lt;= 120\n\t\t\tand EncounterInpatient.period ends during &quot;Measurement Period&quot;\n      and Global.CalendarAgeInYearsAt(ToDateTime(Patient.birthDate), start of FHIRHelpers.ToInterval(EncounterInpatient.period)) &gt;= 18\n\ndefine &quot;ED or Observation Based Encounter with Age Greater than or Equal to 18&quot;:\n[&quot;Encounter&quot;: &quot;Encounter ED and Observation Stay&quot;] EDorObservationEncounter\n\twhere EDorObservationEncounter.status = 'finished'\n   and EDorObservationEncounter.period ends during &quot;Measurement Period&quot;\n   and Global.CalendarAgeInYearsAt(ToDateTime(Patient.birthDate), start of FHIRHelpers.ToInterval(EDorObservationEncounter.period)) &gt;= 18\n\ndefine &quot;Hospital Based Encounters for Adults&quot;:\n&quot;Inpatient Hospital Based Encounter with Age Greater than or Equal to 18&quot;\n\tunion &quot;ED or Observation Based Encounter with Age Greater than or Equal to 18&quot;\n\n/* define &quot;Encounter Discharges with Opioids or Benzodiazepines&quot;:\n\t&quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounters\n\t\twith [MedicationRequest: medication in &quot;Schedule II and Schedule III Opioids&quot;] OpioidsDischarge\n    such that OpioidsDischarge.authoredOn during HospitalBasedEncounters.period\n          and OpioidsDischarge.intent = 'order'\n\t\t\t\t\tunion (&quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounters\n    with [MedicationRequest: medication in &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineDischarge\n    such that BenzodiazepineDischarge.authoredOn during HospitalBasedEncounters.period\n           and BenzodiazepineDischarge.intent = 'order') */\n\ndefine &quot;Encounter Discharges with Opioids or Benzodiazepines&quot;:\n\tfrom &quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounters,\n\t\t[MedicationRequest: medication in &quot;Schedule II and Schedule III Opioids&quot;] OpioidsDischarge,\n\t\t[MedicationRequest: medication in &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineDischarge\n\t\t\twhere OpioidsDischarge.authoredOn during HospitalBasedEncounters.period\n\t\t\t\tand OpioidsDischarge.intent = 'order'\n\t\t\t\tand BenzodiazepineDischarge.authoredOn during HospitalBasedEncounters.period\n\t      and BenzodiazepineDischarge.intent = 'order'\n\t\t\treturn HospitalBasedEncounters\n\ndefine &quot;Initial Population&quot;:\n&quot;Encounter Discharges with Opioids or Benzodiazepines&quot;\n\ndefine &quot;Denominator&quot;:\n&quot;Initial Population&quot;\n\n/* define &quot;Denominator Exclusions&quot;:\n\t&quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounter\n\twith [Condition: code in &quot;All Primary and Secondary Cancer&quot;]Cancer\n       such that Cancer.clinicalStatus = 'active'\n       and Cancer.verificationStatus = 'confirmed'\n       and Cancer.onset overlaps HospitalBasedEncounter.period)\n     union (([&quot;ProcedureRequest&quot;: &quot;Palliative Care&quot;]\n\t\t\tunion [&quot;ProcedureRequest&quot;: &quot;Hospice Care&quot;] ) PalliativeOrHospiceCareOrder\n\t\t\twhere PalliativeOrHospiceCareOrder.intent = 'order'\n      and PalliativeOrHospiceCareOrder.authoredOn during HospitalBasedEncounter.period)\n    union (&quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounter\n    ([&quot;Procedure&quot;: &quot;Palliative Care&quot;]\n    \tunion [&quot;Procedure&quot;: &quot;Hospice Care&quot;] ) PalliativeOrHospiceCarePerformed\n    \t\t\t\t\twhere PalliativeOrHospiceCarePerformed.period overlaps HospitalBasedEncounter.period) */\n\ndefine &quot;Denominator Exclusions&quot;:\n\tfrom &quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounter,\n\t\t[Condition: code in &quot;All Primary and Secondary Cancer&quot;] Cancer,\n\t\t(\n\t\t\t[&quot;ProcedureRequest&quot;: &quot;Palliative Care&quot;]\n\t\t\t\tunion [&quot;ProcedureRequest&quot;: &quot;Hospice Care&quot;]\n\t\t) PalliativeOrHospiceCareOrder,\n\t\t(\n\t\t\t[&quot;Procedure&quot;: &quot;Palliative Care&quot;] union [&quot;Procedure&quot;: &quot;Hospice Care&quot;]\n\t\t) PalliativeOrHospiceCarePerformed\n\t\t\twhere Cancer.clinicalStatus = 'active'\n\t\t\t\tand Cancer.verificationStatus = 'confirmed'\n\t\t\t\tand Cancer.onset overlaps HospitalBasedEncounter.period\n\t\t\t\tand PalliativeOrHospiceCareOrder.intent = 'order'\n\t      and PalliativeOrHospiceCareOrder.authoredOn during HospitalBasedEncounter.period\n\t\t\t\tand PalliativeOrHospiceCarePerformed.performed overlaps HospitalBasedEncounter.period\n\t\t\treturn HospitalBasedEncounter\n\n/* define &quot;Encounter with Opiates and Benzodiazepines at Discharge&quot;:\n ((&quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounter\n   with [&quot;MedicationRequest&quot;]: OpioidsDischarge\n   such that (OpioidsDischarge.medication in &quot;Schedule II and Schedule III Opioids&quot;\n   where OpioidsDischarge.authoredOn during HospitalBasedEncounters.period\n   and OpioidsDischarge.intent = 'order')\n     with [&quot;MedicationRequest&quot;]: BenzodiazepineDischarge\n      such that (BenzodiazepineDischarge.medication in &quot;Schedule IV Benzodiazepines&quot;\n       where BenzodiazepineDischarge.authoredOn during HospitalBasedEncounters.period\n        and BenzodiazepineDischarge.intent = 'order')) */\n\ndefine &quot;Encounter with Opiates and Benzodiazepines at Discharge&quot;:\n\tfrom &quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounter,\n\t\t[MedicationRequest: &quot;Schedule II and Schedule III Opioids&quot;] OpioidsDischarge,\n\t\t[MedicationRequest: &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineDischarge\n\t\t\twhere OpioidsDischarge.authoredOn during HospitalBasedEncounter.period\n\t    \tand OpioidsDischarge.intent = 'order'\n\t\t\t\tand BenzodiazepineDischarge.authoredOn during HospitalBasedEncounter.period\n        and BenzodiazepineDischarge.intent = 'order'\n\t\t\treturn HospitalBasedEncounter\n\n/* define &quot;Has Two or More Opioids at Discharge&quot;:\n  &quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounter\n    with Count([&quot;MedicationRequest&quot;]:  Opioids\n  such that Opioids.medication in &quot;Schedule II and Schedule III Opioids&quot;\n    \twhere Opioids.authorDatetime during HospitalBasedEncounter.relevantPeriod\n    \t)&gt;= 2 */\n\ndefine &quot;Has Two or More Opioids at Discharge&quot;:\n\t&quot;Hospital Based Encounters for Adults&quot; HospitalBasedEncounter\n\t\twhere Count(\n\t\t\t[MedicationRequest: &quot;Schedule II and Schedule III Opioids&quot;] Opioids\n\t\t\t\twhere Opioids.authoredOn during HospitalBasedEncounter.period\n\t\t) &gt;= 2\n\ndefine &quot;Numerator&quot;:\n\t&quot;Has Two or More Opioids at Discharge&quot;\n\t\tunion &quot;Encounter with Opiates and Benzodiazepines at Discharge&quot;\n\n/* define function &quot;LengthInDays&quot;(Value Interval&lt;DateTime&gt;):\n\tdifference in days between start of Value and end of Value\n\ndefine function &quot;Global.ToDate&quot;(Value DateTime):\nDateTime(year from Value, month from Value, day from Value, 0, 0, 0, 0, timezone from Value)\n\ndefine function &quot;Global.CalendarAgeInYearsAt&quot;(BirthDateTime DateTime, AsOf DateTime):\n      years between ToDate(BirthDateTime)and ToDate(AsOf) */\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
  },
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "cqf-tooling"
    }
  } ],
  "version": "1.3.000",
  "name": "EXM506_FHIR3",
  "status": "active",
  "experimental": true,
  "type": {
    "coding": [ {
      "system": "http://hl7.org/fhir/codesystem-library-type.html",
      "code": "logic-library"
    } ]
  },
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBFWE01MDZfRkhJUjMgdmVyc2lvbiAnMS4zLjAwMCcKCi8qCkJhc2VkIG9uIENNUzUwNnYxIC0gU2FmZSBVc2Ugb2YgT3Bpb2lkcyAtIENvbmN1cnJlbnQgUHJlc2NyaWJpbmcKKi8KCnVzaW5nIEZISVIgdmVyc2lvbiAnMy4wLjAnCgppbmNsdWRlIE1BVEdsb2JhbENvbW1vbkZ1bmN0aW9uc19GSElSMyB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgR2xvYmFsCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnMy4wLjAnIGNhbGxlZCBGSElSSGVscGVycwppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50c19GSElSMyB2ZXJzaW9uICcxLjAuMCcgY2FsbGVkIFNERQoKY29kZXN5c3RlbSAiRGlhZ25vc2lzIFJvbGUiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9kaWFnbm9zaXMtcm9sZScKY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycKY29kZXN5c3RlbSAiU05PTUVEQ1QiOiAnaHR0cDovL3Nub21lZC5vcmcnCmNvZGVzeXN0ZW0gIlJlcXVlc3RJbnRlbnQiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9yZXF1ZXN0LWludGVudCcKCnZhbHVlc2V0ICJBbGwgUHJpbWFyeSBhbmQgU2Vjb25kYXJ5IENhbmNlciI6ICAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTExLjE2MScKdmFsdWVzZXQgIkVuY291bnRlciBFRCBhbmQgT2JzZXJ2YXRpb24gU3RheSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjkyJwp2YWx1ZXNldCAiRW5jb3VudGVyIElucGF0aWVudCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy42NjYuNS4zMDcnCnZhbHVlc2V0ICJFdGhuaWNpdHkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTE0MjIyLjQuMTEuODM3Jwp2YWx1ZXNldCAiSG9zcGljZSBDYXJlIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjMxNTcuMTAwNC4yMCcKdmFsdWVzZXQgIk9OQyBBZG1pbmlzdHJhdGl2ZSBTZXgiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xJwp2YWx1ZXNldCAiUGFsbGlhdGl2ZSBDYXJlIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTExMS4xNjInCnZhbHVlc2V0ICJQYXllciI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTQyMjIuNC4xMS4zNTkxJwp2YWx1ZXNldCAiUmFjZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTQyMjIuNC4xMS44MzYnCnZhbHVlc2V0ICJTY2hlZHVsZSBJSSBhbmQgU2NoZWR1bGUgSUlJIE9waW9pZHMiOiAgJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTEyNS4yJwp2YWx1ZXNldCAiU2NoZWR1bGUgSVYgQmVuem9kaWF6ZXBpbmVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTEyNS4xJwoKY29kZSAiQmlydGhkYXRlIjogJzIxMTEyLTgnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdCaXJ0aCBkYXRlJwpjb2RlICJPcmRlciI6ICdvcmRlcicgZnJvbSAiUmVxdWVzdEludGVudCIgZGlzcGxheSAnT3JkZXInCgpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+Cgpjb250ZXh0IFBhdGllbnQKCmRlZmluZSAiSW5wYXRpZW50IEhvc3BpdGFsIEJhc2VkIEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiOgoJWyJFbmNvdW50ZXIiOiAiRW5jb3VudGVyIElucGF0aWVudCJdIEVuY291bnRlcklucGF0aWVudCAvL05lZWQgdG8gbmFtZSB0aGlzLy8KCQl3aGVyZSBFbmNvdW50ZXJJbnBhdGllbnQuc3RhdHVzID0gJ2ZpbmlzaGVkJwoJCSAgYW5kIEdsb2JhbC4iTGVuZ3RoSW5EYXlzIihFbmNvdW50ZXJJbnBhdGllbnQucGVyaW9kKSA8PSAxMjAKCQkJYW5kIEVuY291bnRlcklucGF0aWVudC5wZXJpb2QgZW5kcyBkdXJpbmcgIk1lYXN1cmVtZW50IFBlcmlvZCIKICAgICAgYW5kIEdsb2JhbC5DYWxlbmRhckFnZUluWWVhcnNBdChUb0RhdGVUaW1lKFBhdGllbnQuYmlydGhEYXRlKSwgc3RhcnQgb2YgRkhJUkhlbHBlcnMuVG9JbnRlcnZhbChFbmNvdW50ZXJJbnBhdGllbnQucGVyaW9kKSkgPj0gMTgKCmRlZmluZSAiRUQgb3IgT2JzZXJ2YXRpb24gQmFzZWQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCI6ClsiRW5jb3VudGVyIjogIkVuY291bnRlciBFRCBhbmQgT2JzZXJ2YXRpb24gU3RheSJdIEVEb3JPYnNlcnZhdGlvbkVuY291bnRlcgoJd2hlcmUgRURvck9ic2VydmF0aW9uRW5jb3VudGVyLnN0YXR1cyA9ICdmaW5pc2hlZCcKICAgYW5kIEVEb3JPYnNlcnZhdGlvbkVuY291bnRlci5wZXJpb2QgZW5kcyBkdXJpbmcgIk1lYXN1cmVtZW50IFBlcmlvZCIKICAgYW5kIEdsb2JhbC5DYWxlbmRhckFnZUluWWVhcnNBdChUb0RhdGVUaW1lKFBhdGllbnQuYmlydGhEYXRlKSwgc3RhcnQgb2YgRkhJUkhlbHBlcnMuVG9JbnRlcnZhbChFRG9yT2JzZXJ2YXRpb25FbmNvdW50ZXIucGVyaW9kKSkgPj0gMTgKCmRlZmluZSAiSG9zcGl0YWwgQmFzZWQgRW5jb3VudGVycyBmb3IgQWR1bHRzIjoKIklucGF0aWVudCBIb3NwaXRhbCBCYXNlZCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IgoJdW5pb24gIkVEIG9yIE9ic2VydmF0aW9uIEJhc2VkIEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiCgovKiBkZWZpbmUgIkVuY291bnRlciBEaXNjaGFyZ2VzIHdpdGggT3Bpb2lkcyBvciBCZW56b2RpYXplcGluZXMiOgoJIkhvc3BpdGFsIEJhc2VkIEVuY291bnRlcnMgZm9yIEFkdWx0cyIgSG9zcGl0YWxCYXNlZEVuY291bnRlcnMKCQl3aXRoIFtNZWRpY2F0aW9uUmVxdWVzdDogbWVkaWNhdGlvbiBpbiAiU2NoZWR1bGUgSUkgYW5kIFNjaGVkdWxlIElJSSBPcGlvaWRzIl0gT3Bpb2lkc0Rpc2NoYXJnZQogICAgc3VjaCB0aGF0IE9waW9pZHNEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSG9zcGl0YWxCYXNlZEVuY291bnRlcnMucGVyaW9kCiAgICAgICAgICBhbmQgT3Bpb2lkc0Rpc2NoYXJnZS5pbnRlbnQgPSAnb3JkZXInCgkJCQkJdW5pb24gKCJIb3NwaXRhbCBCYXNlZCBFbmNvdW50ZXJzIGZvciBBZHVsdHMiIEhvc3BpdGFsQmFzZWRFbmNvdW50ZXJzCiAgICB3aXRoIFtNZWRpY2F0aW9uUmVxdWVzdDogbWVkaWNhdGlvbiBpbiAiU2NoZWR1bGUgSVYgQmVuem9kaWF6ZXBpbmVzIl0gQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UKICAgIHN1Y2ggdGhhdCBCZW56b2RpYXplcGluZURpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBIb3NwaXRhbEJhc2VkRW5jb3VudGVycy5wZXJpb2QKICAgICAgICAgICBhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuaW50ZW50ID0gJ29yZGVyJykgKi8KCmRlZmluZSAiRW5jb3VudGVyIERpc2NoYXJnZXMgd2l0aCBPcGlvaWRzIG9yIEJlbnpvZGlhemVwaW5lcyI6Cglmcm9tICJIb3NwaXRhbCBCYXNlZCBFbmNvdW50ZXJzIGZvciBBZHVsdHMiIEhvc3BpdGFsQmFzZWRFbmNvdW50ZXJzLAoJCVtNZWRpY2F0aW9uUmVxdWVzdDogbWVkaWNhdGlvbiBpbiAiU2NoZWR1bGUgSUkgYW5kIFNjaGVkdWxlIElJSSBPcGlvaWRzIl0gT3Bpb2lkc0Rpc2NoYXJnZSwKCQlbTWVkaWNhdGlvblJlcXVlc3Q6IG1lZGljYXRpb24gaW4gIlNjaGVkdWxlIElWIEJlbnpvZGlhemVwaW5lcyJdIEJlbnpvZGlhemVwaW5lRGlzY2hhcmdlCgkJCXdoZXJlIE9waW9pZHNEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSG9zcGl0YWxCYXNlZEVuY291bnRlcnMucGVyaW9kCgkJCQlhbmQgT3Bpb2lkc0Rpc2NoYXJnZS5pbnRlbnQgPSAnb3JkZXInCgkJCQlhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSG9zcGl0YWxCYXNlZEVuY291bnRlcnMucGVyaW9kCgkgICAgICBhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuaW50ZW50ID0gJ29yZGVyJwoJCQlyZXR1cm4gSG9zcGl0YWxCYXNlZEVuY291bnRlcnMKCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoKIkVuY291bnRlciBEaXNjaGFyZ2VzIHdpdGggT3Bpb2lkcyBvciBCZW56b2RpYXplcGluZXMiCgpkZWZpbmUgIkRlbm9taW5hdG9yIjoKIkluaXRpYWwgUG9wdWxhdGlvbiIKCi8qIGRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9ucyI6CgkiSG9zcGl0YWwgQmFzZWQgRW5jb3VudGVycyBmb3IgQWR1bHRzIiBIb3NwaXRhbEJhc2VkRW5jb3VudGVyCgl3aXRoIFtDb25kaXRpb246IGNvZGUgaW4gIkFsbCBQcmltYXJ5IGFuZCBTZWNvbmRhcnkgQ2FuY2VyIl1DYW5jZXIKICAgICAgIHN1Y2ggdGhhdCBDYW5jZXIuY2xpbmljYWxTdGF0dXMgPSAnYWN0aXZlJwogICAgICAgYW5kIENhbmNlci52ZXJpZmljYXRpb25TdGF0dXMgPSAnY29uZmlybWVkJwogICAgICAgYW5kIENhbmNlci5vbnNldCBvdmVybGFwcyBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLnBlcmlvZCkKICAgICB1bmlvbiAoKFsiUHJvY2VkdXJlUmVxdWVzdCI6ICJQYWxsaWF0aXZlIENhcmUiXQoJCQl1bmlvbiBbIlByb2NlZHVyZVJlcXVlc3QiOiAiSG9zcGljZSBDYXJlIl0gKSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZU9yZGVyCgkJCXdoZXJlIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlT3JkZXIuaW50ZW50ID0gJ29yZGVyJwogICAgICBhbmQgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVPcmRlci5hdXRob3JlZE9uIGR1cmluZyBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLnBlcmlvZCkKICAgIHVuaW9uICgiSG9zcGl0YWwgQmFzZWQgRW5jb3VudGVycyBmb3IgQWR1bHRzIiBIb3NwaXRhbEJhc2VkRW5jb3VudGVyCiAgICAoWyJQcm9jZWR1cmUiOiAiUGFsbGlhdGl2ZSBDYXJlIl0KICAgIAl1bmlvbiBbIlByb2NlZHVyZSI6ICJIb3NwaWNlIENhcmUiXSApIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlUGVyZm9ybWVkCiAgICAJCQkJCXdoZXJlIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlUGVyZm9ybWVkLnBlcmlvZCBvdmVybGFwcyBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLnBlcmlvZCkgKi8KCmRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9ucyI6Cglmcm9tICJIb3NwaXRhbCBCYXNlZCBFbmNvdW50ZXJzIGZvciBBZHVsdHMiIEhvc3BpdGFsQmFzZWRFbmNvdW50ZXIsCgkJW0NvbmRpdGlvbjogY29kZSBpbiAiQWxsIFByaW1hcnkgYW5kIFNlY29uZGFyeSBDYW5jZXIiXSBDYW5jZXIsCgkJKAoJCQlbIlByb2NlZHVyZVJlcXVlc3QiOiAiUGFsbGlhdGl2ZSBDYXJlIl0KCQkJCXVuaW9uIFsiUHJvY2VkdXJlUmVxdWVzdCI6ICJIb3NwaWNlIENhcmUiXQoJCSkgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVPcmRlciwKCQkoCgkJCVsiUHJvY2VkdXJlIjogIlBhbGxpYXRpdmUgQ2FyZSJdIHVuaW9uIFsiUHJvY2VkdXJlIjogIkhvc3BpY2UgQ2FyZSJdCgkJKSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZVBlcmZvcm1lZAoJCQl3aGVyZSBDYW5jZXIuY2xpbmljYWxTdGF0dXMgPSAnYWN0aXZlJwoJCQkJYW5kIENhbmNlci52ZXJpZmljYXRpb25TdGF0dXMgPSAnY29uZmlybWVkJwoJCQkJYW5kIENhbmNlci5vbnNldCBvdmVybGFwcyBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLnBlcmlvZAoJCQkJYW5kIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlT3JkZXIuaW50ZW50ID0gJ29yZGVyJwoJICAgICAgYW5kIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlT3JkZXIuYXV0aG9yZWRPbiBkdXJpbmcgSG9zcGl0YWxCYXNlZEVuY291bnRlci5wZXJpb2QKCQkJCWFuZCBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZVBlcmZvcm1lZC5wZXJmb3JtZWQgb3ZlcmxhcHMgSG9zcGl0YWxCYXNlZEVuY291bnRlci5wZXJpb2QKCQkJcmV0dXJuIEhvc3BpdGFsQmFzZWRFbmNvdW50ZXIKCi8qIGRlZmluZSAiRW5jb3VudGVyIHdpdGggT3BpYXRlcyBhbmQgQmVuem9kaWF6ZXBpbmVzIGF0IERpc2NoYXJnZSI6CiAoKCJIb3NwaXRhbCBCYXNlZCBFbmNvdW50ZXJzIGZvciBBZHVsdHMiIEhvc3BpdGFsQmFzZWRFbmNvdW50ZXIKICAgd2l0aCBbIk1lZGljYXRpb25SZXF1ZXN0Il06IE9waW9pZHNEaXNjaGFyZ2UKICAgc3VjaCB0aGF0IChPcGlvaWRzRGlzY2hhcmdlLm1lZGljYXRpb24gaW4gIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyIKICAgd2hlcmUgT3Bpb2lkc0Rpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBIb3NwaXRhbEJhc2VkRW5jb3VudGVycy5wZXJpb2QKICAgYW5kIE9waW9pZHNEaXNjaGFyZ2UuaW50ZW50ID0gJ29yZGVyJykKICAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiXTogQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UKICAgICAgc3VjaCB0aGF0IChCZW56b2RpYXplcGluZURpc2NoYXJnZS5tZWRpY2F0aW9uIGluICJTY2hlZHVsZSBJViBCZW56b2RpYXplcGluZXMiCiAgICAgICB3aGVyZSBCZW56b2RpYXplcGluZURpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBIb3NwaXRhbEJhc2VkRW5jb3VudGVycy5wZXJpb2QKICAgICAgICBhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuaW50ZW50ID0gJ29yZGVyJykpICovCgpkZWZpbmUgIkVuY291bnRlciB3aXRoIE9waWF0ZXMgYW5kIEJlbnpvZGlhemVwaW5lcyBhdCBEaXNjaGFyZ2UiOgoJZnJvbSAiSG9zcGl0YWwgQmFzZWQgRW5jb3VudGVycyBmb3IgQWR1bHRzIiBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLAoJCVtNZWRpY2F0aW9uUmVxdWVzdDogIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyJdIE9waW9pZHNEaXNjaGFyZ2UsCgkJW01lZGljYXRpb25SZXF1ZXN0OiAiU2NoZWR1bGUgSVYgQmVuem9kaWF6ZXBpbmVzIl0gQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UKCQkJd2hlcmUgT3Bpb2lkc0Rpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLnBlcmlvZAoJICAgIAlhbmQgT3Bpb2lkc0Rpc2NoYXJnZS5pbnRlbnQgPSAnb3JkZXInCgkJCQlhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSG9zcGl0YWxCYXNlZEVuY291bnRlci5wZXJpb2QKICAgICAgICBhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuaW50ZW50ID0gJ29yZGVyJwoJCQlyZXR1cm4gSG9zcGl0YWxCYXNlZEVuY291bnRlcgoKLyogZGVmaW5lICJIYXMgVHdvIG9yIE1vcmUgT3Bpb2lkcyBhdCBEaXNjaGFyZ2UiOgogICJIb3NwaXRhbCBCYXNlZCBFbmNvdW50ZXJzIGZvciBBZHVsdHMiIEhvc3BpdGFsQmFzZWRFbmNvdW50ZXIKICAgIHdpdGggQ291bnQoWyJNZWRpY2F0aW9uUmVxdWVzdCJdOiAgT3Bpb2lkcwogIHN1Y2ggdGhhdCBPcGlvaWRzLm1lZGljYXRpb24gaW4gIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyIKICAgIAl3aGVyZSBPcGlvaWRzLmF1dGhvckRhdGV0aW1lIGR1cmluZyBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLnJlbGV2YW50UGVyaW9kCiAgICAJKT49IDIgKi8KCmRlZmluZSAiSGFzIFR3byBvciBNb3JlIE9waW9pZHMgYXQgRGlzY2hhcmdlIjoKCSJIb3NwaXRhbCBCYXNlZCBFbmNvdW50ZXJzIGZvciBBZHVsdHMiIEhvc3BpdGFsQmFzZWRFbmNvdW50ZXIKCQl3aGVyZSBDb3VudCgKCQkJW01lZGljYXRpb25SZXF1ZXN0OiAiU2NoZWR1bGUgSUkgYW5kIFNjaGVkdWxlIElJSSBPcGlvaWRzIl0gT3Bpb2lkcwoJCQkJd2hlcmUgT3Bpb2lkcy5hdXRob3JlZE9uIGR1cmluZyBIb3NwaXRhbEJhc2VkRW5jb3VudGVyLnBlcmlvZAoJCSkgPj0gMgoKZGVmaW5lICJOdW1lcmF0b3IiOgoJIkhhcyBUd28gb3IgTW9yZSBPcGlvaWRzIGF0IERpc2NoYXJnZSIKCQl1bmlvbiAiRW5jb3VudGVyIHdpdGggT3BpYXRlcyBhbmQgQmVuem9kaWF6ZXBpbmVzIGF0IERpc2NoYXJnZSIKCi8qIGRlZmluZSBmdW5jdGlvbiAiTGVuZ3RoSW5EYXlzIihWYWx1ZSBJbnRlcnZhbDxEYXRlVGltZT4pOgoJZGlmZmVyZW5jZSBpbiBkYXlzIGJldHdlZW4gc3RhcnQgb2YgVmFsdWUgYW5kIGVuZCBvZiBWYWx1ZQoKZGVmaW5lIGZ1bmN0aW9uICJHbG9iYWwuVG9EYXRlIihWYWx1ZSBEYXRlVGltZSk6CkRhdGVUaW1lKHllYXIgZnJvbSBWYWx1ZSwgbW9udGggZnJvbSBWYWx1ZSwgZGF5IGZyb20gVmFsdWUsIDAsIDAsIDAsIDAsIHRpbWV6b25lIGZyb20gVmFsdWUpCgpkZWZpbmUgZnVuY3Rpb24gIkdsb2JhbC5DYWxlbmRhckFnZUluWWVhcnNBdCIoQmlydGhEYXRlVGltZSBEYXRlVGltZSwgQXNPZiBEYXRlVGltZSk6CiAgICAgIHllYXJzIGJldHdlZW4gVG9EYXRlKEJpcnRoRGF0ZVRpbWUpYW5kIFRvRGF0ZShBc09mKSAqLwo="
  } ]
}