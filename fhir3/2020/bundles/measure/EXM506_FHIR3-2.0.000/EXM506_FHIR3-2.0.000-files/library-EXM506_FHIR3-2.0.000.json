{
  "resourceType": "Library",
  "id": "library-EXM506-FHIR3-2.0.000",
  "text": {
    "status": "generated",
    "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">library-EXM506-FHIR3-2.0.000</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"> Logic Library </td></tr><tr><th scope=\"row\"><b>Version: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">2.0.000</td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"3\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-MATGlobalCommonFunctions-FHIR3-4.0.000</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-FHIRHelpers-3.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/library-SupplementalDataElements-FHIR3-1.0.0</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"8\" scope=\"row\"><b>Data Requirements: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Encounter</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>type</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>MedicationRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>medication</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Condition</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>ProcedureRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>ProcedureRequest</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library EXM506_FHIR3 version '2.0.000'\n\nusing FHIR version '3.0.0'\n\ninclude MATGlobalCommonFunctions_FHIR3 version '4.0.000' called Global\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\ninclude SupplementalDataElements_FHIR3 version '1.0.0' called SDE\n\ncodesystem &quot;Diagnosis Role&quot;: 'http://hl7.org/fhir/diagnosis-role'\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\ncodesystem &quot;SNOMEDCT&quot;: 'http://snomed.org'\ncodesystem &quot;RequestIntent&quot;: 'http://hl7.org/fhir/request-intent'\ncodesystem &quot;MedicationRequestCategory&quot;: 'http://hl7.org/fhir/medication-request-category'\n\nvalueset &quot;All Primary and Secondary Cancer&quot;:  'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.161'\nvalueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'\nvalueset &quot;Ethnicity&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.837'\nvalueset &quot;Hospice Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.1004.20'\nvalueset &quot;ONC Administrative Sex&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1'\nvalueset &quot;Palliative Care&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.162'\nvalueset &quot;Payer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591'\nvalueset &quot;Race&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.836'\nvalueset &quot;Schedule II and Schedule III Opioids&quot;:  'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.2'\nvalueset &quot;Schedule IV Benzodiazepines&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1125.1'\n\ncode &quot;Birthdate&quot;: '21112-8' from &quot;LOINC&quot; display 'Birth date'\ncode &quot;Order&quot;: 'order' from &quot;RequestIntent&quot; display 'Order'\ncode &quot;Community&quot;: 'community' from &quot;MedicationRequestCategory&quot; display 'Community'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n    default Interval[@2019-01-01T00:00:00.0, @2020-01-01T00:00:00.0)\n\ncontext Patient\n\ndefine &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot;:\n\t[&quot;Encounter&quot;: &quot;Encounter Inpatient&quot;] EncounterInpatient\n\t\twhere EncounterInpatient.status = 'finished'\n\t\t  and Global.&quot;LengthInDays&quot;(EncounterInpatient.period) &lt;= 120\n\t\t\tand EncounterInpatient.period ends during &quot;Measurement Period&quot;\n      and Global.CalendarAgeInYearsAt(ToDateTime(Patient.birthDate), start of FHIRHelpers.ToInterval(EncounterInpatient.period)) &gt;= 18\n\n// Defines to capture the relevant information that can be reused\ndefine &quot;Opioid Prescription&quot;:\n  [MedicationRequest: medication in &quot;Schedule II and Schedule III Opioids&quot;] OpioidMedicationRequest\n    where OpioidMedicationRequest.status in { 'active', 'completed' }\n      and OpioidMedicationRequest.intent = 'order'\n      and OpioidMedicationRequest.category ~ ToConcept(&quot;Community&quot;)\n\ndefine &quot;Benzodiazepine Prescription&quot;:\n  [MedicationRequest: medication in &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineMedicationRequest\n    where BenzodiazepineMedicationRequest.status in { 'active', 'completed' }\n      and BenzodiazepineMedicationRequest.intent = 'order'\n      and BenzodiazepineMedicationRequest.category ~ ToConcept(&quot;Community&quot;)\n\n// This was originally written as an intersect, but the description indicates either, so it should be a union...\ndefine &quot;Encounter with an Opioid or Benzodiazepine at Discharge&quot;:\n  (\n    &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Opioid Prescription&quot; OpioidPrescription\n        such that OpioidPrescription.authoredOn during InpatientEncounter.period\n    )\n  union (\n    &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Benzodiazepine Prescription&quot; BenzodiazepinePrescription\n        such that BenzodiazepinePrescription.authoredOn during InpatientEncounter.period\n    )\n\n/*\ndefine &quot;Encounter with an Opioid or Benzodiazepine at Discharge&quot;:\n\t(\n\t\t&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\t\twith [MedicationRequest: medication in &quot;Schedule II and Schedule III Opioids&quot;] OpioidsDischarge\n    \tsuch that OpioidsDischarge.authoredOn during InpatientEncounter.period\n    \t\tand OpioidsDischarge.intent = 'order'\n\t)\n  //Measure Review:\n  //The prior implementation was restricting &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot;\n  //to both Opioid AND Benzodiazepine at discharge.\n  //The following implementation restricts it to Opioid OR Benzodiazepine, per the description.\n  //Need validation from the measure developers that this meets the itent of the spec.\n\t\tunion (\n      &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\t    with [MedicationRequest: medication in &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineDischarge\n\t     such that BenzodiazepineDischarge.authoredOn during InpatientEncounter.period\n     \t  and BenzodiazepineDischarge.intent = 'order'\n\t\t )\n*/\n\ndefine &quot;Initial Population&quot;:\n  &quot;Encounter with an Opioid or Benzodiazepine at Discharge&quot;\n\ndefine &quot;Denominator&quot;:\n  &quot;Initial Population&quot;\n\ndefine &quot;Diagnosis of Primary or Secondary Cancer&quot;:\n  [&quot;Condition&quot;: code in &quot;All Primary and Secondary Cancer&quot;] Cancer\n    where Cancer.clinicalStatus = 'active'\n      and Cancer.verificationStatus = 'confirmed'\n\ndefine &quot;Palliative or Hospice Care Order&quot;:\n  ([&quot;ProcedureRequest&quot;: &quot;Palliative Care&quot;]\n    union [&quot;ProcedureRequest&quot;: &quot;Hospice Care&quot;]\n  ) PalliativeOrHospiceCare\n    where PalliativeOrHospiceCare.status in { 'active', 'completed' }\n      and PalliativeOrHospiceCare.intent = 'order'\n\ndefine &quot;Palliative or Hospice Care Procedure&quot;:\n  ([&quot;Procedure&quot;: &quot;Palliative Care&quot;]\n    union [&quot;Procedure&quot;: &quot;Hospice Care&quot;]\n  ) PalliativeOrHospiceCare\n    where PalliativeOrHospiceCare.status = 'completed'\n\ndefine &quot;Denominator Exclusion&quot;:\n  (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n    with &quot;Diagnosis of Primary or Secondary Cancer&quot; Cancer\n      such that Global.&quot;Normalize Onset&quot;(Cancer.onset) overlaps InpatientEncounter.period\n  )\n    union (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Palliative or Hospice Care Order&quot; PalliativeOrHospiceCareOrder\n        such that PalliativeOrHospiceCareOrder.authoredOn during InpatientEncounter.period\n    )\n    union (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with &quot;Palliative or Hospice Care Procedure&quot; PalliativeOrHospiceCare\n        such that Global.&quot;Normalize Interval&quot;(PalliativeOrHospiceCare.performed) during InpatientEncounter.period\n    )\n\n/*\ndefine &quot;Denominator Exclusions&quot;:\n\t(&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\twith [Condition: code in &quot;All Primary and Secondary Cancer&quot;]Cancer\n       such that Cancer.clinicalStatus = 'active'\n       and Cancer.verificationStatus = 'confirmed'\n       and Cancer.onset overlaps InpatientEncounter.period)\n\t\tunion (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n      with ([&quot;ProcedureRequest&quot;: &quot;Palliative Care&quot;]\n\t\t\tunion [&quot;ProcedureRequest&quot;: &quot;Hospice Care&quot;] ) PalliativeOrHospiceCareOrder\n\t\t\tsuch that  PalliativeOrHospiceCareOrder.intent = 'order'\n      and PalliativeOrHospiceCareOrder.authoredOn during InpatientEncounter.period)\n    union (&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n  with  ([&quot;Procedure&quot;: &quot;Palliative Care&quot;]\n    \tunion [&quot;Procedure&quot;: &quot;Hospice Care&quot;] ) PalliativeOrHospiceCarePerformed\n    \t\t\t\t\tsuch that PalliativeOrHospiceCarePerformed.performed overlaps InpatientEncounter.period)\n*/\n\ndefine &quot;Encounter with a Concurrent Opioid and Benzodiazepine at Discharge&quot;:\n  &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n    with &quot;Opioid Prescription&quot; OpioidPrescription\n      such that OpioidPrescription.authoredOn during InpatientEncounter.period\n    with &quot;Benzodiazepine Prescription&quot; BenzodiazepinePrescription\n      such that BenzodiazepinePrescription.authoredOn during InpatientEncounter.period\n\n/*\ndefine &quot;Encounter with a Concurrent Opioid and Benzodiazepine at Discharge&quot;:\n\tfrom &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter,\n\t\t[MedicationRequest: &quot;Schedule II and Schedule III Opioids&quot;] OpioidsDischarge,\n\t\t[MedicationRequest: &quot;Schedule IV Benzodiazepines&quot;] BenzodiazepineDischarge\n\t\t\twhere OpioidsDischarge.authoredOn during InpatientEncounter.period\n\t    \tand OpioidsDischarge.intent = 'order'\n\t\t\t\tand BenzodiazepineDischarge.authoredOn during InpatientEncounter.period\n        and BenzodiazepineDischarge.intent = 'order'\n\t\t\treturn InpatientEncounter\n*/\n\ndefine &quot;Encounter with Two or More Concurrent Opioids at Discharge&quot;:\n  &quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n    where Count(\n      &quot;Opioid Prescription&quot; OpioidPrescription\n        where OpioidPrescription.authoredOn during InpatientEncounter.period\n    ) &gt;= 2\n\n/*\ndefine &quot;Encounter with Two or More Concurrent Opioids at Discharge&quot;:\n\t&quot;Inpatient Encounter with Age Greater than or Equal to 18&quot; InpatientEncounter\n\t\twhere Count(\n\t\t\t[MedicationRequest: &quot;Schedule II and Schedule III Opioids&quot;] Opioids\n\t\t\t\twhere Opioids.authoredOn during InpatientEncounter.period\n\t\t) &gt;= 2\n*/\n\ndefine &quot;Numerator&quot;:\n  &quot;Encounter with Two or More Concurrent Opioids at Discharge&quot;\n    union &quot;Encounter with a Concurrent Opioid and Benzodiazepine at Discharge&quot;\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
  },
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "cqf-tooling"
    }
  } ],
  "version": "2.0.000",
  "name": "EXM506_FHIR3",
  "status": "active",
  "experimental": true,
  "type": {
    "coding": [ {
      "system": "http://hl7.org/fhir/codesystem-library-type.html",
      "code": "logic-library"
    } ]
  },
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBFWE01MDZfRkhJUjMgdmVyc2lvbiAnMi4wLjAwMCcKCnVzaW5nIEZISVIgdmVyc2lvbiAnMy4wLjAnCgppbmNsdWRlIE1BVEdsb2JhbENvbW1vbkZ1bmN0aW9uc19GSElSMyB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgR2xvYmFsCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnMy4wLjAnIGNhbGxlZCBGSElSSGVscGVycwppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50c19GSElSMyB2ZXJzaW9uICcxLjAuMCcgY2FsbGVkIFNERQoKY29kZXN5c3RlbSAiRGlhZ25vc2lzIFJvbGUiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9kaWFnbm9zaXMtcm9sZScKY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycKY29kZXN5c3RlbSAiU05PTUVEQ1QiOiAnaHR0cDovL3Nub21lZC5vcmcnCmNvZGVzeXN0ZW0gIlJlcXVlc3RJbnRlbnQiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9yZXF1ZXN0LWludGVudCcKY29kZXN5c3RlbSAiTWVkaWNhdGlvblJlcXVlc3RDYXRlZ29yeSI6ICdodHRwOi8vaGw3Lm9yZy9maGlyL21lZGljYXRpb24tcmVxdWVzdC1jYXRlZ29yeScKCnZhbHVlc2V0ICJBbGwgUHJpbWFyeSBhbmQgU2Vjb25kYXJ5IENhbmNlciI6ICAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTExLjE2MScKdmFsdWVzZXQgIkVuY291bnRlciBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjY2LjUuMzA3Jwp2YWx1ZXNldCAiRXRobmljaXR5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExNDIyMi40LjExLjgzNycKdmFsdWVzZXQgIkhvc3BpY2UgQ2FyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4zMTU3LjEwMDQuMjAnCnZhbHVlc2V0ICJPTkMgQWRtaW5pc3RyYXRpdmUgU2V4IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMScKdmFsdWVzZXQgIlBhbGxpYXRpdmUgQ2FyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTEuMTYyJwp2YWx1ZXNldCAiUGF5ZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTE0MjIyLjQuMTEuMzU5MScKdmFsdWVzZXQgIlJhY2UiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTE0MjIyLjQuMTEuODM2Jwp2YWx1ZXNldCAiU2NoZWR1bGUgSUkgYW5kIFNjaGVkdWxlIElJSSBPcGlvaWRzIjogICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMjUuMicKdmFsdWVzZXQgIlNjaGVkdWxlIElWIEJlbnpvZGlhemVwaW5lcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMjUuMScKCmNvZGUgIkJpcnRoZGF0ZSI6ICcyMTExMi04JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQmlydGggZGF0ZScKY29kZSAiT3JkZXIiOiAnb3JkZXInIGZyb20gIlJlcXVlc3RJbnRlbnQiIGRpc3BsYXkgJ09yZGVyJwpjb2RlICJDb21tdW5pdHkiOiAnY29tbXVuaXR5JyBmcm9tICJNZWRpY2F0aW9uUmVxdWVzdENhdGVnb3J5IiBkaXNwbGF5ICdDb21tdW5pdHknCgpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+CiAgICBkZWZhdWx0IEludGVydmFsW0AyMDE5LTAxLTAxVDAwOjAwOjAwLjAsIEAyMDIwLTAxLTAxVDAwOjAwOjAwLjApCgpjb250ZXh0IFBhdGllbnQKCmRlZmluZSAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiOgoJWyJFbmNvdW50ZXIiOiAiRW5jb3VudGVyIElucGF0aWVudCJdIEVuY291bnRlcklucGF0aWVudAoJCXdoZXJlIEVuY291bnRlcklucGF0aWVudC5zdGF0dXMgPSAnZmluaXNoZWQnCgkJICBhbmQgR2xvYmFsLiJMZW5ndGhJbkRheXMiKEVuY291bnRlcklucGF0aWVudC5wZXJpb2QpIDw9IDEyMAoJCQlhbmQgRW5jb3VudGVySW5wYXRpZW50LnBlcmlvZCBlbmRzIGR1cmluZyAiTWVhc3VyZW1lbnQgUGVyaW9kIgogICAgICBhbmQgR2xvYmFsLkNhbGVuZGFyQWdlSW5ZZWFyc0F0KFRvRGF0ZVRpbWUoUGF0aWVudC5iaXJ0aERhdGUpLCBzdGFydCBvZiBGSElSSGVscGVycy5Ub0ludGVydmFsKEVuY291bnRlcklucGF0aWVudC5wZXJpb2QpKSA+PSAxOAoKLy8gRGVmaW5lcyB0byBjYXB0dXJlIHRoZSByZWxldmFudCBpbmZvcm1hdGlvbiB0aGF0IGNhbiBiZSByZXVzZWQKZGVmaW5lICJPcGlvaWQgUHJlc2NyaXB0aW9uIjoKICBbTWVkaWNhdGlvblJlcXVlc3Q6IG1lZGljYXRpb24gaW4gIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyJdIE9waW9pZE1lZGljYXRpb25SZXF1ZXN0CiAgICB3aGVyZSBPcGlvaWRNZWRpY2F0aW9uUmVxdWVzdC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQogICAgICBhbmQgT3Bpb2lkTWVkaWNhdGlvblJlcXVlc3QuaW50ZW50ID0gJ29yZGVyJwogICAgICBhbmQgT3Bpb2lkTWVkaWNhdGlvblJlcXVlc3QuY2F0ZWdvcnkgfiBUb0NvbmNlcHQoIkNvbW11bml0eSIpCgpkZWZpbmUgIkJlbnpvZGlhemVwaW5lIFByZXNjcmlwdGlvbiI6CiAgW01lZGljYXRpb25SZXF1ZXN0OiBtZWRpY2F0aW9uIGluICJTY2hlZHVsZSBJViBCZW56b2RpYXplcGluZXMiXSBCZW56b2RpYXplcGluZU1lZGljYXRpb25SZXF1ZXN0CiAgICB3aGVyZSBCZW56b2RpYXplcGluZU1lZGljYXRpb25SZXF1ZXN0LnN0YXR1cyBpbiB7ICdhY3RpdmUnLCAnY29tcGxldGVkJyB9CiAgICAgIGFuZCBCZW56b2RpYXplcGluZU1lZGljYXRpb25SZXF1ZXN0LmludGVudCA9ICdvcmRlcicKICAgICAgYW5kIEJlbnpvZGlhemVwaW5lTWVkaWNhdGlvblJlcXVlc3QuY2F0ZWdvcnkgfiBUb0NvbmNlcHQoIkNvbW11bml0eSIpCgovLyBUaGlzIHdhcyBvcmlnaW5hbGx5IHdyaXR0ZW4gYXMgYW4gaW50ZXJzZWN0LCBidXQgdGhlIGRlc2NyaXB0aW9uIGluZGljYXRlcyBlaXRoZXIsIHNvIGl0IHNob3VsZCBiZSBhIHVuaW9uLi4uCmRlZmluZSAiRW5jb3VudGVyIHdpdGggYW4gT3Bpb2lkIG9yIEJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSI6CiAgKAogICAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICAgICAgd2l0aCAiT3Bpb2lkIFByZXNjcmlwdGlvbiIgT3Bpb2lkUHJlc2NyaXB0aW9uCiAgICAgICAgc3VjaCB0aGF0IE9waW9pZFByZXNjcmlwdGlvbi5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgICApCiAgdW5pb24gKAogICAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICAgICAgd2l0aCAiQmVuem9kaWF6ZXBpbmUgUHJlc2NyaXB0aW9uIiBCZW56b2RpYXplcGluZVByZXNjcmlwdGlvbgogICAgICAgIHN1Y2ggdGhhdCBCZW56b2RpYXplcGluZVByZXNjcmlwdGlvbi5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgICApCgovKgpkZWZpbmUgIkVuY291bnRlciB3aXRoIGFuIE9waW9pZCBvciBCZW56b2RpYXplcGluZSBhdCBEaXNjaGFyZ2UiOgoJKAoJCSJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCgkJd2l0aCBbTWVkaWNhdGlvblJlcXVlc3Q6IG1lZGljYXRpb24gaW4gIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyJdIE9waW9pZHNEaXNjaGFyZ2UKICAgIAlzdWNoIHRoYXQgT3Bpb2lkc0Rpc2NoYXJnZS5hdXRob3JlZE9uIGR1cmluZyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgICAJCWFuZCBPcGlvaWRzRGlzY2hhcmdlLmludGVudCA9ICdvcmRlcicKCSkKICAvL01lYXN1cmUgUmV2aWV3OgogIC8vVGhlIHByaW9yIGltcGxlbWVudGF0aW9uIHdhcyByZXN0cmljdGluZyAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiCiAgLy90byBib3RoIE9waW9pZCBBTkQgQmVuem9kaWF6ZXBpbmUgYXQgZGlzY2hhcmdlLgogIC8vVGhlIGZvbGxvd2luZyBpbXBsZW1lbnRhdGlvbiByZXN0cmljdHMgaXQgdG8gT3Bpb2lkIE9SIEJlbnpvZGlhemVwaW5lLCBwZXIgdGhlIGRlc2NyaXB0aW9uLgogIC8vTmVlZCB2YWxpZGF0aW9uIGZyb20gdGhlIG1lYXN1cmUgZGV2ZWxvcGVycyB0aGF0IHRoaXMgbWVldHMgdGhlIGl0ZW50IG9mIHRoZSBzcGVjLgoJCXVuaW9uICgKICAgICAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKCSAgICB3aXRoIFtNZWRpY2F0aW9uUmVxdWVzdDogbWVkaWNhdGlvbiBpbiAiU2NoZWR1bGUgSVYgQmVuem9kaWF6ZXBpbmVzIl0gQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UKCSAgICAgc3VjaCB0aGF0IEJlbnpvZGlhemVwaW5lRGlzY2hhcmdlLmF1dGhvcmVkT24gZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QKICAgICAJICBhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuaW50ZW50ID0gJ29yZGVyJwoJCSApCiovCgpkZWZpbmUgIkluaXRpYWwgUG9wdWxhdGlvbiI6CiAgIkVuY291bnRlciB3aXRoIGFuIE9waW9pZCBvciBCZW56b2RpYXplcGluZSBhdCBEaXNjaGFyZ2UiCgpkZWZpbmUgIkRlbm9taW5hdG9yIjoKICAiSW5pdGlhbCBQb3B1bGF0aW9uIgoKZGVmaW5lICJEaWFnbm9zaXMgb2YgUHJpbWFyeSBvciBTZWNvbmRhcnkgQ2FuY2VyIjoKICBbIkNvbmRpdGlvbiI6IGNvZGUgaW4gIkFsbCBQcmltYXJ5IGFuZCBTZWNvbmRhcnkgQ2FuY2VyIl0gQ2FuY2VyCiAgICB3aGVyZSBDYW5jZXIuY2xpbmljYWxTdGF0dXMgPSAnYWN0aXZlJwogICAgICBhbmQgQ2FuY2VyLnZlcmlmaWNhdGlvblN0YXR1cyA9ICdjb25maXJtZWQnCgpkZWZpbmUgIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIE9yZGVyIjoKICAoWyJQcm9jZWR1cmVSZXF1ZXN0IjogIlBhbGxpYXRpdmUgQ2FyZSJdCiAgICB1bmlvbiBbIlByb2NlZHVyZVJlcXVlc3QiOiAiSG9zcGljZSBDYXJlIl0KICApIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlCiAgICB3aGVyZSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZS5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQogICAgICBhbmQgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmUuaW50ZW50ID0gJ29yZGVyJwoKZGVmaW5lICJQYWxsaWF0aXZlIG9yIEhvc3BpY2UgQ2FyZSBQcm9jZWR1cmUiOgogIChbIlByb2NlZHVyZSI6ICJQYWxsaWF0aXZlIENhcmUiXQogICAgdW5pb24gWyJQcm9jZWR1cmUiOiAiSG9zcGljZSBDYXJlIl0KICApIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlCiAgICB3aGVyZSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZS5zdGF0dXMgPSAnY29tcGxldGVkJwoKZGVmaW5lICJEZW5vbWluYXRvciBFeGNsdXNpb24iOgogICgiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiIElucGF0aWVudEVuY291bnRlcgogICAgd2l0aCAiRGlhZ25vc2lzIG9mIFByaW1hcnkgb3IgU2Vjb25kYXJ5IENhbmNlciIgQ2FuY2VyCiAgICAgIHN1Y2ggdGhhdCBHbG9iYWwuIk5vcm1hbGl6ZSBPbnNldCIoQ2FuY2VyLm9uc2V0KSBvdmVybGFwcyBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kCiAgKQogICAgdW5pb24gKCJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCiAgICAgIHdpdGggIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIE9yZGVyIiBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZU9yZGVyCiAgICAgICAgc3VjaCB0aGF0IFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlT3JkZXIuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAogICAgKQogICAgdW5pb24gKCJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCiAgICAgIHdpdGggIlBhbGxpYXRpdmUgb3IgSG9zcGljZSBDYXJlIFByb2NlZHVyZSIgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmUKICAgICAgICBzdWNoIHRoYXQgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlLnBlcmZvcm1lZCkgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QKICAgICkKCi8qCmRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9ucyI6CgkoIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKCXdpdGggW0NvbmRpdGlvbjogY29kZSBpbiAiQWxsIFByaW1hcnkgYW5kIFNlY29uZGFyeSBDYW5jZXIiXUNhbmNlcgogICAgICAgc3VjaCB0aGF0IENhbmNlci5jbGluaWNhbFN0YXR1cyA9ICdhY3RpdmUnCiAgICAgICBhbmQgQ2FuY2VyLnZlcmlmaWNhdGlvblN0YXR1cyA9ICdjb25maXJtZWQnCiAgICAgICBhbmQgQ2FuY2VyLm9uc2V0IG92ZXJsYXBzIElucGF0aWVudEVuY291bnRlci5wZXJpb2QpCgkJdW5pb24gKCJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCiAgICAgIHdpdGggKFsiUHJvY2VkdXJlUmVxdWVzdCI6ICJQYWxsaWF0aXZlIENhcmUiXQoJCQl1bmlvbiBbIlByb2NlZHVyZVJlcXVlc3QiOiAiSG9zcGljZSBDYXJlIl0gKSBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZU9yZGVyCgkJCXN1Y2ggdGhhdCAgUGFsbGlhdGl2ZU9ySG9zcGljZUNhcmVPcmRlci5pbnRlbnQgPSAnb3JkZXInCiAgICAgIGFuZCBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZU9yZGVyLmF1dGhvcmVkT24gZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QpCiAgICB1bmlvbiAoIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICB3aXRoICAoWyJQcm9jZWR1cmUiOiAiUGFsbGlhdGl2ZSBDYXJlIl0KICAgIAl1bmlvbiBbIlByb2NlZHVyZSI6ICJIb3NwaWNlIENhcmUiXSApIFBhbGxpYXRpdmVPckhvc3BpY2VDYXJlUGVyZm9ybWVkCiAgICAJCQkJCXN1Y2ggdGhhdCBQYWxsaWF0aXZlT3JIb3NwaWNlQ2FyZVBlcmZvcm1lZC5wZXJmb3JtZWQgb3ZlcmxhcHMgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZCkKKi8KCmRlZmluZSAiRW5jb3VudGVyIHdpdGggYSBDb25jdXJyZW50IE9waW9pZCBhbmQgQmVuem9kaWF6ZXBpbmUgYXQgRGlzY2hhcmdlIjoKICAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiIElucGF0aWVudEVuY291bnRlcgogICAgd2l0aCAiT3Bpb2lkIFByZXNjcmlwdGlvbiIgT3Bpb2lkUHJlc2NyaXB0aW9uCiAgICAgIHN1Y2ggdGhhdCBPcGlvaWRQcmVzY3JpcHRpb24uYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAogICAgd2l0aCAiQmVuem9kaWF6ZXBpbmUgUHJlc2NyaXB0aW9uIiBCZW56b2RpYXplcGluZVByZXNjcmlwdGlvbgogICAgICBzdWNoIHRoYXQgQmVuem9kaWF6ZXBpbmVQcmVzY3JpcHRpb24uYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAoKLyoKZGVmaW5lICJFbmNvdW50ZXIgd2l0aCBhIENvbmN1cnJlbnQgT3Bpb2lkIGFuZCBCZW56b2RpYXplcGluZSBhdCBEaXNjaGFyZ2UiOgoJZnJvbSAiSW5wYXRpZW50IEVuY291bnRlciB3aXRoIEFnZSBHcmVhdGVyIHRoYW4gb3IgRXF1YWwgdG8gMTgiIElucGF0aWVudEVuY291bnRlciwKCQlbTWVkaWNhdGlvblJlcXVlc3Q6ICJTY2hlZHVsZSBJSSBhbmQgU2NoZWR1bGUgSUlJIE9waW9pZHMiXSBPcGlvaWRzRGlzY2hhcmdlLAoJCVtNZWRpY2F0aW9uUmVxdWVzdDogIlNjaGVkdWxlIElWIEJlbnpvZGlhemVwaW5lcyJdIEJlbnpvZGlhemVwaW5lRGlzY2hhcmdlCgkJCXdoZXJlIE9waW9pZHNEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAoJICAgIAlhbmQgT3Bpb2lkc0Rpc2NoYXJnZS5pbnRlbnQgPSAnb3JkZXInCgkJCQlhbmQgQmVuem9kaWF6ZXBpbmVEaXNjaGFyZ2UuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAogICAgICAgIGFuZCBCZW56b2RpYXplcGluZURpc2NoYXJnZS5pbnRlbnQgPSAnb3JkZXInCgkJCXJldHVybiBJbnBhdGllbnRFbmNvdW50ZXIKKi8KCmRlZmluZSAiRW5jb3VudGVyIHdpdGggVHdvIG9yIE1vcmUgQ29uY3VycmVudCBPcGlvaWRzIGF0IERpc2NoYXJnZSI6CiAgIklucGF0aWVudCBFbmNvdW50ZXIgd2l0aCBBZ2UgR3JlYXRlciB0aGFuIG9yIEVxdWFsIHRvIDE4IiBJbnBhdGllbnRFbmNvdW50ZXIKICAgIHdoZXJlIENvdW50KAogICAgICAiT3Bpb2lkIFByZXNjcmlwdGlvbiIgT3Bpb2lkUHJlc2NyaXB0aW9uCiAgICAgICAgd2hlcmUgT3Bpb2lkUHJlc2NyaXB0aW9uLmF1dGhvcmVkT24gZHVyaW5nIElucGF0aWVudEVuY291bnRlci5wZXJpb2QKICAgICkgPj0gMgoKLyoKZGVmaW5lICJFbmNvdW50ZXIgd2l0aCBUd28gb3IgTW9yZSBDb25jdXJyZW50IE9waW9pZHMgYXQgRGlzY2hhcmdlIjoKCSJJbnBhdGllbnQgRW5jb3VudGVyIHdpdGggQWdlIEdyZWF0ZXIgdGhhbiBvciBFcXVhbCB0byAxOCIgSW5wYXRpZW50RW5jb3VudGVyCgkJd2hlcmUgQ291bnQoCgkJCVtNZWRpY2F0aW9uUmVxdWVzdDogIlNjaGVkdWxlIElJIGFuZCBTY2hlZHVsZSBJSUkgT3Bpb2lkcyJdIE9waW9pZHMKCQkJCXdoZXJlIE9waW9pZHMuYXV0aG9yZWRPbiBkdXJpbmcgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZAoJCSkgPj0gMgoqLwoKZGVmaW5lICJOdW1lcmF0b3IiOgogICJFbmNvdW50ZXIgd2l0aCBUd28gb3IgTW9yZSBDb25jdXJyZW50IE9waW9pZHMgYXQgRGlzY2hhcmdlIgogICAgdW5pb24gIkVuY291bnRlciB3aXRoIGEgQ29uY3VycmVudCBPcGlvaWQgYW5kIEJlbnpvZGlhemVwaW5lIGF0IERpc2NoYXJnZSIK"
  } ]
}