{
  "resourceType": "Library",
  "id": "library-EXM108-8.3.000",
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "#cqf-tooling"
    }
  } ],
  "url": "http://fhir.org/guides/dbcg/connectathon/Library/EXM108",
  "version": "8.3.000",
  "name": "EXM108",
  "status": "active",
  "experimental": true,
  "type": {
    "coding": [ {
      "system": "http://terminology.hl7.org/CodeSystem/library-type",
      "code": "logic-library"
    } ]
  },
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBFWE0xMDggdmVyc2lvbiAnOC4zLjAwMCcKLy9mb3IgMjAyMCByZXBvcnRpbmcgeWVhci4gUURNIHRvIFFJLTQKLy9WZW5vdXMgVGhyb21ib2VtYm9saXNtIFByb3BoeWxheGlzCi8vQXV0aG9yOiBUSkMKCnVzaW5nIEZISVIgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMC4xJyBjYWxsZWQgRkhJUkhlbHBlcnMKaW5jbHVkZSBNQVRHbG9iYWxDb21tb25GdW5jdGlvbnMgdmVyc2lvbiAnNS4wLjAwMCcgY2FsbGVkIEdsb2JhbAppbmNsdWRlIFN1cHBsZW1lbnRhbERhdGFFbGVtZW50cyB2ZXJzaW9uICcyLjAuMCcgY2FsbGVkIFNERQppbmNsdWRlIFZURUlDVSB2ZXJzaW9uICc1LjAuMDAwJyBjYWxsZWQgVlRFSUNVCmluY2x1ZGUgVEpDT3ZlcmFsbCB2ZXJzaW9uICc1LjAuMDAwJyBjYWxsZWQgVEpDCgpjb2Rlc3lzdGVtICJTTk9NRURDVCI6ICdodHRwOi8vc25vbWVkLmluZm8vc2N0LzczMTAwMDEyNDEwOCcKY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycKLy8gTk9URTogUjQgY29kZSBzeXN0ZW0gVVJMcyBjaGFuZ2VkIHRvIGJlIGJhc2VkIG9uIHRlcm1pbm9sb2d5LmhsNy5vcmcuLi4KY29kZXN5c3RlbSAiUmVxdWVzdEludGVudCI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL3JlcXVlc3QtaW50ZW50JwovL05PVEU6IENyZWF0ZWQgZm9yIEFjdFByaW9yaXR5IGZvciBFbmNvdW50ZXIuY2F0ZWdvcnkgd2hpY2ggaXMgY29kZWFibGVDb25jZXB0CmNvZGVzeXN0ZW0gIkFjdFByaW9yaXR5IjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL1ZhbHVlU2V0L3YzLUFjdFByaW9yaXR5JwoKdmFsdWVzZXQgIkRldmljZSBBcHBsaWNhdGlvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTAuNDgnCnZhbHVlc2V0ICJBdHJpYWwgRmlicmlsbGF0aW9uL0ZsdXR0ZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjIwMicKdmFsdWVzZXQgIkNvbWZvcnQgTWVhc3VyZXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzEuMy42LjEuNC4xLjMzODk1LjEuMy4wLjQ1Jwp2YWx1ZXNldCAiRGlyZWN0IFRocm9tYmluIEluaGliaXRvciI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjA1Jwp2YWx1ZXNldCAiRW1lcmdlbmN5IERlcGFydG1lbnQgVmlzaXQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjI5MicKdmFsdWVzZXQgIkdlbmVyYWwgb3IgTmV1cmF4aWFsIEFuZXN0aGVzaWEiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjY2LjUuMTc0MycKdmFsdWVzZXQgIkdlbmVyYWwgU3VyZ2VyeSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjU1Jwp2YWx1ZXNldCAiR2x5Y29wcm90ZWluIElJYi9JSUlhIEluaGliaXRvcnMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDQ1LjQxJwp2YWx1ZXNldCAiR3JhZHVhdGVkIGNvbXByZXNzaW9uIHN0b2NraW5ncyAoR0NTKSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjU2Jwp2YWx1ZXNldCAiR3luZWNvbG9naWNhbCBTdXJnZXJ5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yNTcnCnZhbHVlc2V0ICJIZW1vcnJoYWdpYyBTdHJva2UiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjIxMicKdmFsdWVzZXQgIkhpcCBGcmFjdHVyZSBTdXJnZXJ5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yNTgnCnZhbHVlc2V0ICJIaXAgUmVwbGFjZW1lbnQgU3VyZ2VyeSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjU5Jwp2YWx1ZXNldCAiSW5qZWN0YWJsZSBGYWN0b3IgWGEgSW5oaWJpdG9yIGZvciBWVEUgUHJvcGh5bGF4aXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjIxMScKdmFsdWVzZXQgIklOUiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjEzJwp2YWx1ZXNldCAiSW50ZXJtaXR0ZW50IHBuZXVtYXRpYyBjb21wcmVzc2lvbiBkZXZpY2VzIChJUEMpIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yMTQnCnZhbHVlc2V0ICJJbnRyYWNyYW5pYWwgTmV1cm9zdXJnZXJ5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yNjAnCnZhbHVlc2V0ICJJbnRyYXZlbm91cyByb3V0ZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjIyJwp2YWx1ZXNldCAiSXNjaGVtaWMgU3Ryb2tlIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yNDcnCnZhbHVlc2V0ICJLbmVlIFJlcGxhY2VtZW50IFN1cmdlcnkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjI2MScKdmFsdWVzZXQgIkxvdyBEb3NlIFVuZnJhY3Rpb25hdGVkIEhlcGFyaW4gZm9yIFZURSBQcm9waHlsYXhpcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwNDUuMzknCnZhbHVlc2V0ICJMb3cgTW9sZWN1bGFyIFdlaWdodCBIZXBhcmluIGZvciBWVEUgUHJvcGh5bGF4aXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjIxOScKdmFsdWVzZXQgIkxvdyBSaXNrIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS40MDAnCnZhbHVlc2V0ICJNZWRpY2FsIFJlYXNvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuNDczJwp2YWx1ZXNldCAiTWVudGFsIEhlYWx0aCBEaWFnbm9zZXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDMuMTA1LjEyLjEwMDQnCnZhbHVlc2V0ICJPYnN0ZXRyaWNzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yNjMnCnZhbHVlc2V0ICJPYnN0ZXRyaWNzIFZURSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjY0Jwp2YWx1ZXNldCAiT3JhbCBGYWN0b3IgWGEgSW5oaWJpdG9yIGZvciBWVEUgUHJvcGh5bGF4aXMgb3IgVlRFIFRyZWF0bWVudCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMTM0Jwp2YWx1ZXNldCAiUGF0aWVudCBSZWZ1c2FsIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS45MycKdmFsdWVzZXQgIlN1YmN1dGFuZW91cyByb3V0ZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjIzJwp2YWx1ZXNldCAiVW5mcmFjdGlvbmF0ZWQgSGVwYXJpbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjE4Jwp2YWx1ZXNldCAiVXJvbG9naWNhbCBTdXJnZXJ5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjExNy4xLjcuMS4yNzInCnZhbHVlc2V0ICJWZW5vdXMgZm9vdCBwdW1wcyAoVkZQKSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjMwJwp2YWx1ZXNldCAiVmVub3VzIFRocm9tYm9lbWJvbGlzbSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy4xMTcuMS43LjEuMjc5Jwp2YWx1ZXNldCAiV2FyZmFyaW4iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMTE3LjEuNy4xLjIzMicKdmFsdWVzZXQgIkludGVuc2l2ZSBDYXJlIFVuaXQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTEwLjIzJwoKY29kZSAiUmlzayBmb3IgdmVub3VzIHRocm9tYm9lbWJvbGlzbSI6ICc3MjEzNi01JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnUmlzayBmb3IgdmVub3VzIHRocm9tYm9lbWJvbGlzbScKCmNvbnRleHQgUGF0aWVudAoKZGVmaW5lICJTREUgRXRobmljaXR5IjoKICBTREUuIlNERSBFdGhuaWNpdHkiCgpkZWZpbmUgIlNERSBQYXllciI6CglTREUuIlNERSBQYXllciIKCmRlZmluZSAiU0RFIFJhY2UiOgogIFNERS4iU0RFIFJhY2UiCgpkZWZpbmUgIlNERSBTZXgiOgoJU0RFLiJTREUgU2V4IgoKZGVmaW5lICJJbml0aWFsIFBvcHVsYXRpb24iOgogICJFbmNvdW50ZXIgV2l0aCBBZ2UgUmFuZ2UgYW5kIFdpdGhvdXQgVlRFIERpYWdub3NpcyBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIgoKLy8gTm90ZTogYWRkZWQgRkhJUkhlbHBlcnMuVG9EYXRlKCkgaW4gUjQKZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBBZ2UgUmFuZ2UgYW5kIFdpdGhvdXQgVlRFIERpYWdub3NpcyBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIjoKICAgICggR2xvYmFsLiJJbnBhdGllbnQgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXIKICAgIAkJd2l0aCBbIlBhdGllbnQiXSBCaXJ0aERhdGUKICAgIAkJCXN1Y2ggdGhhdCBHbG9iYWwuIkNhbGVuZGFyQWdlSW5ZZWFyc0F0IihGSElSSGVscGVycy5Ub0RhdGUoQmlydGhEYXRlLmJpcnRoRGF0ZSksIHN0YXJ0IG9mIElucGF0aWVudEVuY291bnRlci5wZXJpb2QpID49IDE4CiAgICApCiAgICBpbnRlcnNlY3QgIkFkbWlzc2lvbiBXaXRob3V0IFZURSBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIgoKICBkZWZpbmUgIkFkbWlzc2lvbiBXaXRob3V0IFZURSBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIjoKCSAgCUdsb2JhbC4iSW5wYXRpZW50IEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyCgkJICAgIHdoZXJlIG5vdCAoZXhpc3RzIChHbG9iYWwuRW5jb3VudGVyRGlhZ25vc2lzKElucGF0aWVudEVuY291bnRlcikpIEVuY291bnRlckRpYWdub3NpcwogICAgICAgICAgICAgIHdoZXJlIChFbmNvdW50ZXJEaWFnbm9zaXMuY29kZSBpbiAiT2JzdGV0cmljcyIKCQkJCQkJCQlvciBFbmNvdW50ZXJEaWFnbm9zaXMuY29kZSBpbiAiVmVub3VzIFRocm9tYm9lbWJvbGlzbSIKCQkJCQkJCQlvciBFbmNvdW50ZXJEaWFnbm9zaXMuY29kZSBpbiAiT2JzdGV0cmljcyBWVEUiCgkJCSAgICAgICAgICkKICAgICAgICApCgpkZWZpbmUgIkRlbm9taW5hdG9yIjoKICAgICAgIkluaXRpYWwgUG9wdWxhdGlvbiIKCmRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9uIjoKICAgICJFbmNvdW50ZXIgTGVzcyBUaGFuIDIgRGF5cyIKICAgICB1bmlvbiAiRW5jb3VudGVyIFdpdGggSUNVIExvY2F0aW9uIFN0YXkgMSBEYXkgb3IgTW9yZSIKICAgICB1bmlvbiAiRW5jb3VudGVyIFdpdGggUHJpbmNpcGFsIERpYWdub3NpcyBvZiBNZW50YWwgRGlzb3JkZXIgb3IgU3Ryb2tlIgogICAgIHVuaW9uICJFbmNvdW50ZXIgV2l0aCBQcmluY2lwYWwgUHJvY2VkdXJlIG9mIFNDSVAgVlRFIFNlbGVjdGVkIFN1cmdlcnkiCiAgICAgdW5pb24gIkVuY291bnRlciBXaXRoIEludGVydmVudGlvbiBDb21mb3J0IE1lYXN1cmVzIEZyb20gRGF5IG9mIFN0YXJ0IG9mIEhvc3BpdGFsaXphdGlvbiBUbyBEYXkgQWZ0ZXIgQWRtaXNzaW9uIgogICAgIHVuaW9uICJFbmNvdW50ZXIgV2l0aCBJbnRlcnZlbnRpb24gQ29tZm9ydCBNZWFzdXJlcyBvbiBEYXkgb2Ygb3IgRGF5IEFmdGVyIFByb2NlZHVyZSIKCmRlZmluZSAiRW5jb3VudGVyIExlc3MgVGhhbiAyIERheXMiOgogICJFbmNvdW50ZXIgV2l0aCBBZ2UgUmFuZ2UgYW5kIFdpdGhvdXQgVlRFIERpYWdub3NpcyBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIiBRdWFsaWZ5aW5nRW5jb3VudGVyCiAgCXdoZXJlIEdsb2JhbC4iTGVuZ3RoSW5EYXlzIihRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZCk8IDIKCmRlZmluZSAiRW5jb3VudGVyIFdpdGggSUNVIExvY2F0aW9uIFN0YXkgMSBEYXkgb3IgTW9yZSI6CiAgIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgIHdoZXJlIGV4aXN0cyAoIFF1YWxpZnlpbmdFbmNvdW50ZXIubG9jYXRpb24gTG9jYXRpb24KICAgIAkJd2hlcmUgR2xvYmFsLkdldExvY2F0aW9uKExvY2F0aW9uLmxvY2F0aW9uKS50eXBlIGluICJJbnRlbnNpdmUgQ2FyZSBVbml0IgogICAgCQkJYW5kIEdsb2JhbC4iTGVuZ3RoSW5EYXlzIihMb2NhdGlvbi5wZXJpb2QpPj0gMQogICAgCQkJYW5kIExvY2F0aW9uLnBlcmlvZCBzdGFydHMgZHVyaW5nIFRKQy4iQ2FsZW5kYXJEYXlPZk9yRGF5QWZ0ZXIiKHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kKQoJICAgICkKCmRlZmluZSAiRW5jb3VudGVyIFdpdGggUHJpbmNpcGFsIERpYWdub3NpcyBvZiBNZW50YWwgRGlzb3JkZXIgb3IgU3Ryb2tlIjoKICAiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlcgogICAgd2hlcmUgR2xvYmFsLiJQcmluY2lwYWxEaWFnbm9zaXMiKFF1YWxpZnlpbmdFbmNvdW50ZXIpLmNvZGUgaW4gIk1lbnRhbCBIZWFsdGggRGlhZ25vc2VzIgogICAgICAgIG9yIEdsb2JhbC4iUHJpbmNpcGFsRGlhZ25vc2lzIihRdWFsaWZ5aW5nRW5jb3VudGVyKS5jb2RlIGluICJIZW1vcnJoYWdpYyBTdHJva2UiCiAgICAgICAgb3IgR2xvYmFsLiJQcmluY2lwYWxEaWFnbm9zaXMiKFF1YWxpZnlpbmdFbmNvdW50ZXIpLmNvZGUgaW4gIklzY2hlbWljIFN0cm9rZSIKCi8qIE5PVEU6IDIgb3B0aW9ucyB0byBleHByZXNzIFByaW5jaXBhbCBQcm9jZWR1cmUgdG8gcmV0cml2ZSAiZW5jb3VudGVyIFByb2NlZHVyZSBhcyBhbiB1cmwiIGFuZCBwcm9lZHVyZSAicmFuayBhcyBleHRlbnNpb24iIGluIFI0CiAgICAgICAgICBWVEUtMSB1c2VzIE9wdGlvbiAxIC0gZ2VuZXJpYyBleHRlbnNpb24gZnVudGlvbgogICAgICAgICAgVlRFLTIgdXNlcyBPcHRpb24gMiAtIFNwZWNpZmljIGV4dGVuc2lvbiBmdW5jdGlvbnMKICBUT0RPOiAgTWFwcGluZyBUYWJsZSBuZWVkcyByZXZpc2lvbiBvbiB1c2luZyAiRW5jb3VudGVyLnByb2NlZHVyZS5jb2RlIiwgIkVuY291bnRlci5wcm9jZWR1cmUuc2VxdWVuY2UiCiovCgpkZWZpbmUgIkVuY291bnRlciBXaXRoIFByaW5jaXBhbCBQcm9jZWR1cmUgb2YgU0NJUCBWVEUgU2VsZWN0ZWQgU3VyZ2VyeSI6CiAgZnJvbQogICAgICAiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlciwKICAgICAgIlNDSVAgVlRFIFNlbGVjdGVkIFN1cmdlcnkiIFNlbGVjdGVkUHJvY2VkdXJlCiAgICAgIGxldCBFbmNvdW50ZXJQcm9jZWR1cmU6IEdsb2JhbC5HZXRFeHRlbnNpb24oUXVhbGlmeWluZ0VuY291bnRlciwgJ3FpY29yZS1lbmNvdW50ZXItcHJvY2VkdXJlJykKICB3aGVyZSBGSElSSGVscGVycy5Ub0ludGVnZXIoR2xvYmFsLkdldEV4dGVuc2lvbihFbmNvdW50ZXJQcm9jZWR1cmUsICdyYW5rJykudmFsdWUgYXMgRkhJUi5wb3NpdGl2ZUludCkgPSAxCiAgICAgIGFuZCBHbG9iYWwuR2V0SWQoRkhJUkhlbHBlcnMuVG9TdHJpbmcoKEdsb2JhbC5HZXRFeHRlbnNpb24oRW5jb3VudGVyUHJvY2VkdXJlLCAncHJvY2VkdXJlJykudmFsdWUgYXMgRkhJUi5SZWZlcmVuY2UpLnJlZmVyZW5jZSkpID0gU2VsZWN0ZWRQcm9jZWR1cmUuaWQKICAgICAgYW5kIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihTZWxlY3RlZFByb2NlZHVyZS5wZXJmb3JtZWQpIGR1cmluZyBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAoKZGVmaW5lICJTQ0lQIFZURSBTZWxlY3RlZCBTdXJnZXJ5IjoKICAoCVsiUHJvY2VkdXJlIjogIkdlbmVyYWwgU3VyZ2VyeSJdCiAgICB1bmlvbiBbIlByb2NlZHVyZSI6ICJHeW5lY29sb2dpY2FsIFN1cmdlcnkiXQogICAgdW5pb24gWyJQcm9jZWR1cmUiOiAiSGlwIEZyYWN0dXJlIFN1cmdlcnkiXQogICAgdW5pb24gWyJQcm9jZWR1cmUiOiAiSGlwIFJlcGxhY2VtZW50IFN1cmdlcnkiXQogICAgdW5pb24gWyJQcm9jZWR1cmUiOiAiSW50cmFjcmFuaWFsIE5ldXJvc3VyZ2VyeSJdCiAgICB1bmlvbiBbIlByb2NlZHVyZSI6ICJLbmVlIFJlcGxhY2VtZW50IFN1cmdlcnkiXQogICAgdW5pb24gWyJQcm9jZWR1cmUiOiAiVXJvbG9naWNhbCBTdXJnZXJ5Il0gKSBQcm9jZWR1cmUKICB3aGVyZSBQcm9jZWR1cmUuc3RhdHVzID0gJ2NvbXBsZXRlZCcKCmRlZmluZSAiRW5jb3VudGVyIFdpdGggSW50ZXJ2ZW50aW9uIENvbWZvcnQgTWVhc3VyZXMgRnJvbSBEYXkgb2YgU3RhcnQgb2YgSG9zcGl0YWxpemF0aW9uIFRvIERheSBBZnRlciBBZG1pc3Npb24iOgoJIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIKCQl3aXRoICJJbnRlcnZlbnRpb24gQ29tZm9ydCBNZWFzdXJlcyIgQ29tZm9ydE1lYXN1cmUKCQlzdWNoIHRoYXQgQ29hbGVzY2Uoc3RhcnQgb2YgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKENvbWZvcnRNZWFzdXJlLnBlcmZvcm1lZCksIENvbWZvcnRNZWFzdXJlLmF1dGhvcmVkT24pIGR1cmluZyBWVEVJQ1UuIkZyb21EYXlPZlN0YXJ0T2ZIb3NwaXRhbGl6YXRpb25Ub0RheUFmdGVyQWRtaXNzaW9uIihRdWFsaWZ5aW5nRW5jb3VudGVyKQoKZGVmaW5lICJJbnRlcnZlbnRpb24gQ29tZm9ydCBNZWFzdXJlcyI6CgkoWyJTZXJ2aWNlUmVxdWVzdCI6ICJDb21mb3J0IE1lYXN1cmVzIl0gUAogICAgCQl3aGVyZSBQLmludGVudCA9ICdvcmRlcicKICApCiAgCXVuaW9uCiAgICAJKFsiUHJvY2VkdXJlIjogIkNvbWZvcnQgTWVhc3VyZXMiXSBJbnRlcnZlbnRpb25QZXJmb3JtZWQKICAgICAgCXdoZXJlIEludGVydmVudGlvblBlcmZvcm1lZC5zdGF0dXMgaW4geydjb21wbGV0ZWQnLCAnaW4tcHJvZ3Jlc3MnfSkKCmRlZmluZSAiRW5jb3VudGVyIFdpdGggSW50ZXJ2ZW50aW9uIENvbWZvcnQgTWVhc3VyZXMgb24gRGF5IG9mIG9yIERheSBBZnRlciBQcm9jZWR1cmUiOgogIGZyb20KICAJCSJFbmNvdW50ZXIgV2l0aCBBZ2UgUmFuZ2UgYW5kIFdpdGhvdXQgVlRFIERpYWdub3NpcyBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIiBRdWFsaWZ5aW5nRW5jb3VudGVyLAogIAkJWyJQcm9jZWR1cmUiOiAiR2VuZXJhbCBvciBOZXVyYXhpYWwgQW5lc3RoZXNpYSJdIEFuZXN0aGVzaWFQcm9jZWR1cmUsCiAgCQkiSW50ZXJ2ZW50aW9uIENvbWZvcnQgTWVhc3VyZXMiIENvbWZvcnRNZWFzdXJlCgkJd2hlcmUgQW5lc3RoZXNpYVByb2NlZHVyZS5zdGF0dXMgPSAnY29tcGxldGVkJwoJCQkJYW5kIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihBbmVzdGhlc2lhUHJvY2VkdXJlLnBlcmZvcm1lZCkgZW5kcyAxIGRheSBhZnRlciBkYXkgb2Ygc3RhcnQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgICAgICBhbmQgQ29hbGVzY2Uoc3RhcnQgb2YgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKENvbWZvcnRNZWFzdXJlLnBlcmZvcm1lZCksIENvbWZvcnRNZWFzdXJlLmF1dGhvcmVkT24pIGR1cmluZyBUSkMuIkNhbGVuZGFyRGF5T2ZPckRheUFmdGVyIihlbmQgb2YgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKEFuZXN0aGVzaWFQcm9jZWR1cmUucGVyZm9ybWVkKSkKICAgIHJldHVybiBRdWFsaWZ5aW5nRW5jb3VudGVyCgpkZWZpbmUgIk51bWVyYXRvciI6CiAgICAiRW5jb3VudGVyIFdpdGggVlRFIFByb3BoeWxheGlzIFJlY2VpdmVkIG9uIERheSBvZiBvciBEYXkgQWZ0ZXIgQWRtaXNzaW9uIG9yIFByb2NlZHVyZSIKICAgIHVuaW9uICggIkVuY291bnRlciBXaXRoIE1lZGljYXRpb24gT3JhbCBGYWN0b3IgWGEgSW5oaWJpdG9yIEFkbWluaXN0ZXJlZCBvbiBEYXkgb2Ygb3IgRGF5IEFmdGVyIEFkbWlzc2lvbiBvciBQcm9jZWR1cmUiCiAgICAJCQkgIGludGVyc2VjdCAoICJFbmNvdW50ZXIgV2l0aCBQcmlvciBvciBQcmVzZW50IERpYWdub3NpcyBvZiBBdHJpYWwgRmlicmlsbGF0aW9uIG9yIFZURSIKICAgIAkJCQkJCSAgICB1bmlvbiAiRW5jb3VudGVyIFdpdGggUHJpb3Igb3IgUHJlc2VudCBQcm9jZWR1cmUgb2YgSGlwIG9yIEtuZWUgUmVwbGFjZW1lbnQgU3VyZ2VyeSIKICAgIAkJCSAgICAgICAgICAgICkKICAgICAgICAgICkKICAgIHVuaW9uICJFbmNvdW50ZXIgV2l0aCBMb3cgUmlzayBmb3IgVlRFIG9yIEFudGljb2FndWxhbnQgQWRtaW5pc3RlcmVkIgogICAgdW5pb24gIkVuY291bnRlciBXaXRoIE5vIFZURSBQcm9waHlsYXhpcyBEdWUgdG8gTWVkaWNhbCBSZWFzb24iCiAgICB1bmlvbiAiRW5jb3VudGVyIFdpdGggTm8gVlRFIFByb3BoeWxheGlzIER1ZSB0byBQYXRpZW50IFJlZnVzYWwiCgpkZWZpbmUgIkVuY291bnRlciBXaXRoIFZURSBQcm9waHlsYXhpcyBSZWNlaXZlZCBvbiBEYXkgb2Ygb3IgRGF5IEFmdGVyIEFkbWlzc2lvbiBvciBQcm9jZWR1cmUiOgogCSggZnJvbQogICAJCQkiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlciwKICAgCQkJIlZURSBQcm9waHlsYXhpcyBieSBNZWRpY2F0aW9uIEFkbWluaXN0ZXJlZCBvciBEZXZpY2UgQXBwbGllZCIgVlRFUHJvcGh5bGF4aXMKICAJCXdoZXJlIENvYWxlc2NlKEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihWVEVQcm9waHlsYXhpcy5lZmZlY3RpdmUpLCBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoVlRFUHJvcGh5bGF4aXMucGVyZm9ybWVkKSkgc3RhcnRzIGR1cmluZyBUSkMuIkNhbGVuZGFyRGF5T2ZPckRheUFmdGVyIihzdGFydCBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZCkKICAJCXJldHVybiBRdWFsaWZ5aW5nRW5jb3VudGVyCiAJKQogCXVuaW9uICgKICAgIGZyb20KICAJCQkiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlciwKICAJCQlbIlByb2NlZHVyZSI6ICJHZW5lcmFsIG9yIE5ldXJheGlhbCBBbmVzdGhlc2lhIl0gQW5lc3RoZXNpYVByb2NlZHVyZSwKICAJCQkiVlRFIFByb3BoeWxheGlzIGJ5IE1lZGljYXRpb24gQWRtaW5pc3RlcmVkIG9yIERldmljZSBBcHBsaWVkIiBWVEVQcm9waHlsYXhpcwoJCQl3aGVyZSBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoQW5lc3RoZXNpYVByb2NlZHVyZS5wZXJmb3JtZWQpIGVuZHMgMSBkYXkgYWZ0ZXIgZGF5IG9mIHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCgkJCQlhbmQgQ29hbGVzY2UoR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKFZURVByb3BoeWxheGlzLmVmZmVjdGl2ZSksIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihWVEVQcm9waHlsYXhpcy5wZXJmb3JtZWQpKSBzdGFydHMgZHVyaW5nIFRKQy4iQ2FsZW5kYXJEYXlPZk9yRGF5QWZ0ZXIiKGVuZCBvZiBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoQW5lc3RoZXNpYVByb2NlZHVyZS5wZXJmb3JtZWQpKQoJCQlyZXR1cm4gUXVhbGlmeWluZ0VuY291bnRlcgoJKQoKLy8gMTAvMjk6IFJlcGxhY2VkIERldmljZVVzZVN0YXRlbWVudCB3aXRoIFByb2NlZHVyZSB3aXRoIGEgbmV3IHZhbHVlIHNldCBhbmQgcHJvY2VkdXJlLnVzZENvZGUgZm9yIHNwZWNpZnlpbmcgZGV2aWNlcwpkZWZpbmUgIlZURSBQcm9waHlsYXhpcyBieSBNZWRpY2F0aW9uIEFkbWluaXN0ZXJlZCBvciBEZXZpY2UgQXBwbGllZCI6CiAgKCBbIk1lZGljYXRpb25BZG1pbmlzdHJhdGlvbiI6IG1lZGljYXRpb24gaW4gIkxvdyBEb3NlIFVuZnJhY3Rpb25hdGVkIEhlcGFyaW4gZm9yIFZURSBQcm9waHlsYXhpcyJdIFZURU1lZGljYXRpb24KICAgICAgd2hlcmUgVlRFTWVkaWNhdGlvbi5zdGF0dXMgPSdjb21wbGV0ZWQnCgkJCSAgICAgYW5kIFZURU1lZGljYXRpb24uZG9zYWdlLnJvdXRlIGluICJTdWJjdXRhbmVvdXMgcm91dGUiCiAgKQogICB1bmlvbiAoWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiBtZWRpY2F0aW9uIGluICJMb3cgTW9sZWN1bGFyIFdlaWdodCBIZXBhcmluIGZvciBWVEUgUHJvcGh5bGF4aXMiXSBMTVdIIHdoZXJlIExNV0guc3RhdHVzID0gJ2NvbXBsZXRlZCcpCiAgICB1bmlvbiAoWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiBtZWRpY2F0aW9uIGluICJJbmplY3RhYmxlIEZhY3RvciBYYSBJbmhpYml0b3IgZm9yIFZURSBQcm9waHlsYXhpcyJdIEZhY3RvclhhIHdoZXJlIEZhY3RvclhhLnN0YXR1cyA9ICdjb21wbGV0ZWQnKQogICAgIHVuaW9uIChbIk1lZGljYXRpb25BZG1pbmlzdHJhdGlvbiI6IG1lZGljYXRpb24gaW4gIldhcmZhcmluIl0gV2FyZmFyaW4gd2hlcmUgV2FyZmFyaW4uc3RhdHVzID0gJ2NvbXBsZXRlZCcpCiAgICAgIHVuaW9uICgKICAgICAgICAgIFsiUHJvY2VkdXJlIjogIkRldmljZSBBcHBsaWNhdGlvbiJdIERldmljZUFwcGxpZWQKICAgICAgICAgIHdoZXJlIERldmljZUFwcGxpZWQuc3RhdHVzID0gJ2NvbXBsZXRlJwogICAgICAgICAgICAgICAgYW5kIChEZXZpY2VBcHBsaWVkLnVzZWRDb2RlIGluICJJbnRlcm1pdHRlbnQgcG5ldW1hdGljIGNvbXByZXNzaW9uIGRldmljZXMgKElQQykiCiAgICAgICAgICAgICAgICAgICAgb3IgRGV2aWNlQXBwbGllZC51c2VkQ29kZSBpbiJWZW5vdXMgZm9vdCBwdW1wcyAoVkZQKSIKICAgICAgICAgICAgICAgICAgICBvciBEZXZpY2VBcHBsaWVkLnVzZWRDb2RlIGluICJHcmFkdWF0ZWQgY29tcHJlc3Npb24gc3RvY2tpbmdzIChHQ1MpIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICkKCmRlZmluZSAiRW5jb3VudGVyIFdpdGggTWVkaWNhdGlvbiBPcmFsIEZhY3RvciBYYSBJbmhpYml0b3IgQWRtaW5pc3RlcmVkIG9uIERheSBvZiBvciBEYXkgQWZ0ZXIgQWRtaXNzaW9uIG9yIFByb2NlZHVyZSI6CgkoIGZyb20KICAgIAkJIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIsCiAgCQkJWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiBtZWRpY2F0aW9uIGluICJPcmFsIEZhY3RvciBYYSBJbmhpYml0b3IgZm9yIFZURSBQcm9waHlsYXhpcyBvciBWVEUgVHJlYXRtZW50Il0gRmFjdG9yWGFNZWRpY2F0aW9uCiAgICB3aGVyZSBGYWN0b3JYYU1lZGljYXRpb24uc3RhdHVzID0gJ2NvbXBsZXRlZCcKICAgICAgYW5kIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihGYWN0b3JYYU1lZGljYXRpb24uZWZmZWN0aXZlKSBzdGFydHMgZHVyaW5nIFRKQy4iQ2FsZW5kYXJEYXlPZk9yRGF5QWZ0ZXIiKHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kKQogICAgcmV0dXJuIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgICkKICAgIHVuaW9uICggZnJvbQogICAgCQkJCSAgIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIsCiAgICAgIAkJCQlbIlByb2NlZHVyZSI6ICJHZW5lcmFsIG9yIE5ldXJheGlhbCBBbmVzdGhlc2lhIl0gQW5lc3RoZXNpYVByb2NlZHVyZSwKICAgICAgCQkJCVsiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIjogbWVkaWNhdGlvbiBpbiAiT3JhbCBGYWN0b3IgWGEgSW5oaWJpdG9yIGZvciBWVEUgUHJvcGh5bGF4aXMgb3IgVlRFIFRyZWF0bWVudCJdIEZhY3RvclhhTWVkaWNhdGlvbgogICAgICAJCQl3aGVyZSBGYWN0b3JYYU1lZGljYXRpb24uc3RhdHVzID0gJ2NvbXBsZXRlZCcKICAgICAgICAgICAgICAgIGFuZCBBbmVzdGhlc2lhUHJvY2VkdXJlLnN0YXR1cyA9ICdjb21wbGV0ZWQnCiAgICAgIAkJCSAgICBhbmQgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKEFuZXN0aGVzaWFQcm9jZWR1cmUucGVyZm9ybWVkKSBlbmRzIDEgZGF5IGFmdGVyIGRheSBvZiBzdGFydCBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAogICAgICAJCQkJCWFuZCBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoRmFjdG9yWGFNZWRpY2F0aW9uLmVmZmVjdGl2ZSkgc3RhcnRzIGR1cmluZyBUSkMuIkNhbGVuZGFyRGF5T2ZPckRheUFmdGVyIihlbmQgb2YgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKEFuZXN0aGVzaWFQcm9jZWR1cmUucGVyZm9ybWVkKSkKICAgICAgCQkJcmV0dXJuIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgICAgCQkpCgovKk5PVEU6IEZlZWRiYWNrIGF0IERpZ2l0aWFsIFF1YWxpdHkgU3VtbWl0IDIwMTkgaW5kaWNhdGVzIHZlcmlmaWNhdGlvblN0YXR1cyBtYXkgYmUgZGlmZmljdWx0IGZvciBpbXBsZW1lbnRlcnMgdG8gcmV0cmlldmUKICAgICAgICBib3RoIGNvbmRpdGlvbi5jbGluaWNhbFN0YXR1cyBhbmQgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyA9ICdjb25maXJtZWQnCiovCmRlZmluZSAiRW5jb3VudGVyIFdpdGggUHJpb3Igb3IgUHJlc2VudCBEaWFnbm9zaXMgb2YgQXRyaWFsIEZpYnJpbGxhdGlvbiBvciBWVEUiOgoJKCAiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlcgoJCXdpdGggWyJDb25kaXRpb24iOiBjb2RlIGluICJBdHJpYWwgRmlicmlsbGF0aW9uL0ZsdXR0ZXIiXSBBdHJpYWxGaWJyaWxsYXRpb24KCQlzdWNoIHRoYXQgRkhJUkhlbHBlcnMuVG9Db25jZXB0KEF0cmlhbEZpYnJpbGxhdGlvbi5jbGluaWNhbFN0YXR1cykgaW4geyBHbG9iYWwuImFjdGl2ZSIsIEdsb2JhbC4icmVjdXJyZW5jZSIsIEdsb2JhbC4icmVsYXBzZSIgfQoJCQlhbmQgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKEF0cmlhbEZpYnJpbGxhdGlvbi5vbnNldCkgc3RhcnRzIG9uIG9yIGJlZm9yZSBlbmQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgICkKICAgIHVuaW9uICggIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgIAkJCQl3aGVyZSBHbG9iYWwuRW5jb3VudGVyRGlhZ25vc2lzKFF1YWxpZnlpbmdFbmNvdW50ZXIpLmNvZGUgaW4gIkF0cmlhbCBGaWJyaWxsYXRpb24vRmx1dHRlciIKICAgIAkJCSkKICAgIHVuaW9uICggIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgIAkJCQl3aXRoIFsiQ29uZGl0aW9uIjogY29kZSBpbiAiVmVub3VzIFRocm9tYm9lbWJvbGlzbSJdIFZURURpYWdub3NpcwogICAgCQkJCXN1Y2ggdGhhdCAgRkhJUkhlbHBlcnMuVG9Db25jZXB0KFZURURpYWdub3Npcy5jbGluaWNhbFN0YXR1cykgaW4geyBHbG9iYWwuImluYWN0aXZlIiwgR2xvYmFsLiJyZW1pc3Npb24iLCBHbG9iYWwuInJlc29sdmVkIiB9CiAgICAgIAkJCQkJLy9hbmQgVlRFRGlhZ25vc2lzLnZlcmlmaWNhdGlvblN0YXR1cyA9ICdjb25maXJtZWQnCiAgICAJCQkJYW5kIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihWVEVEaWFnbm9zaXMub25zZXQpIGJlZm9yZSBzdGFydCBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAogICAgICAJCSkKCmRlZmluZSAiRW5jb3VudGVyIFdpdGggUHJpb3Igb3IgUHJlc2VudCBQcm9jZWR1cmUgb2YgSGlwIG9yIEtuZWUgUmVwbGFjZW1lbnQgU3VyZ2VyeSI6CgkiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlcgoJd2l0aCAoIFsiUHJvY2VkdXJlIjogIkhpcCBSZXBsYWNlbWVudCBTdXJnZXJ5Il0KICAgIAkJCXVuaW9uIFsiUHJvY2VkdXJlIjogIktuZWUgUmVwbGFjZW1lbnQgU3VyZ2VyeSJdICkgSGlwS25lZVByb2NlZHVyZQoJc3VjaCB0aGF0IEhpcEtuZWVQcm9jZWR1cmUuc3RhdHVzID0gJ2NvbXBsZXRlZCcKCSAgICAgYW5kIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihIaXBLbmVlUHJvY2VkdXJlLnBlcmZvcm1lZCkgc3RhcnRzIG9uIG9yIGJlZm9yZSBlbmQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKCgpkZWZpbmUgIkVuY291bnRlciBXaXRoIExvdyBSaXNrIGZvciBWVEUgb3IgQW50aWNvYWd1bGFudCBBZG1pbmlzdGVyZWQiOgogICAiTG93IFJpc2sgZm9yIFZURSBvciBBbnRpY29hZ3VsYW50IEFkbWluaXN0ZXJlZCBGcm9tIERheSBvZiBTdGFydCBvZiBIb3NwaXRhbGl6YXRpb24gVG8gRGF5IEFmdGVyIEFkbWlzc2lvbiIKICAgCSB1bmlvbiAiTG93IFJpc2sgZm9yIFZURSBvciBBbnRpY29hZ3VsYW50IEFkbWluaXN0ZXJlZCBvbiBEYXkgb2Ygb3IgRGF5IEFmdGVyIFByb2NlZHVyZSIKCmRlZmluZSAiTG93IFJpc2sgZm9yIFZURSBvciBBbnRpY29hZ3VsYW50IEFkbWluaXN0ZXJlZCBGcm9tIERheSBvZiBTdGFydCBvZiBIb3NwaXRhbGl6YXRpb24gVG8gRGF5IEFmdGVyIEFkbWlzc2lvbiI6CiAJIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgIHdpdGggIklzIEluIExvdyBSaXNrIGZvciBWVEUgb3IgT24gQW50aWNvYWd1bGFudCIgVlRFUmlza0Fzc2Vzc21lbnQKICAgIHN1Y2ggdGhhdCBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoVlRFUmlza0Fzc2Vzc21lbnQuZWZmZWN0aXZlKSBzdGFydHMgZHVyaW5nIFZURUlDVS4iRnJvbURheU9mU3RhcnRPZkhvc3BpdGFsaXphdGlvblRvRGF5QWZ0ZXJBZG1pc3Npb24iKFF1YWxpZnlpbmdFbmNvdW50ZXIpCgpkZWZpbmUgIklzIEluIExvdyBSaXNrIGZvciBWVEUgb3IgT24gQW50aWNvYWd1bGFudCI6CgkgICggWyJPYnNlcnZhdGlvbiI6ICJSaXNrIGZvciB2ZW5vdXMgdGhyb21ib2VtYm9saXNtIl0gVlRFUmlza0Fzc2Vzc21lbnQKCQkJICB3aGVyZSBWVEVSaXNrQXNzZXNzbWVudC52YWx1ZSBpbiAiTG93IFJpc2siCiAgICAgICAgYW5kIFZURVJpc2tBc3Nlc3NtZW50LnN0YXR1cyBpbiB7J2ZpbmFsJywnYW1lbmRlZCcsICdjb3JyZWN0ZWQnfQoJICApCiAgdW5pb24gKCBbIk9ic2VydmF0aW9uIjogIklOUiJdIElOUkxhYlRlc3QKICAgICAgICB3aGVyZSBJTlJMYWJUZXN0LnZhbHVlIGFzIFF1YW50aXR5ID4gMy4wCiAgICAgICAgICAgIGFuZCBJTlJMYWJUZXN0LnN0YXR1cyBpbiB7J2ZpbmFsJywnYW1lbmRlZCcsICdjb3JyZWN0ZWQnfQogICAgICAgIHJldHVybiAiT2JzZXJ2YXRpb24iIHsgaWQ6IElOUkxhYlRlc3QuaWQsIGVmZmVjdGl2ZTogSU5STGFiVGVzdC5pc3N1ZWQgfQogICAgICAgICkKICB1bmlvbiAoKCggWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiAiVW5mcmFjdGlvbmF0ZWQgSGVwYXJpbiJdIFVuZnJhY3Rpb25hdGVkSGVwYXJpbgogICAgICAgICAgd2hlcmUgVW5mcmFjdGlvbmF0ZWRIZXBhcmluLmRvc2FnZS5yb3V0ZSBpbiAiSW50cmF2ZW5vdXMgcm91dGUiCiAgICAgICAgICkKICAgICAgICAgdW5pb24gWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiAiRGlyZWN0IFRocm9tYmluIEluaGliaXRvciJdCiAgICAgICAgIHVuaW9uIFsiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIjogIkdseWNvcHJvdGVpbiBJSWIvSUlJYSBJbmhpYml0b3JzIl0gKSBBbnRpY29hZ3VsYW50TWVkaWNhdGlvbgogICAgICAgICB3aGVyZSBBbnRpY29hZ3VsYW50TWVkaWNhdGlvbi5zdGF0dXMgPSAnY29tcGxldGUnCiAgICAgICAgIHJldHVybiAiT2JzZXJ2YXRpb24iIHsgaWQ6IEFudGljb2FndWxhbnRNZWRpY2F0aW9uLmlkLCBlZmZlY3RpdmU6IEFudGljb2FndWxhbnRNZWRpY2F0aW9uLmVmZmVjdGl2ZSB9CiAgICAgICkKCmRlZmluZSAiTG93IFJpc2sgZm9yIFZURSBvciBBbnRpY29hZ3VsYW50IEFkbWluaXN0ZXJlZCBvbiBEYXkgb2Ygb3IgRGF5IEFmdGVyIFByb2NlZHVyZSI6CiAJZnJvbQogICAJCSJFbmNvdW50ZXIgV2l0aCBBZ2UgUmFuZ2UgYW5kIFdpdGhvdXQgVlRFIERpYWdub3NpcyBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIiBRdWFsaWZ5aW5nRW5jb3VudGVyLAogICAJCVsiUHJvY2VkdXJlIjogIkdlbmVyYWwgb3IgTmV1cmF4aWFsIEFuZXN0aGVzaWEiXSBBbmVzdGhlc2lhUHJvY2VkdXJlLAogICAJCSJJcyBJbiBMb3cgUmlzayBmb3IgVlRFIG9yIE9uIEFudGljb2FndWxhbnQiIFZURVJpc2tBc3Nlc3NtZW50Cgl3aGVyZSBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoQW5lc3RoZXNpYVByb2NlZHVyZS5wZXJmb3JtZWQpIGVuZHMgMSBkYXkgYWZ0ZXIgZGF5IG9mIHN0YXJ0IG9mIFF1YWxpZnlpbmdFbmNvdW50ZXIucGVyaW9kCiAJCQlhbmQgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKFZURVJpc2tBc3Nlc3NtZW50LmVmZmVjdGl2ZSkgc3RhcnRzIGR1cmluZyBUSkMuIkNhbGVuZGFyRGF5T2ZPckRheUFmdGVyIihlbmQgb2YgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKEFuZXN0aGVzaWFQcm9jZWR1cmUucGVyZm9ybWVkKSkKCXJldHVybiBRdWFsaWZ5aW5nRW5jb3VudGVyCgpkZWZpbmUgIkVuY291bnRlciBXaXRoIE5vIFZURSBQcm9waHlsYXhpcyBEdWUgdG8gTWVkaWNhbCBSZWFzb24iOgogICAoICJObyBWVEUgUHJvcGh5bGF4aXMgTWVkaWNhdGlvbiBEdWUgdG8gTWVkaWNhbCBSZWFzb24gRnJvbSBEYXkgb2YgU3RhcnQgb2YgSG9zcGl0YWxpemF0aW9uIFRvIERheSBBZnRlciBBZG1pc3Npb24iCiAgICAgaW50ZXJzZWN0ICJObyBWVEUgUHJvcGh5bGF4aXMgRGV2aWNlIER1ZSB0byBNZWRpY2FsIFJlYXNvbiBGcm9tIERheSBvZiBTdGFydCBvZiBIb3NwaXRhbGl6YXRpb24gVG8gRGF5IEFmdGVyIEFkbWlzc2lvbiIKICAgKQogICB1bmlvbiAoICJObyBWVEUgUHJvcGh5bGF4aXMgTWVkaWNhdGlvbiBEdWUgdG8gTWVkaWNhbCBSZWFzb24gb24gRGF5IG9mIG9yIERheSBBZnRlciBQcm9jZWR1cmUiCiAgICAgICBpbnRlcnNlY3QgIk5vIFZURSBQcm9waHlsYXhpcyBEZXZpY2UgRHVlIHRvIE1lZGljYWwgUmVhc29uIG9uIERheSBvZiBvciBEYXkgQWZ0ZXIgUHJvY2VkdXJlIgogICAgICAgKQoKZGVmaW5lICJObyBWVEUgUHJvcGh5bGF4aXMgTWVkaWNhdGlvbiBEdWUgdG8gTWVkaWNhbCBSZWFzb24gRnJvbSBEYXkgb2YgU3RhcnQgb2YgSG9zcGl0YWxpemF0aW9uIFRvIERheSBBZnRlciBBZG1pc3Npb24iOgogICAJIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAgICAgIHdpdGgJIk5vIFZURSBQcm9waHlsYXhpcyBNZWRpY2F0aW9uIEFkbWluaXN0ZXJlZCBvciBPcmRlcmVkIiBOb1ZURU1lZGljYXRpb24KICAgICAJc3VjaCB0aGF0IENvYWxlc2NlKE5vVlRFTWVkaWNhdGlvbi5zdGF0dXNSZWFzb24sTm9WVEVNZWRpY2F0aW9uLnJlYXNvbkNvZGUpIGluICJNZWRpY2FsIFJlYXNvbiIKICAgICAgCQkJYW5kIENvYWxlc2NlKE5vVlRFTWVkaWNhdGlvbi5hdXRob3JlZE9uLCBzdGFydCBvZiBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoTm9WVEVNZWRpY2F0aW9uLmVmZmVjdGl2ZSkpIGR1cmluZyBWVEVJQ1UuIkZyb21EYXlPZlN0YXJ0T2ZIb3NwaXRhbGl6YXRpb25Ub0RheUFmdGVyQWRtaXNzaW9uIihRdWFsaWZ5aW5nRW5jb3VudGVyKQoKZGVmaW5lICJObyBWVEUgUHJvcGh5bGF4aXMgTWVkaWNhdGlvbiBBZG1pbmlzdGVyZWQgb3IgT3JkZXJlZCI6CiAgICgoCVsiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIjogbWVkaWNhdGlvbiBpbiAiTG93IERvc2UgVW5mcmFjdGlvbmF0ZWQgSGVwYXJpbiBmb3IgVlRFIFByb3BoeWxheGlzIl0KICAgICB1bmlvbgoJICAgIFsiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIjogbWVkaWNhdGlvbiBpbiAiTG93IE1vbGVjdWxhciBXZWlnaHQgSGVwYXJpbiBmb3IgVlRFIFByb3BoeWxheGlzIl0KICAgICB1bmlvbgoJICAgIFsiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIjogbWVkaWNhdGlvbiBpbiAiSW5qZWN0YWJsZSBGYWN0b3IgWGEgSW5oaWJpdG9yIGZvciBWVEUgUHJvcGh5bGF4aXMiXQogICAgIHVuaW9uCgkgICAgWyJNZWRpY2F0aW9uQWRtaW5pc3RyYXRpb24iOiBtZWRpY2F0aW9uIGluICJXYXJmYXJpbiJdCiAgICAgICApIE1lZGljYXRpb25BZG0KICAgICAgIHdoZXJlIE1lZGljYXRpb25BZG0uc3RhdHVzID0gJ25vdC1kb25lJwogICAgICAgICkKICB1bmlvbgoJICAgKCgJWyJNZWRpY2F0aW9uUmVxdWVzdCI6IG1lZGljYXRpb24gaW4gIkxvdyBEb3NlIFVuZnJhY3Rpb25hdGVkIEhlcGFyaW4gZm9yIFZURSBQcm9waHlsYXhpcyJdCiAgCXVuaW9uCiAgCSBbIk1lZGljYXRpb25SZXF1ZXN0IjogbWVkaWNhdGlvbiBpbiAiTG93IE1vbGVjdWxhciBXZWlnaHQgSGVwYXJpbiBmb3IgVlRFIFByb3BoeWxheGlzIl0KICAgIHVuaW9uCiAgICAJWyJNZWRpY2F0aW9uUmVxdWVzdCI6IG1lZGljYXRpb24gaW4gIkluamVjdGFibGUgRmFjdG9yIFhhIEluaGliaXRvciBmb3IgVlRFIFByb3BoeWxheGlzIl0KICAgIHVuaW9uCiAgICAJWyJNZWRpY2F0aW9uUmVxdWVzdCI6IG1lZGljYXRpb24gaW4gIldhcmZhcmluIl0KICAgICkgTWVkaWNhdGlvbk9yZGVyCiAgICAJd2hlcmUJTWVkaWNhdGlvbk9yZGVyLmRvTm90UGVyZm9ybSBpcyB0cnVlCiAgICAgICAgYW5kIE1lZGljYXRpb25PcmRlci5zdGF0dXMgaW4geydjb21wbGV0ZWQnLCAnY2FuY2VsbGVkJ30KICAgICAgICAvLzExLzUgZGlzY3Vzc2lvbjogYWxsIGV4cHJlc3Npb25zIGZvciBRSS1Db3JlIG11c3QgaW5jbHVkZSBhIHN0YXR1cy4KICAgICAgICAvL1RoZXJlZm9yZSwgd2UgbmVlZCBTZXJ2aWNlUmVxdWVzdC5zdGF0dXMgPSBjb21wbGV0ZWQ7IGFuZCBNZWRpY2F0aW9uUmVxdWVzdC5zdGF0dXMgPSBjYW5jZWxsZWQgKG9yIGNvbXBsZXRlZCwgc2luY2UgY2FuY2VsbGVkIGluZGljYXRlcyBpdCB3YXMgb25jZSBvcmRlcmVkIGJ1dCBpbnRlbnRpb25hbGx5IG5ldmVyIGZpbGxlZCkuCiAgICAgICAgLy9TbyB0aGUgbm90IGRvbmUgaXNzdWUgaXMgaGFuZGxlZCBieSBTZXJ2aWNlUmVxdWVzdC5kb05vdFBlcmZvcm0gPSBUcnVlICBPciBNZWRpY2F0aW9uUmVxdWVzdC5kb05vdFBlcmZvcm0gPSBUcnVlCiAgICApCgpkZWZpbmUgIk5vIFZURSBQcm9waHlsYXhpcyBNZWRpY2F0aW9uIER1ZSB0byBNZWRpY2FsIFJlYXNvbiBvbiBEYXkgb2Ygb3IgRGF5IEFmdGVyIFByb2NlZHVyZSI6Cglmcm9tCiAgCQkiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlciwKICAJCVsiUHJvY2VkdXJlIjogIkdlbmVyYWwgb3IgTmV1cmF4aWFsIEFuZXN0aGVzaWEiXSBBbmVzdGhlc2lhUHJvY2VkdXJlLAogIAkJIk5vIFZURSBQcm9waHlsYXhpcyBNZWRpY2F0aW9uIEFkbWluaXN0ZXJlZCBvciBPcmRlcmVkIiBOb1ZURU1lZGljYXRpb24KCXdoZXJlIENvYWxlc2NlKE5vVlRFTWVkaWNhdGlvbi5zdGF0dXNSZWFzb24sTm9WVEVNZWRpY2F0aW9uLnJlYXNvbkNvZGUpIGluICJNZWRpY2FsIFJlYXNvbiIKCQkJYW5kIEFuZXN0aGVzaWFQcm9jZWR1cmUuc3RhdHVzID0gJ2NvbXBsZXRlZCcKCQkJYW5kIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihBbmVzdGhlc2lhUHJvY2VkdXJlLnBlcmZvcm1lZCkgZW5kcyAxIGRheSBhZnRlciBkYXkgb2Ygc3RhcnQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKCQkJYW5kIENvYWxlc2NlKE5vVlRFTWVkaWNhdGlvbi5hdXRob3JlZE9uLCBzdGFydCBvZiBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoTm9WVEVNZWRpY2F0aW9uLmVmZmVjdGl2ZSkpIGR1cmluZyBUSkMuIkNhbGVuZGFyRGF5T2ZPckRheUFmdGVyIihlbmQgb2YgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKEFuZXN0aGVzaWFQcm9jZWR1cmUucGVyZm9ybWVkKSkKICByZXR1cm4gUXVhbGlmeWluZ0VuY291bnRlcgoKZGVmaW5lICJObyBWVEUgUHJvcGh5bGF4aXMgRGV2aWNlIER1ZSB0byBNZWRpY2FsIFJlYXNvbiBGcm9tIERheSBvZiBTdGFydCBvZiBIb3NwaXRhbGl6YXRpb24gVG8gRGF5IEFmdGVyIEFkbWlzc2lvbiI6CiAgIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIKICAJd2l0aCAiTm8gVlRFIFByb3BoeWxheGlzIERldmljZSBBcHBsaWVkIG9yIE9yZGVyZWQiIE5vVlRFRGV2aWNlCiAgICAgIHN1Y2ggdGhhdCBOb1ZURURldmljZS5yZXF1ZXN0U3RhdHVzUmVhc29uIGluICJNZWRpY2FsIFJlYXNvbiIKICAgICAgICBhbmQgIE5vVlRFRGV2aWNlLmF1dGhvcmVkT24gZHVyaW5nIFZURUlDVS4iRnJvbURheU9mU3RhcnRPZkhvc3BpdGFsaXphdGlvblRvRGF5QWZ0ZXJBZG1pc3Npb24iKFF1YWxpZnlpbmdFbmNvdW50ZXIpCgovLzExLzU6IFNlcnZpY2VSZXF1ZXN0IG5vdCBkb25lIHJlYXNvbiBpcyBhbiBleHRlbnNpb24gaW4gUUktQ29yZSBSNCBhcyBTZXJ2aWNlUmVxdWVzdC5leHRlbnNpb246c3RhdHVzUmVhc29uCmRlZmluZSBmdW5jdGlvbiBHZXRTdGF0dXNSZWFzb24ocmVxdWVzdFJlYXNvbiBTZXJ2aWNlUmVxdWVzdCk6CiAgICAgIEdsb2JhbC5HZXRCYXNlRXh0ZW5zaW9uKHJlcXVlc3RSZWFzb24sICdyZXF1ZXN0LXN0YXR1c1JlYXNvbicpCgpkZWZpbmUgIk5vIFZURSBQcm9waHlsYXhpcyBEZXZpY2UgQXBwbGllZCBvciBPcmRlcmVkIjoKICAoKAogICAgWyJTZXJ2aWNlUmVxdWVzdCI6ICJWZW5vdXMgZm9vdCBwdW1wcyAoVkZQKSJdCiAgICB1bmlvbiBbIlNlcnZpY2VSZXF1ZXN0IjogIkludGVybWl0dGVudCBwbmV1bWF0aWMgY29tcHJlc3Npb24gZGV2aWNlcyAoSVBDKSJdCiAgICB1bmlvbiBbIlNlcnZpY2VSZXF1ZXN0IjogIkdyYWR1YXRlZCBjb21wcmVzc2lvbiBzdG9ja2luZ3MgKEdDUykiXQogICAgKSBEZXZpY2VPcmRlcgogICAgd2hlcmUgRGV2aWNlT3JkZXIuc3RhdHVzID0gJ2NvbXBsZXRlZCcKICAgIC8vMTEvNSBkaXNjdXNzaW9uOiBhbGwgZXhwcmVzc2lvbnMgZm9yIFFJLUNvcmUgbXVzdCBpbmNsdWRlIGEgc3RhdHVzCiAgICAvL1NlcnZpY2VSZXF1ZXN0LnN0YXR1cyAtICBkcmFmdCB8IGFjdGl2ZSB8IHN1c3BlbmRlZCB8IGNvbXBsZXRlZCB8IGVudGVyZWQtaW4tZXJyb3IgfCBjYW5jZWxsZWQKICAgICAgICBhbmQgRGV2aWNlT3JkZXIuZG9Ob3RQZXJmb3JtIGlzIHRydWUKICAgIHJldHVybiB7aWQ6IERldmljZU9yZGVyLmlkLCByZXF1ZXN0U3RhdHVzUmVhc29uOiBHZXRTdGF0dXNSZWFzb24oRGV2aWNlT3JkZXIpLCBhdXRob3JlZE9uOiBEZXZpY2VPcmRlci5hdXRob3JlZE9ufQogICAgKQogIHVuaW9uCiAgICAoCiAgICAgIFsiUHJvY2VkdXJlIjogIkRldmljZSBBcHBsaWNhdGlvbiJdIERldmljZUFwcGxpZWQKICAgICAgbGV0IERldmljZU5vdERvbmVUaW1pbmc6IEdsb2JhbC5HZXRFeHRlbnNpb24oRGV2aWNlQXBwbGllZCwgJ3FpY29yZS1yZWNvcmRlZCcpLnZhbHVlCiAgICAgIHdoZXJlIChEZXZpY2VBcHBsaWVkLnVzZWRDb2RlIGluICJJbnRlcm1pdHRlbnQgcG5ldW1hdGljIGNvbXByZXNzaW9uIGRldmljZXMgKElQQykiCiAgICAgICAgICAgIG9yIERldmljZUFwcGxpZWQudXNlZENvZGUgaW4gIlZlbm91cyBmb290IHB1bXBzIChWRlApIgogICAgICAgICAgICBvciBEZXZpY2VBcHBsaWVkLnVzZWRDb2RlIGluICJHcmFkdWF0ZWQgY29tcHJlc3Npb24gc3RvY2tpbmdzIChHQ1MpIgogICAgICAgICAgICApCiAgICAgICAgIGFuZCAgRGV2aWNlQXBwbGllZC5zdGF0dXMgPSAnbm90LWRvbmUnCiAgICAgICAgIHJldHVybiB7aWQ6IERldmljZUFwcGxpZWQuaWQsIHJlcXVlc3RTdGF0dXNSZWFzb246IERldmljZUFwcGxpZWQuc3RhdHVzUmVhc29uLCBhdXRob3JlZE9uOiBEZXZpY2VOb3REb25lVGltaW5nfQoKICAgICkKCmRlZmluZSAiTm8gVlRFIFByb3BoeWxheGlzIERldmljZSBEdWUgdG8gTWVkaWNhbCBSZWFzb24gb24gRGF5IG9mIG9yIERheSBBZnRlciBQcm9jZWR1cmUiOgogIGZyb20KICAJCSJFbmNvdW50ZXIgV2l0aCBBZ2UgUmFuZ2UgYW5kIFdpdGhvdXQgVlRFIERpYWdub3NpcyBvciBPYnN0ZXRyaWNhbCBDb25kaXRpb25zIiBRdWFsaWZ5aW5nRW5jb3VudGVyLAogIAkJWyJQcm9jZWR1cmUiOiAiR2VuZXJhbCBvciBOZXVyYXhpYWwgQW5lc3RoZXNpYSJdIEFuZXN0aGVzaWFQcm9jZWR1cmUsCiAgCQkiTm8gVlRFIFByb3BoeWxheGlzIERldmljZSBBcHBsaWVkIG9yIE9yZGVyZWQiIE5vVlRFRGV2aWNlCiAgd2hlcmUgIE5vVlRFRGV2aWNlLnJlcXVlc3RTdGF0dXNSZWFzb24gaW4gIk1lZGljYWwgUmVhc29uIgogICAgICBhbmQgQW5lc3RoZXNpYVByb2NlZHVyZS5zdGF0dXMgPSAnY29tcGxldGVkJwogIAkJYW5kIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihBbmVzdGhlc2lhUHJvY2VkdXJlLnBlcmZvcm1lZCkgZW5kcyAxIGRheSBhZnRlciBkYXkgb2Ygc3RhcnQgb2YgUXVhbGlmeWluZ0VuY291bnRlci5wZXJpb2QKICAgICAgYW5kIE5vVlRFRGV2aWNlLmF1dGhvcmVkT24gZHVyaW5nIFRKQy4iQ2FsZW5kYXJEYXlPZk9yRGF5QWZ0ZXIiKGVuZCBvZiBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoQW5lc3RoZXNpYVByb2NlZHVyZS5wZXJmb3JtZWQpKQogIHJldHVybiBRdWFsaWZ5aW5nRW5jb3VudGVyCgpkZWZpbmUgIkVuY291bnRlciBXaXRoIE5vIFZURSBQcm9waHlsYXhpcyBEdWUgdG8gUGF0aWVudCBSZWZ1c2FsIjoKICJObyBWVEUgUHJvcGh5bGF4aXMgRHVlIHRvIFBhdGllbnQgUmVmdXNhbCBGcm9tIERheSBvZiBTdGFydCBvZiBIb3NwaXRhbGl6YXRpb24gVG8gRGF5IEFmdGVyIEFkbWlzc2lvbiIKIAl1bmlvbiAiTm8gVlRFIFByb3BoeWxheGlzIER1ZSB0byBQYXRpZW50IFJlZnVzYWwgb24gRGF5IG9mIG9yIERheSBBZnRlciBQcm9jZWR1cmUiCgpkZWZpbmUgIk5vIFZURSBQcm9waHlsYXhpcyBEdWUgdG8gUGF0aWVudCBSZWZ1c2FsIEZyb20gRGF5IG9mIFN0YXJ0IG9mIEhvc3BpdGFsaXphdGlvbiBUbyBEYXkgQWZ0ZXIgQWRtaXNzaW9uIjoKIAkiRW5jb3VudGVyIFdpdGggQWdlIFJhbmdlIGFuZCBXaXRob3V0IFZURSBEaWFnbm9zaXMgb3IgT2JzdGV0cmljYWwgQ29uZGl0aW9ucyIgUXVhbGlmeWluZ0VuY291bnRlcgoJIHdpdGggIk5vIFZURSBQcm9waHlsYXhpcyBNZWRpY2F0aW9uIG9yIERldmljZSBEdWUgdG8gUGF0aWVudCBSZWZ1c2FsIiBQYXRpZW50UmVmdXNhbAogICBzdWNoIHRoYXQgQ29hbGVzY2Uoc3RhcnQgb2YgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKFBhdGllbnRSZWZ1c2FsLmVmZmVjdGl2ZSksIFBhdGllbnRSZWZ1c2FsLmF1dGhvcmVkT24pCiAgICAgICAgIGR1cmluZyBWVEVJQ1UuIkZyb21EYXlPZlN0YXJ0T2ZIb3NwaXRhbGl6YXRpb25Ub0RheUFmdGVyQWRtaXNzaW9uIihRdWFsaWZ5aW5nRW5jb3VudGVyKQoKZGVmaW5lICJObyBWVEUgUHJvcGh5bGF4aXMgTWVkaWNhdGlvbiBvciBEZXZpY2UgRHVlIHRvIFBhdGllbnQgUmVmdXNhbCI6CiAgICAoICJObyBWVEUgUHJvcGh5bGF4aXMgTWVkaWNhdGlvbiBBZG1pbmlzdGVyZWQgb3IgT3JkZXJlZCIgTm9WVEVNZWRpY2F0aW9uCiAgICAgICAgd2hlcmUgQ29hbGVzY2UoTm9WVEVNZWRpY2F0aW9uLnN0YXR1c1JlYXNvbixOb1ZURU1lZGljYXRpb24ucmVhc29uQ29kZSkgaW4gIlBhdGllbnQgUmVmdXNhbCIKICAgICkKICB1bmlvbiAoIk5vIFZURSBQcm9waHlsYXhpcyBEZXZpY2UgQXBwbGllZCBvciBPcmRlcmVkIiBOb1ZURURldmljZQogICAgICAgICAgIHdoZXJlIE5vVlRFRGV2aWNlLnJlcXVlc3RTdGF0dXNSZWFzb24gaW4gIlBhdGllbnQgUmVmdXNhbCIKICAgICAgICApCgpkZWZpbmUgIk5vIFZURSBQcm9waHlsYXhpcyBEdWUgdG8gUGF0aWVudCBSZWZ1c2FsIG9uIERheSBvZiBvciBEYXkgQWZ0ZXIgUHJvY2VkdXJlIjoKIAlmcm9tCiAgIAkJIkVuY291bnRlciBXaXRoIEFnZSBSYW5nZSBhbmQgV2l0aG91dCBWVEUgRGlhZ25vc2lzIG9yIE9ic3RldHJpY2FsIENvbmRpdGlvbnMiIFF1YWxpZnlpbmdFbmNvdW50ZXIsCiAgIAkJWyJQcm9jZWR1cmUiOiAiR2VuZXJhbCBvciBOZXVyYXhpYWwgQW5lc3RoZXNpYSJdIEFuZXN0aGVzaWFQcm9jZWR1cmUsCiAgIAkJIk5vIFZURSBQcm9waHlsYXhpcyBNZWRpY2F0aW9uIG9yIERldmljZSBEdWUgdG8gUGF0aWVudCBSZWZ1c2FsIiBQYXRpZW50UmVmdXNhbAoJd2hlcmUgR2xvYmFsLiJOb3JtYWxpemUgSW50ZXJ2YWwiKEFuZXN0aGVzaWFQcm9jZWR1cmUucGVyZm9ybWVkKSBlbmRzIDEgZGF5IGFmdGVyIGRheSBvZiBzdGFydCBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLnBlcmlvZAogCQkJYW5kIENvYWxlc2NlKHN0YXJ0IG9mIEdsb2JhbC4iTm9ybWFsaXplIEludGVydmFsIihQYXRpZW50UmVmdXNhbC5lZmZlY3RpdmUpLCBQYXRpZW50UmVmdXNhbC5hdXRob3JlZE9uKQogICAgICAgICAgICAgZHVyaW5nIFRKQy4iQ2FsZW5kYXJEYXlPZk9yRGF5QWZ0ZXIiKGVuZCBvZiBHbG9iYWwuIk5vcm1hbGl6ZSBJbnRlcnZhbCIoQW5lc3RoZXNpYVByb2NlZHVyZS5wZXJmb3JtZWQpKQoJcmV0dXJuIFF1YWxpZnlpbmdFbmNvdW50ZXIK"
  } ]
}